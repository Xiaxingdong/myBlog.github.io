<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Quartz</title>
      <link href="/posts/1749949894.html"/>
      <url>/posts/1749949894.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Quartz"><a href="#Quartz" class="headerlink" title="Quartz"></a><a href="http://www.quartz-scheduler.org/" target="_blank" rel="noopener">Quartz</a></h1><blockquote><p>定时任务组件</p><p>Quartz是Job scheduling（作业调度）领域的一个开源项目，Quartz既可以单独使用也 可以跟spring框架整合使用，在实际开发中一般会使用后者。使用Quartz可以开发一个 或者多个定时任务，每个定时任务可以单独指定执行的时间，例如每隔1小时执行一次、每个月第一天上午10点执行一次、每个月最后一天下午5点执行一次等。</p></blockquote><h2 id="Quartz入门案例"><a href="#Quartz入门案例" class="headerlink" title="Quartz入门案例"></a>Quartz入门案例</h2><ol><li><p>创建maven工程quartzdemo，导入Quartz和spring相关坐标，pom.xml文件如下</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz‐scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz‐scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz‐jobs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li><li><p>自定义一个Job</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello quartz"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>提供Spring配置文件spring-jobs.xml，配置<code>自定义Job、任务描述、触发器、调度 工厂</code>等</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span> xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       xmlns:dubbo=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span> xmlns:mvc=<span class="string">"http://www.springframework.org/schema/mvc"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/beans/spring‐beans.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring‐</span></span><br><span class="line"><span class="string">       mvc.xsd http://code.alibabatech.com/schema/dubbo</span></span><br><span class="line"><span class="string">       http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/context/spring‐context.xsd"</span>&gt;</span><br><span class="line">    &lt;!--注册自定义Job--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">"jobDemo"</span></span><br><span class="line">          class="com.itheima.test.QuartzDemo"&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;!--注册JobDetail,作用是负责通过反射调用指定的Job--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">"jobDetail"</span></span><br><span class="line">          <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span><br><span class="line">        &lt;!--注入目标对象--&gt;</span><br><span class="line">        &lt;property name=<span class="string">"targetObject"</span> ref=<span class="string">"jobDemo"</span>/&gt;</span><br><span class="line">        &lt;!--注入目标方法--&gt;</span><br><span class="line">        &lt;property name=<span class="string">"targetMethod"</span> value=<span class="string">"run"</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!--注册一个触发器，指定任务触发的时间 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">"myTrigger"</span></span><br><span class="line">          <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerFactoryBean"</span>&gt;</span><br><span class="line">        &lt;!--注入JobDetail --&gt;</span><br><span class="line">        &lt;property name=<span class="string">"jobDetail"</span> ref=<span class="string">"jobDetail"</span>/&gt;</span><br><span class="line">        &lt;!--指定触发的时间，基于Cron表达式 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">"cronExpression"</span>&gt;</span><br><span class="line">            &lt;value&gt;0/10 * * * * ?&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!--注册一个统一的调度工厂，通过这个调度工厂调度任务 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">"scheduler"</span></span><br><span class="line">          <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span><br><span class="line">        &lt;!-- 注入多个触发器--&gt;</span><br><span class="line">        &lt;property name=<span class="string">"triggers"</span>&gt;</span><br><span class="line">            &lt;list&gt;</span><br><span class="line">                &lt;ref bean=<span class="string">"myTrigger"</span>/&gt;</span><br><span class="line">            &lt;/list&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></li><li><p>Junit测试</p><p><font color="red">bug</font></p><blockquote><p>org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 75; SchemaLocation: schemaLocation 值 ‘<a href="http://www.springframework.org/schema/beans" target="_blank" rel="noopener">http://www.springframework.org/schema/beans</a> <a href="http://www.springframework.org/schema/beans/spring‐beans.xsd" target="_blank" rel="noopener">http://www.springframework.org/schema/beans/spring‐beans.xsd</a> <a href="http://www.springframework.org/schema/mvc" target="_blank" rel="noopener">http://www.springframework.org/schema/mvc</a> <a href="http://www.springframework.org/schema/mvc/spring‐" target="_blank" rel="noopener">http://www.springframework.org/schema/mvc/spring‐</a> mvc.xsd <a href="http://code.alibabatech.com/schema/dubbo" target="_blank" rel="noopener">http://code.alibabatech.com/schema/dubbo</a> <a href="http://code.alibabatech.com/schema/dubbo/dubbo.xsd" target="_blank" rel="noopener">http://code.alibabatech.com/schema/dubbo/dubbo.xsd</a> <a href="http://www.springframework.org/schema/context" target="_blank" rel="noopener">http://www.springframework.org/schema/context</a> <a href="http://www.springframework.org/schema/context/spring‐context.xsd&#39;" target="_blank" rel="noopener">http://www.springframework.org/schema/context/spring‐context.xsd&#39;</a> 必须具有偶数个 URI。</p><hr><p>org.xml.sax.SAXParseException; lineNumber: 6; columnNumber: 10; schema_reference.4: 无法读取方案文档 ‘<a href="http://www.springframework.org/schema/beans/spring‐beans.xsd&#39;" target="_blank" rel="noopener">http://www.springframework.org/schema/beans/spring‐beans.xsd&#39;</a>, 原因为 1) 无法找到文档; 2) 无法读取文档; 3) 文档的根元素不是 <a href="xsd:schema">xsd:schema</a>。</p></blockquote></li></ol><h2 id="cron表达式"><a href="#cron表达式" class="headerlink" title="cron表达式"></a>cron表达式</h2><blockquote><p>cron表达式分为七个域，之间使用空格分隔。其中最后一个域（年）可以为空。每个域 都有自己允许的值和一些特殊字符构成。使用这些特殊字符可以使我们定义的表达式更加灵活。</p></blockquote><blockquote><p>逗号（,）：指定一个值列表，例如使用在月域上1,4,5,7表示1月、4月、5月和7月</p><p>横杠（-）：指定一个范围，例如在时域上3-6表示3点到6点（即3点、4点、5点、6点）<br>星号（*）：表示这个域上包含所有合法的值。例如，在月份域上使用星号意味着每个月 都会触发</p><p>斜线（/）：表示递增，例如使用在秒域上0/15表示每15秒 问号（?）：只能用在日和周域上，但是不能在这两个域上同时使用。表示不指定<br>井号（#）：只能使用在周域上，用于指定月份中的第几周的哪一天，例如6#3，意思是 某月的第三个周五 (6=星期五，3意味着月份中的第三周)<br>L：某域上允许的最后一个值。只能使用在日和周域上。当用在日域上，表示的是在月域 上指定的月份的最后一天。用于周域上时，表示周的最后一天，就是星期六<br>W：W 字符代表着工作日 (星期一到星期五)，只能用在日域上，它用来指定离指定日的最近的一个工作日</p></blockquote><h3 id="cron表达式在线生成器"><a href="#cron表达式在线生成器" class="headerlink" title="cron表达式在线生成器"></a><a href="http://cron.qqe2.com/" target="_blank" rel="noopener">cron表达式在线生成器</a></h3><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java相关组件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传智健康 </tag>
            
            <tag> Java相关组件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Idea开发工具</title>
      <link href="/posts/4265812449.html"/>
      <url>/posts/4265812449.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="Idea"><a href="#Idea" class="headerlink" title="Idea"></a>Idea</h1><h2 id="在IDEA中使用git"><a href="#在IDEA中使用git" class="headerlink" title="在IDEA中使用git"></a>在IDEA中使用git</h2><blockquote><ul><li>在IDEA中创建工程并将工程添加至Git</li><li>将文件添加到暂存区</li><li>提交文件</li><li>将代码推送到远程仓库</li><li>从远程仓库克隆工程到本地</li><li>从远程拉取代码</li><li>版本对比</li><li>创建分支</li><li>切换分支</li><li>分支合并</li></ul></blockquote><h3 id="在IDEA中配置Git"><a href="#在IDEA中配置Git" class="headerlink" title="在IDEA中配置Git"></a>在IDEA中配置Git</h3><blockquote><p>安装好IntelliJ IDEA后，如果Git安装在默认路径下，那么idea会自动找到git的位置，如果更改了Git的安装位置则需要手动配置下Git的路径。</p><p>选择``File→Settings<code>打开设置窗口，找到</code>Version Control<code>下的</code>git`选项：</p><p>选择git的安装目录后可以点击“Test”按钮测试是否正确配置</p></blockquote><h3 id="在IDEA中创建工程并将工程添加至Git"><a href="#在IDEA中创建工程并将工程添加至Git" class="headerlink" title="在IDEA中创建工程并将工程添加至Git"></a>在IDEA中创建工程并将工程添加至Git</h3><blockquote><p>将项目添加至Git管理后，可以从IDEA的工具栏上看到Git操作的按钮</p></blockquote><p>1.命令方式</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></div><p>2.``VCS<code>--&gt;</code>Import into Version Control<code>==--&gt;</code>Create Git Repository`–&gt;<del>ProjectName</del></p><h3 id="将文件添加到暂存区"><a href="#将文件添加到暂存区" class="headerlink" title="将文件添加到暂存区"></a>将文件添加到暂存区</h3><blockquote><p>创建<code>.gitignore</code>文件</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git在Idea的使用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云短信发送</title>
      <link href="/posts/3783559436.html"/>
      <url>/posts/3783559436.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="阿里云短信发送"><a href="#阿里云短信发送" class="headerlink" title="阿里云短信发送"></a>阿里云短信发送</h1><h2 id="短信服务介绍"><a href="#短信服务介绍" class="headerlink" title="短信服务介绍"></a>短信服务介绍</h2><blockquote><p>目前市面上有很多第三方提供的短信服务，这些第三方短信服务会和各个运营商（移动、联通、电信） 对接，我们只需要注册成为会员并且按照提供的开发文档进行调用就可以发送短信。需要说明的是这些 短信服务都是收费的服务。<br>本项目短信发送我们选择的是阿里云提供的短信服务。<br>短信服务（Short Message Service）是阿里云为用户提供的一种通信服务的能力，支持快速发送短信 验证码、短信通知等。 三网合一专属通道，与工信部携号转网平台实时互联。电信级运维保障，实时监 控自动切换，到达率高达99%。短信服务API提供短信发送、发送状态查询、短信批量发送等能力，在<br>短信服务控制台上添加签名、模板并通过审核之后，可以调用短信服务API完成短信发送等操作。</p></blockquote><h3 id="注册阿里云账号"><a href="#注册阿里云账号" class="headerlink" title="注册阿里云账号"></a>注册阿里云账号</h3><p><a href="https://www.aliyun.com/" target="_blank" rel="noopener">阿里云</a></p><h3 id="设置短信签名"><a href="#设置短信签名" class="headerlink" title="设置短信签名"></a>设置短信签名</h3><blockquote><p>注册成功后，点击登录按钮进行登录。登录后进入<code>短信服务管理页面</code>，选择国内消息菜单：</p></blockquote><p><a href="https://dysms.console.aliyun.com/dysms.htm?spm=5176.8064714.775172.pricedetail1111.5d0fAhClAhClLH#/quickStart" target="_blank" rel="noopener">阿里云短息服务设置</a></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206195315.png" alt="image-20200206195226395" style="zoom:50%"><h3 id="设置短信模板"><a href="#设置短信模板" class="headerlink" title="设置短信模板"></a>设置短信模板</h3><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206200053.png" alt="image-20200206200019627" style="zoom:67%"><h3 id="设置access-keys"><a href="#设置access-keys" class="headerlink" title="设置access keys"></a>设置access keys</h3><blockquote><p>在发送短信时需要进行身份认证，只有认证通过才能发送短信。本小节就是要设置用于发送短信时进行 身份认证的key和密钥。鼠标放在页面右上角当前用户头像上，会出现下拉菜单：</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java相关软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传智健康 </tag>
            
            <tag> 阿里云短信发送 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信公众号开发</title>
      <link href="/posts/2797110814.html"/>
      <url>/posts/2797110814.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="微信公众号开发"><a href="#微信公众号开发" class="headerlink" title="微信公众号开发"></a>微信公众号开发</h1><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> phoneDevelepment </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信公众号开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sourceTree使用教程</title>
      <link href="/posts/376283487.html"/>
      <url>/posts/376283487.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="SourceTree使用教程"><a href="#SourceTree使用教程" class="headerlink" title="SourceTree使用教程"></a>SourceTree使用教程</h1><blockquote><p>了解用于Git或Mercurial版本控制的简单工具</p></blockquote><h2 id="安装和设置Sourcetree"><a href="#安装和设置Sourcetree" class="headerlink" title="安装和设置Sourcetree"></a>安装和设置Sourcetree</h2><ul><li>安装sourceTree</li></ul><blockquote><ol><li>转到 <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">Sourcetree网站</a>，然后单击下载按钮。</li><li>从下载的ZIP文件中，单击要下载的应用程序文件（对于Windows是EXE或对于Mac是DMG）。</li><li>安装后，您必须同意Atlassian客户协议并点击<strong>继续</strong>。</li><li>您需要一个Atlassian帐户才能使用Sourcetree。转到此屏幕时，单击“ <strong>使用现有帐户”</strong> 或“ <strong>转到我的Atlassian”，</strong> 然后按照提示 <a href="https://id.atlassian.com/signup?application=mac&continue=https%3A%2F%2Fmy.atlassian.com%2Fproducts%2Findex" target="_blank" rel="noopener">创建新帐户</a>。拥有帐户后，您可以<strong>使用使用现有帐户</strong>登录。</li></ol></blockquote><blockquote><p>如果要连接到远程托管服务，请在输入Bitbucket或GitHub凭据时使用默认选项。如果无法不生成SSH密钥而无法继续，请选择<strong>HTTPS</strong>继续，或参阅“ <a href="https://confluence.atlassian.com/x/X4FmKw" target="_blank" rel="noopener">设置SSH密钥”</a>以获取有关使用Sourcetree设置SSH的更多详细信息。</p></blockquote><ul><li>连接您的Bitbucket或Github帐户</li></ul><blockquote><p>要将存储库添加到Sourcetree，请使用您的Bitbucket或Github帐户登录。您可以将多个帐户添加到Sourcetree。</p></blockquote><blockquote><ol><li>点击齿轮图标，然后选择 <strong>帐户</strong>。</li><li>从“ <strong>帐户”</strong>选项卡中单击“ <strong>添加</strong> ” 。</li><li>选择<strong>主机后</strong>，输入主机详细信息。如果选择了<strong>Bitbucket</strong>或<strong>GitHub</strong>，则保留默认的<strong>Auth Type</strong>并单击<strong>Connect Account</strong>输入您的凭据。输入帐户详细信息后，您可以选择是希望使用HTTPS还是SSH连接。有关为您的帐户设置SSH的信息，请参阅“ <a href="https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html" target="_blank" rel="noopener">设置SSH密钥”</a>。</li></ol></blockquote><ul><li>克隆远程存储库</li></ul><blockquote><p>如果Bitbucket或Github上已有远程存储库，则需要将其复制或克隆到计算机上</p></blockquote><blockquote><ol><li>在SourceTree中，单击 <strong>Remote</strong>。显示所有远程项目。</li><li>点击 <strong>克隆</strong> 旁边的仓库要克隆本地。</li><li>在“ <strong>克隆存储库”</strong> 窗口中，单击“ <strong>克隆”</strong>。单击<strong>本地</strong>以查看您的克隆存储库的列表。</li></ol></blockquote><ul><li>创建本地存储库</li></ul><blockquote><ol><li>单击“ <strong>新建”</strong>，然后选择“ <strong>创建本地存储库”</strong>。</li><li>输入<strong>目标路径</strong>和存储库<strong>名称</strong>，然后单击 <strong>创建</strong>。</li></ol></blockquote><ul><li>添加现有的本地存储库</li></ul><h2 id="了解界面"><a href="#了解界面" class="headerlink" title="了解界面"></a>了解界面</h2><blockquote><p>查找开始工作所需的基本信息</p></blockquote><h2 id="版本控制和Sourcetree"><a href="#版本控制和Sourcetree" class="headerlink" title="版本控制和Sourcetree"></a>版本控制和Sourcetree</h2><blockquote><p>概述版本控制以及Sourcetree扮演的角色</p></blockquote><h2 id="使用Mercurial工作"><a href="#使用Mercurial工作" class="headerlink" title="使用Mercurial工作"></a>使用Mercurial工作</h2><blockquote><p>查找如何使用Mercuria拉，推现有文件，创建和推新文件以及合并。</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java相关软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sourceTree使用教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Idea中使用git</title>
      <link href="/posts/190404840.html"/>
      <url>/posts/190404840.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="Idea中使用git"><a href="#Idea中使用git" class="headerlink" title="Idea中使用git"></a>Idea中使用git</h1><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java相关软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Idea中使用git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/posts/1368285564.html"/>
      <url>/posts/1368285564.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit.png" alt="image-20200204182513524"><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><ul><li><p>本地初始化git仓库</p><blockquote><ol><li>在电脑的任意位置创建一个空目录（例如repo1）作为我们的本地Git仓库</li><li>进入这个目录中，点击右键打开Git bash窗口</li><li>执行命令<code>git init</code></li></ol></blockquote></li></ul><ul><li><p>从远程仓库克隆</p><blockquote><p>可以通过Git提供的命令从远程仓库进行克隆，将远程仓库克隆到本地</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> clone 远程Git仓库地址</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="工作目录-暂存区-版本库概念"><a href="#工作目录-暂存区-版本库概念" class="headerlink" title="工作目录/暂存区/版本库概念"></a>工作目录/暂存区/版本库概念</h2><blockquote><p>版本库：前面看到的.git隐藏文件夹就是版本库，版本库中存储了很多配置信息、日志信息和文件版本信息等</p><p>工作目录（工作区）：包含.git文件夹的目录就是工作目录，主要用于存放开发的代码</p><p>暂存区：.git文件夹中有很多文件，其中有一个index文件就是暂存区，也可以叫做stage。暂存区是一个临时保存修改文件的地方</p></blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit2.png" alt="image-20200204183215912"><ul><li><p>Git工作目录下的文件存在两种状态</p><p><code>untracked</code></p><blockquote><p>未跟踪（未被纳入版本控制）</p></blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit3.png" alt="image-20200204184155763"></li></ul><p><code>tracked</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200204184618.png" alt="image-20200204184602291"><blockquote><p>已跟踪（被纳入版本控制）</p><ol><li><p><code>Unmodified</code>未修改状态</p></li><li><p><code>Modified</code> 已修改状态</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit4.png" alt="image-20200204185838001" style="zoom:80%"></li><li><p><code>Staged</code> 已暂存状态</p></li></ol></blockquote><ul><li><p>查看文件状态</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> status /git status –s</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>将文件加入缓存区/取消缓存</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> add 未被纳入版本控制的文件名</span><br></pre></td></tr></table></figure></div></li><li><p>将暂存区的文件取消暂存</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> reset 已被纳入版本控制的文件名</span><br></pre></td></tr></table></figure></div></li><li><p>将暂存区的文件修改提交到本地仓库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> commit</span><br><span class="line">git commit -m <span class="string">"日志信息"</span>//将暂存区的所有文件提交到本地仓库</span><br><span class="line">git commit -m <span class="string">"日志信息"</span> demo.txt //将暂存区的demo.txt文件提交到本地仓库</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>删除文件</p><p>删除文件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> rm 删除文件</span><br></pre></td></tr></table></figure></div></li></ul><p>提交到本地仓库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> commit -m <span class="string">"日志信息"</span></span><br></pre></td></tr></table></figure></div><ul><li>将文件添加至忽略目录</li></ul><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><ul><li><p>查看远程仓库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> remote</span><br><span class="line"></span><br><span class="line">git remote //查看远程仓库地址</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>添加远程仓库</p><blockquote><p>添加一个新的远程 Git 仓库，同时指定一个可以引用的简写</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> remote add &lt;shortname&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>从远程仓库克隆</p><blockquote><p>如果你想获得一份已经存在了的 Git 仓库的拷贝，这时就要用到 git clone 命令。 Git 克隆的是该 Git 仓库服务器上的几乎所有数据（包括日志信息、历史记录等），而不仅仅是复制工作所需要的文件。 当你执行 git clone 命令的时候，默认配置下远程 Git 仓库中的每一个文件的每一个版本都将被拉取下来。</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> clone [url]</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>移除远程仓库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> remote rm 仓库引用名</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>从远程仓库抓取/拉取远程仓库资源到本地仓库</p><p><code>get fetch</code></p><blockquote><p>从远程仓库获取最新版本到本地仓库，不会自动merge(不自动合并到工作区)</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> fetch 远程仓库引用名 远程仓库分支名</span><br><span class="line">git fetch origin master //抓取远程仓库origin最新版本到本地仓库</span><br><span class="line">git merge origin/master //将远程仓库分支下的数据合并到工作空间中来</span><br></pre></td></tr></table></figure></div><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit6.png" alt="image-20200204222107960"></li></ul><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit7.png" alt="image-20200204222211656" style="zoom:80%"><p>需要手动<code>merge</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit8.png" alt="image-20200204222435450" style="zoom:80%"><p><code>get pull</code></p><blockquote><p>从远程仓库获取最新版本到本地仓库，自动merge(自动合并到工作区)</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> pull [remote-name] [branch-name]</span><br></pre></td></tr></table></figure></div><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit9.png" alt="image-20200204223119963"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit8.png" alt="image-20200204222435450" style="zoom:80%"><blockquote><p>如果当前本地仓库不是从远程仓库克隆，而是本地创建的仓库，并且仓库中存在文件，此时再从远程仓库拉取文件的时候会报错</p></blockquote><p><code>fatal: refusing to merge unrelated histories</code></p><blockquote><p>解决此问题可以在git pull命令后加入参数</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--allow-unrelated-historie</span><br></pre></td></tr></table></figure><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit10.png" alt="image-20200204224127874"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit11.png" alt="image-20200204224757807"><p><code>successful</code></p><ul><li><p>推送到远程仓库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> push [remote-name] [branch-name]</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><ul><li><p>查看分支</p><p>列出所有本地分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch</span><br></pre></td></tr></table></figure></div><p>列出所有远程分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch -r</span><br></pre></td></tr></table></figure></div><p>列出所有本地分支和远程分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch -a</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>创建分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch 要创建的分支名</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>切换分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> checkout 要切换的分支名</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>将本地仓库分支推送至远程仓库分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> push [remote-name] [branch-name]</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>合并分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> merge 要合并的分支名</span><br></pre></td></tr></table></figure></div><p><font color="red">error</font></p><blockquote><p>在两个不同的分支中，对同一个文件的同一个部分进行了不同的修改，Git 就没办法合并它们，同时会提示文件冲突。</p></blockquote><p><code>example:</code>修改同一个java文件的成员属性</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit15.png" alt="image-20200204235657983"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit14.png" alt="image-20200204235507601" style="zoom:80%"></li></ul><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggit13.png" alt="image-20200204235243018"><p><font color="green">Sollution</font></p><blockquote><p>此时需要我们打开冲突的文件并修复冲突内容，最后执行``git add`命令来标识冲突已解决</p></blockquote><ul><li><p>删除分支</p><p>删除本地仓库分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch -d branchName</span><br><span class="line">git branch -D branchName //坚持要删除此分支,尽管要删除的分支中进行了一些开发动作</span><br></pre></td></tr></table></figure></div><p>删除远程仓库分支</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> push repositoryName –d branchName</span><br></pre></td></tr></table></figure></div></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java相关软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大秦帝国</title>
      <link href="/posts/3661623328.html"/>
      <url>/posts/3661623328.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h2 id="大秦帝国-第二部-国命纵横-下-第十四章-百年一乱"><a href="#大秦帝国-第二部-国命纵横-下-第十四章-百年一乱" class="headerlink" title="大秦帝国-第二部-国命纵横-下-第十四章-百年一乱"></a>大秦帝国-第二部-国命纵横-下-第十四章-百年一乱</h2><p>孟子怼张仪:</p><blockquote><p>“大道至真，不涉得失。末技卑微，唯言利害。以利取悦于人，以害威慑于人，此等蛊惑策士，犹辩真伪之说，岂非天下笑谈耳？”</p></blockquote><p>张仪讽孟子:</p><blockquote><p>“儒家大伪，天下可证：</p><p>在儒家眼里，人皆小人，唯我君子；术皆卑贱，唯我独尊；学皆邪途，唯我正宗。</p><p>墨子兼爱，你孟轲骂做无父绝后。杨朱言利，你孟轲骂成禽兽之学。法家强国富民，你孟轲骂成虎狼苛政。老庄超脱，你孟轲骂成逃遁之说。兵农医工，你孟轲骂为末技细学。纵横策士，你孟轲骂做妾妇之道。</p><p>你张扬刻薄，出言不逊，损遍天下诸子百家！却大言不惭，公然以王道正统自居。平心而论，儒家自己究有何物？你孟轲究有何物？</p><p>一言以蔽之，尔等不过一群四体不勤、五谷不分的书呆子，整天淹没在那个消逝的大梦里，唯知大话空洞，欺世盗名而已！国有急难，邦有乱局，儒家何曾拿出一个有用主意？尔等终日高谈文武之道、解民倒悬，事实上却主张回复井田古制，使万千民众流离失所，无田可耕！尔等信誓旦旦，称‘民为本，社稷次之，君为轻’，事实上却维护周礼、贬斥法制，要刑不上大夫，礼不下庶民；民可使由之，不可使知之；使万千平民有冤无讼、状告无门，天下空流多少鲜血？如此言行两端，心口不应，不是大伪欺世，却是堂堂正正么？</p><p>儒家大伪，更有其甚：尔等深藏利害之心，却将自己说成杀身成仁、舍生取义。但观其行，却是孜孜不倦地谋官求爵，但有不得，则惶惶若丧家之犬！三日不见君王，其心惴惴；一月不入官府，不知所终。究其实，利害之心，天下莫过儒家！趋利避害，本是人性。尔等偏无视人之本性，不做因势利导，反着意扼杀如闻人一般！</p><p>食而不语、寝而不语、坐怀不乱，生生将柳下惠那种不知生命为何物的木头，硬是捧为与圣人齐名的君子！将人变成了一具具活僵尸，一个个毫无血性的阉人！</p><p>儒家弟子数千，有几人如墨家子弟一般，做生龙活虎的真人？有几人不是唯唯诺诺的弱细无用之辈？阴有所求，却做文质彬的谦谦君子，求之不得，便骂尽天下。更有甚者，尔等儒家公然将虚伪看做美德，公然引诱人们说假话：为圣人隐，为大人隐，为贤者隐；教人自我虐待，教人恭顺服从，教人愚昧自私，教人守株待兔；终使民人不敢发掘丑恶，不敢面对法制，沦为无知茫然的下愚，使贵族永远欺之，使尔等上智永远愚弄之！险恶如斯，虚伪如斯，竟大言不惭地奢谈解民倒悬？</p><p>敢问诸位：春秋以来三五百年，可有此等荒诞离奇厚颜无耻之学？</p><p>有！那便是儒家！便是孔丘孟轲！”</p><p>“自儒家问世，尔等从不给天下生机活力，总是呼喝人们亦步亦趋，因循拘泥。天下诸侯，从春秋三百六十，到今日战国三十二，三五百年中，竟没有一个国家敢用尔等。儒家至大，无人敢用么？非也！说到底，谁用儒家，谁家灭亡！方今大争之世，若得儒家治国理民，天下便是茹毛饮血！</p><p>孟夫子啊，千百年之后，也许后辈子孙忽然不肖，忽然想万世不移，忽然想教国人灭雄心，儒家僵尸也许会被抬出来，孔孟二位，或可陪享社稷吃冷猪肉，成为大圣大贤。</p><p>然则，那已经是千秋大梦了，绝非尔等生身时代之真相也！儒家在这个大争之世，充其量，不过一群毫无用处的蛀书虫而已！</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> thinks </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大秦帝国 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginx功能</title>
      <link href="/posts/3930807984.html"/>
      <url>/posts/3930807984.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><blockquote><p>本篇文章总结了Nginx的几个基本功能</p></blockquote><h2 id="静态资源部署"><a href="#静态资源部署" class="headerlink" title="静态资源部署"></a>静态资源部署</h2><blockquote><p>nginx.conf文件配置</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> /usr/local/nginx/conf</span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure></div><h2 id="虚拟主机-端口绑定-域名绑定"><a href="#虚拟主机-端口绑定-域名绑定" class="headerlink" title="虚拟主机(端口绑定/域名绑定)"></a>虚拟主机(端口绑定/域名绑定)</h2><h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><h2><a href="#" class="headerlink"></a></h2><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx功能 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linus环境下安装软件</title>
      <link href="/posts/238621802.html"/>
      <url>/posts/238621802.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="Linus环境下安装软件"><a href="#Linus环境下安装软件" class="headerlink" title="Linus环境下安装软件"></a>Linus环境下安装软件</h1><blockquote><p>Linus环境为CentOS7</p></blockquote><blockquote><p>常用命令:</p></blockquote><h2 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h2><ul><li><p>上传JDK</p><p><a href="/post_files/package/jdk-7u75-linux-x64.tar.gz">☍jdk-7u75-linux-x64.tar.gz</a></p><p>查看jdk版本</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">java</span> –version</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -qa | grep java</span><br></pre></td></tr></table></figure></div></li><li><p><del>卸载open-JDK</del></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -e --nodeps java-<span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span>-openjdk-<span class="number">1.6.0.35</span>-<span class="number">1.13.7.1</span>.el6_6.i686</span><br><span class="line">rpm -e --nodeps java-<span class="number">1</span>.<span class="number">7</span>.<span class="number">0</span>-openjdk-<span class="number">1.7.0.79</span>-<span class="number">2.5.5.4</span>.el6.i686</span><br></pre></td></tr></table></figure></div></li><li><p>将软件安装到/usr/local</p></li><li><p>解压</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf jdk-7u75-linux-x64.tar.gz</span><br></pre></td></tr></table></figure></div></li><li><p>配置JDK的环境变量</p><blockquote><ol><li><p>vi /etc/profile</p></li><li><p>在末尾行添加</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#set java environment</span></span><br><span class="line">JAVA_HOME=/usr/local/jdk/jdk1.7.0_75</span><br><span class="line">CLASSPATH=.:$JAVA_HOME/lib.tools.jar</span><br><span class="line">PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"><span class="attribute">export</span> JAVA_HOME CLASSPATH PATH</span><br></pre></td></tr></table></figure></div></li><li><p>使更改的配置立即生效</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">source</span> /etc/profile</span><br></pre></td></tr></table></figure></div></li></ol></blockquote><p><code>successful</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgjdk.png" alt="image-20200202194909394"></li></ul><hr><h2 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h2><ul><li><p>上传mysql</p><p><a href="/post_files/package/MySQL-5.6.25-1.el6.x86_64.rpm-bundle.tar">☍MySQL-5.6.25-1.el6.x86_64.rpm-bundle.tar</a></p><p>查看mysql版本</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -qa | grep mysql</span><br></pre></td></tr></table></figure></div></li><li><p><del>系统自带的mysql卸载</del></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -e --nodeps ...</span><br></pre></td></tr></table></figure></div></li><li><p>解压</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -xvf ....tar</span><br></pre></td></tr></table></figure></div></li><li><p>安装MYSQL服务端</p><blockquote><p>root用户的密码第一次是随机生成的，它保存在/root/.mysql_secret中，第一次登录需要修改root密码</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -ivh MySQL-server-...</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p><font color="red">bug:</font></p><blockquote><p>file /usr/share/mysql/charsets/README from install of MySQL-server-5.6.25-1.el6.x86_64 conflicts with file from package mariadb-libs-1:5.5.56-2.el7.x86_64</p><p>……….</p><p>jar包冲突</p></blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmysqlBug.png" alt="image-20200202204039331" style="zoom:80%"></li><li><p><font color="green">Sollution:</font></p><p>卸载冲突的jar包</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -e mariadb-libs-<span class="number">1</span>:<span class="number">5</span>.<span class="number">5</span>.<span class="number">60</span>-<span class="number">1</span>.el7_5.x86_64 --nodeps</span><br></pre></td></tr></table></figure></div></li><li><p><font color="red">bug:</font></p><blockquote><p>FATAL ERROR: please install the following Perl modules before executing /usr/bin/mysql_install_db:</p></blockquote><p><font color="green">Sollution:</font></p><blockquote><p>安装autoconf库</p><p>安装完成之后继续执行安装mysql的命令：</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum</span> -y install autoconf</span><br><span class="line">cd /usr/bin</span><br><span class="line">./mysql_install_db --user=mysql</span><br></pre></td></tr></table></figure></div><p><code>successful</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmysql2.png" alt="image-20200202204927104"></li></ul><ul><li><p>开启mysql服务</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service</span> mysql start</span><br></pre></td></tr></table></figure></div></li><li><p>安装MYSQL客户端</p><p>查看生成的root密码</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cat</span> /root/.mysql_secret</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rpm</span> -ivh MySQL-client-...</span><br></pre></td></tr></table></figure></div><p>设置root用户的密码</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">set</span> password=password(<span class="string">'1515654xxd!'</span>);</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>mysql远程访问设置</p><p>grant 权限 on 数据库.* to 用户名@登录主机 identified by “密码”;</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">grant</span> all privileges <span class="literal">on</span> *.* to <span class="string">'root'</span> @<span class="string">'%'</span> identified by <span class="string">'1515654xxd'</span>;</span><br><span class="line"><span class="attribute">flush</span> privileges;</span><br></pre></td></tr></table></figure></div></li><li><p>将防火墙关闭</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service iptables stop;//CentOS6关闭方式</span><br><span class="line"><span class="attribute">systemctl</span> stop firewalld//CentOS7关闭方式</span><br></pre></td></tr></table></figure></div></li><li><p><a href="https://blog.csdn.net/HaHa_Sir/article/details/102732145?utm_source=app" target="_blank" rel="noopener">☍CentOS7关闭防火墙</a></p></li><li><p><a href="https://www.cnblogs.com/Snail-offort/p/10495707.html" target="_blank" rel="noopener">MySql下面的各种参数的配置</a></p></li></ul><hr><h2 id="安装tomcat"><a href="#安装tomcat" class="headerlink" title="安装tomcat"></a>安装tomcat</h2><ul><li><p>Tomcat上传到linux上</p><p><a href="/post_files/package/apache-tomcat-7.0.57.tar.gz">☍apache-tomcat-7.0.57.tar.gz</a></p></li><li><p>tomcat解压</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf apache-tomcat-<span class="number">7</span>.<span class="number">0</span>.<span class="number">57</span>.tar.gz</span><br></pre></td></tr></table></figure></div></li><li><p>在tomcat/bin目录下执行startup.sh</p></li></ul><hr><h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><ul><li><p>安装gcc-c++</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum</span> install gcc-c++</span><br></pre></td></tr></table></figure></div></li><li><p>安装redis</p><p>下载redis</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">wget</span> http://download.redis.io/releases/redis-3.0.4.tar.gz</span><br></pre></td></tr></table></figure></div></li><li><p>解压</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -xzvf redis-<span class="number">3</span>.<span class="number">0</span>.<span class="number">4</span>.tar.gz</span><br></pre></td></tr></table></figure></div></li><li><p>编译安装</p><p>切换至程序目录，并执行make命令编译</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> redis-<span class="number">3</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">make</span><br></pre></td></tr></table></figure></div></li><li><p>执行安装命令</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make</span> PREFIX=/usr/local/redis install</span><br></pre></td></tr></table></figure></div></li><li><p>配置redis</p><p>复制配置文件到/usr/local/redis/bin目录</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> redis-<span class="number">3</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">cp redis.conf /usr/local/redis/bin</span><br></pre></td></tr></table></figure></div></li><li><p>启动redis</p><p>进入redis/bin目录,启动redis服务端</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> redis/bin</span><br><span class="line">./redis-server</span><br></pre></td></tr></table></figure></div></li><li><p>克隆新窗口，启动redis客户端</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./redis-cli</span><br></pre></td></tr></table></figure></li><li><p>设置Redis最大占用内存</p><blockquote><p>推荐Redis设置内存为最大物理内存的四分之三</p></blockquote><p>vim redis.conf</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">maxmemory</span> <span class="number">268435456</span></span><br></pre></td></tr></table></figure></div></li></ul><hr><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><ul><li><p>Nginx下载</p><p><a href="/post_files/package/nginx-1.8.0.tar.gz">☍nginx-1.8.0.tar.gz</a></p></li><li><p>解压缩</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf nginx-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>.tar.gz</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>进入nginx-1.8.0目录 使用 configure 命令创建一 makeFile 文件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attribute">cd</span> nginx-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">--prefix=/usr/local/nginx \</span><br><span class="line">--pid-path=/var/run/nginx/nginx.pid \</span><br><span class="line">--lock-path=/var/lock/nginx.lock \</span><br><span class="line">--<span class="literal">error</span>-log-path=/var/log/nginx/error.log \</span><br><span class="line">--http-log-path=/var/log/nginx/access.log \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--http-client-body-temp-path=/var/temp/nginx/client \</span><br><span class="line">--http-proxy-temp-path=/var/temp/nginx/proxy \</span><br><span class="line">--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \</span><br><span class="line">--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \</span><br><span class="line">--http-scgi-temp-path=/var/temp/nginx/scgi</span><br></pre></td></tr></table></figure></div></li><li><p>编译</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></li><li><p>安装</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make</span> install</span><br></pre></td></tr></table></figure></div></li><li><p>Nginx启动与访问</p><p>启动nginx 之前，上边将临时文件目录指定为/var/temp/nginx/client， 需要在/var 下创建此 目录</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mkdir</span> /var/temp/nginx/client -p</span><br></pre></td></tr></table></figure></div><p>进入到Nginx目录下的sbin目录</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> /usr/local/nginx/sbin</span><br></pre></td></tr></table></figure></div><p>输入命令启动Nginx</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure></li></ul><p>地址栏输入<code>106.12.83.204</code></p><p>​</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgnginx.png" alt="image-20200203025034131" style="zoom:80%"><blockquote><p>在linus环境下安装软件不容易啊..感觉都要吐了</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgnan.gif" alt="img" style="zoom:50%"></blockquote><h2 id="安装Zookeeper"><a href="#安装Zookeeper" class="headerlink" title="安装Zookeeper"></a>安装Zookeeper</h2><ul><li><p><del>安装 jdk</del></p></li><li><p>把 zookeeper 的压缩包（zookeeper-3.4.6.tar.gz）上传到 linux 系统</p><p><a href="/post_files/package/zookeeper-3.4.6.tar.gz">☍zookeeper-3.4.6.tar.gz</a></p><p>解压缩压缩包</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf zookeeper-<span class="number">3</span>.<span class="number">4</span>.<span class="number">6</span>.tar.gz</span><br></pre></td></tr></table></figure></div></li><li><p>进入zookeeper-3.4.6目录，创建data目录</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mkdir</span> data</span><br></pre></td></tr></table></figure></div></li><li><p>进入conf目录 ，把zoo_sample.cfg 改名为zoo.cfg</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cd</span> conf</span><br><span class="line">mv zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure></div></li><li><p>打开zoo.cfg文件, 修改data属性</p><blockquote><p>dataDir=/root/zookeeper-3.4.6/data:</p></blockquote></li><li><p>启动、停止Zookeeper</p><p>进入Zookeeper的bin目录，启动服务命令</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh start</span><br></pre></td></tr></table></figure><p>停止服务命令</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh stop</span><br></pre></td></tr></table></figure><p>查看服务状态：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh status</span><br></pre></td></tr></table></figure></li></ul><h2 id="安装dubbo-admin"><a href="#安装dubbo-admin" class="headerlink" title="安装dubbo-admin"></a>安装dubbo-admin</h2><blockquote><p>我们在开发时，需要知道Zookeeper注册中心都注册了哪些服务，有哪些消费者来消费这些服务。我们可以通过部署一个管理中心来实现。其实管理中心就是一个web应用，部署到tomcat即可。</p></blockquote><ul><li><p>将dubbo-admin-2.6.0.war文件复制到tomcat的webapps目录下</p><p><a href="/post_files/package/dubbo-admin-2.6.0.war">☍dubbo-admin-2.6.0.war</a></p></li><li><p>启动tomcat，此war文件会自动解压</p></li><li><p>修改WEB-INF下的dubbo.properties文件，注意dubbo.registry.address对应的值需要对应当前使用的Zookeeper的ip地址和端口号</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dubbo.registry.address=zookeeper://106.12.83.204:2181</span><br><span class="line">dubbo.admin.root.password=root</span><br><span class="line">dubbo.admin.guest.password=guest</span><br></pre></td></tr></table></figure></li><li><p>重启tomcat</p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Linus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linus环境下安装软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot</title>
      <link href="/posts/2152316492.html"/>
      <url>/posts/2152316492.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Springboot入门"><a href="#Springboot入门" class="headerlink" title="Springboot入门"></a>Springboot入门</h1><blockquote><p>两小时轻松搞定微服务</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>echarts</title>
      <link href="/posts/896552296.html"/>
      <url>/posts/896552296.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="echarts"><a href="#echarts" class="headerlink" title="echarts"></a>echarts</h1><blockquote><p>一个使用 JavaScript 实现的开源可视化库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖矢量图形库 <a href="https://github.com/ecomfe/zrender" target="_blank" rel="noopener">ZRender</a>，提供直观，交互丰富，可高度个性化定制的数据可视化图表。</p></blockquote><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><blockquote><ol><li><p>引入<code>echarts.js</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"plugins/echarts/echarts.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li><li><p>为echarts创建一个Dom(长宽自定义)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">style</span>=<span class="string">"width: 800px;height: 600px"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li><li><p>基于准备好的dom，初始化echarts实例</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myEcharts = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">"main"</span>));</span><br><span class="line">...</span><br><span class="line">myEcharts.setOption(option);</span><br></pre></td></tr></table></figure></div></li><li><p>插入Echaerts网站模板实例代码</p></li></ol></blockquote><h3 id="饼状图"><a href="#饼状图" class="headerlink" title="饼状图"></a>饼状图</h3><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgecharts1.png" alt="img" style="zoom:67%"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"plugins/echarts/echarts.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">style</span>=<span class="string">"width: 800px;height: 600px"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> myEcharts = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">"main"</span>));</span></span><br><span class="line">    option = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line"><span class="actionscript">            text: <span class="string">'某站点用户访问来源'</span>,<span class="comment">//主标题</span></span></span><br><span class="line"><span class="actionscript">            subtext: <span class="string">'纯属虚构'</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//left: 'center'</span></span></span><br><span class="line"><span class="actionscript">            x: <span class="string">'center'</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//x2: 'center'</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//y: 'center'</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//y2: 'center'</span></span></span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">/*提示*/</span></span></span><br><span class="line">        tooltip: &#123;</span><br><span class="line"><span class="actionscript">            trigger: <span class="string">'item'</span>,<span class="comment">//数据项图形触发,主要在散点图,饼图等无轴的图表中使用</span></span></span><br><span class="line"><span class="actionscript">            formatter: <span class="string">'&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)'</span><span class="comment">//提示框浮层内容格式器,支持字符串模板和回调函数两种形式</span></span></span><br><span class="line">            /*字符串模板</span><br><span class="line">            饼图、仪表盘、漏斗图: &#123;a&#125;（系列名称），&#123;b&#125;（数据项名称），&#123;c&#125;（数值）, &#123;d&#125;（百分比）*/</span><br><span class="line"></span><br><span class="line">            /*回调函数法</span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="params">(params)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> params.seriesName+ <span class="string">" &lt;br/&gt;"</span>+params.name+<span class="string">" : "</span>+params.data.value + <span class="string">"&lt;h2&gt;["</span> +params.percent+<span class="string">"%]&lt;h2&gt;&lt;/h2&gt;"</span>;</span></span><br><span class="line">            &#125;*/</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">/*图例*/</span></span></span><br><span class="line">        legend: &#123;</span><br><span class="line"><span class="actionscript">            orient: <span class="string">'vertical'</span>,<span class="comment">//图例列表的布局朝向 horizontal/vertical</span></span></span><br><span class="line"><span class="actionscript">            left: <span class="string">'left'</span>,<span class="comment">//图例组件位置</span></span></span><br><span class="line"><span class="actionscript">            data: [<span class="string">'直接访问'</span>, <span class="string">'邮件营销'</span>, <span class="string">'联盟广告'</span>, <span class="string">'视频广告'</span>, <span class="string">'搜索引擎'</span>]</span></span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'访问来源'</span>,<span class="comment">//系列名称</span></span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'pie'</span>,<span class="comment">//饼图类型</span></span></span><br><span class="line"><span class="actionscript">                radius: <span class="string">'55%'</span>,<span class="comment">//饼图半径</span></span></span><br><span class="line">                /* 饼图的半径。可以为如下类型：              </span><br><span class="line">                number：直接指定外半径值。</span><br><span class="line"><span class="actionscript">                string：例如，<span class="string">'20%'</span>，表示外半径为可视区尺寸（容器高宽中较小一项）的 <span class="number">20</span>% 长度。                </span></span><br><span class="line"><span class="javascript">                <span class="built_in">Array</span>.&lt;number|string&gt;：数组的第一项是内半径，第二项是外半径。每一项遵从上述 number string 的描述。                </span></span><br><span class="line">                可以将内半径设大显示成圆环图（Donut chart）*/</span><br><span class="line"><span class="actionscript">                center: [<span class="string">'50%'</span>, <span class="string">'60%'</span>],</span></span><br><span class="line">                data: [</span><br><span class="line"><span class="actionscript">                    &#123;value: <span class="number">335</span>, name: <span class="string">'直接访问'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;value: <span class="number">310</span>, name: <span class="string">'邮件营销'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;value: <span class="number">234</span>, name: <span class="string">'联盟广告'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;value: <span class="number">135</span>, name: <span class="string">'视频广告'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;value: <span class="number">1548</span>, name: <span class="string">'搜索引擎'</span>&#125;</span></span><br><span class="line">                ],</span><br><span class="line"><span class="actionscript">                <span class="comment">/*高亮*/</span></span></span><br><span class="line">                emphasis: &#123;</span><br><span class="line">                    itemStyle: &#123;</span><br><span class="line">                        shadowBlur: 10,</span><br><span class="line">                        shadowOffsetX: 0,</span><br><span class="line"><span class="actionscript">                        shadowColor: <span class="string">'rgba(0, 0, 0, 0.5)'</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line">    myEcharts.setOption(option);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>效果图</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgecharts3.png" alt="image-20200202124354584" style="zoom:67%"><h3 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3><h3 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>line<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"plugins/echarts/echarts.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">style</span>=<span class="string">"width: 800px;height:600px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'main'</span>));</span></span><br><span class="line">    myOption = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line"><span class="actionscript">            text: <span class="string">'折线图堆叠'</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line"><span class="actionscript">            trigger: <span class="string">'axis'</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line"><span class="actionscript">            data: [<span class="string">'邮件营销'</span>, <span class="string">'联盟广告'</span>, <span class="string">'视频广告'</span>, <span class="string">'直接访问'</span>, <span class="string">'搜索引擎'</span>]</span></span><br><span class="line">        &#125;,</span><br><span class="line">        grid: &#123;</span><br><span class="line"><span class="actionscript">            left: <span class="string">'3%'</span>,</span></span><br><span class="line"><span class="actionscript">            right: <span class="string">'4%'</span>,</span></span><br><span class="line"><span class="actionscript">            bottom: <span class="string">'3%'</span>,</span></span><br><span class="line"><span class="actionscript">            containLabel: <span class="literal">true</span></span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">/*工具箱*/</span></span></span><br><span class="line">        toolbox: &#123;</span><br><span class="line"><span class="actionscript">            show: <span class="literal">true</span>,</span></span><br><span class="line">            feature: &#123;</span><br><span class="line">                dataZoom: &#123;</span><br><span class="line"><span class="actionscript">                    yAxisIndex: <span class="string">'none'</span></span></span><br><span class="line">                &#125;,</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                <span class="comment">/*数据视图*/</span></span></span><br><span class="line">                dataView: &#123;</span><br><span class="line"><span class="actionscript">                    readOnly: <span class="literal">false</span>,</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">/*自定义 dataView 展现函数，用以取代默认的 textarea 使用更丰富的数据编辑。可以返回 dom 对象或者 html 字符串*/</span></span></span><br><span class="line"><span class="actionscript">                    optionToContent: <span class="function"><span class="keyword">function</span><span class="params">(opt)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">var</span> axisData = opt.xAxis[<span class="number">0</span>].data;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">var</span> series = opt.series;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                        var table = '<span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"width:100%;text-align:center;"</span><span class="attr">border</span>=<span class="string">" 1px solid #0094ff"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span>; "&gt;</span><span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span>'</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                            + '<span class="tag">&lt;<span class="name">td</span>&gt;</span>时间<span class="tag">&lt;/<span class="name">td</span>&gt;</span>'</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = series.length; i &lt; l; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                            table+= <span class="string">'&lt;td&gt;'</span> + series[i].name + <span class="string">'&lt;/td&gt;'</span></span></span><br><span class="line">                        &#125;</span><br><span class="line"><span class="actionscript">                            + <span class="string">'&lt;/tr&gt;'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = axisData.length; i &lt; l; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                            table += <span class="string">'&lt;tr&gt;'</span></span></span><br><span class="line"><span class="actionscript">                                + <span class="string">'&lt;td&gt;'</span> + axisData[i] + <span class="string">'&lt;/td&gt;'</span></span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, k = series.length; j &lt; k; j++) &#123;</span></span><br><span class="line">                                if(series[j].data[i].value) &#123;</span><br><span class="line"><span class="actionscript">                                    table+= <span class="string">'&lt;td&gt;'</span> + series[j].data[i].value + <span class="string">'&lt;/td&gt;'</span></span></span><br><span class="line"><span class="actionscript">                                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                                    table+= <span class="string">'&lt;td&gt;'</span> + series[j].data[i] + <span class="string">'&lt;/td&gt;'</span></span></span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line"><span class="actionscript">                            + <span class="string">'&lt;/tr&gt;'</span>;</span></span><br><span class="line">                        &#125;</span><br><span class="line"><span class="handlebars"><span class="xml">                        table += '<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span>';</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> table;</span></span><br><span class="line">                    &#125;,</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    <span class="comment">/*在使用 optionToContent 的情况下，如果支持数据编辑后的刷新，需要自行通过该函数实现组装 option 的逻辑。*/</span></span></span><br><span class="line"><span class="actionscript">                    contentToOption:<span class="function"><span class="keyword">function</span> <span class="params">(html,opt)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        myOption.series[<span class="number">0</span>].data = [<span class="number">333</span>,<span class="number">333</span>,<span class="number">333</span>,<span class="number">333</span>,<span class="number">333</span>,<span class="number">333</span>,<span class="number">333</span>]<span class="comment">//通过contentToOption 这个方法获取html数据</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">return</span> myOption;<span class="comment">//把修改后的数据放入到option对象里面然后返回</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="actionscript">                <span class="comment">/*折线图&lt;==&gt;柱状图*/</span></span></span><br><span class="line"><span class="actionscript">                magicType: &#123;type: [<span class="string">'line'</span>, <span class="string">'bar'</span>]&#125;,</span></span><br><span class="line">                restore: &#123;&#125;,</span><br><span class="line">                saveAsImage: &#123;</span><br><span class="line"><span class="actionscript">                    type:<span class="string">"png"</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: &#123;</span><br><span class="line"><span class="actionscript">            type: <span class="string">'category'</span>,</span></span><br><span class="line"><span class="actionscript">            boundaryGap: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">            data: [<span class="string">'周一'</span>, <span class="string">'周二'</span>, <span class="string">'周三'</span>, <span class="string">'周四'</span>, <span class="string">'周五'</span>, <span class="string">'周六'</span>, <span class="string">'周日'</span>]</span></span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: &#123;</span><br><span class="line"><span class="actionscript">            type: <span class="string">'value'</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'邮件营销'</span>,</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'line'</span>,</span></span><br><span class="line"><span class="actionscript">                stack: <span class="string">'总量'</span>,</span></span><br><span class="line"><span class="actionscript">                smooth:<span class="literal">true</span>,</span></span><br><span class="line">                symbolSize:14,</span><br><span class="line"></span><br><span class="line">                data: [ 132,</span><br><span class="line">                    &#123;value:120,</span><br><span class="line"><span class="actionscript">                    symbol:<span class="string">"image://img/light.jpg"</span>,</span></span><br><span class="line">                    symbolSize:25&#125;,</span><br><span class="line">                    101, 134, 90, 230, 210],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'联盟广告'</span>,</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'line'</span>,</span></span><br><span class="line"><span class="actionscript">                stack: <span class="string">'总量'</span>,</span></span><br><span class="line"><span class="actionscript">                smooth:<span class="literal">true</span>,</span></span><br><span class="line">                data: [220, 182, 191, 234, 290, 330, 310],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'视频广告'</span>,</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'line'</span>,</span></span><br><span class="line"><span class="actionscript">                stack: <span class="string">'总量'</span>,</span></span><br><span class="line"><span class="actionscript">                smooth:<span class="literal">true</span>,</span></span><br><span class="line">                data: [150, 232, 201, 154, 190, 330, 410],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'直接访问'</span>,</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'line'</span>,</span></span><br><span class="line"><span class="actionscript">                stack: <span class="string">'总量'</span>,</span></span><br><span class="line"><span class="actionscript">                smooth:<span class="literal">true</span>,</span></span><br><span class="line">                data: [320, 332, 301, 334, 390, 330, 320],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">                name: <span class="string">'搜索引擎'</span>,</span></span><br><span class="line"><span class="actionscript">                type: <span class="string">'line'</span>,</span></span><br><span class="line"><span class="actionscript">                stack: <span class="string">'总量'</span>,</span></span><br><span class="line"><span class="actionscript">                smooth:<span class="literal">true</span>,</span></span><br><span class="line">                data: [820, 932, 901, 934, 1290, 1330, 1320],</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    myChart.setOption(myOption);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>效果图</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgecharts.png" alt="image-20200202124208755" style="zoom:67%"><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POI</title>
      <link href="/posts/undefined.html"/>
      <url>/posts/undefined.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Apache-POI"><a href="#Apache-POI" class="headerlink" title="Apache POI"></a>Apache POI</h1><blockquote><p>Apache POI是用Java编写的免费开源的跨平台的Java API，Apache POI提供API给Java程 序对Microsoft Office格式档案读和写的功能，其中使用最多的就是使用POI操作Excel文 件。<br>jxl：专门操作Exce</p></blockquote><h2 id="POI结构"><a href="#POI结构" class="headerlink" title="POI结构"></a>POI结构</h2><blockquote><p>HSSF － 提供读写Microsoft Excel XLS格式档案的功能</p><p><code>XSSF － 提供读写Microsoft Excel OOXML XLSX格式档案的功能</code></p><p>HWPF － 提供读写Microsoft Word DOC格式档案的功能</p><p>HSLF － 提供读写Microsoft PowerPoint格式档案的功能</p><p>HDGF － 提供读Microsoft Visio格式档案的功能</p><p>HPBF － 提供读Microsoft Publisher格式档案的功能<br>HSMF － 提供读Microsoft Outlook格式档案的功能</p></blockquote><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><h3 id="从Excel文件读取数据"><a href="#从Excel文件读取数据" class="headerlink" title="从Excel文件读取数据"></a>从Excel文件读取数据</h3><blockquote><p>POI操作Excel表格封装了几个核心对象：</p><p>XSSFWorkbook：工作簿</p><p>XSSFSheet：工作表</p><p>Row：行<br>Cell：单元格</p></blockquote><p><code>Demo</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">poiTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//使用poi读取Excel文件中的数据</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//加载指定文件,创建一个Excel文件中的数据</span></span><br><span class="line">        XSSFWorkbook excel = <span class="keyword">new</span> XSSFWorkbook(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"D:\\poi.xlsx"</span>)));</span><br><span class="line">        <span class="comment">//读取Excel文件中第一个sheet标签页</span></span><br><span class="line">        XSSFSheet sheet = excel.getSheetAt(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//遍历sheet标签页,获得每一行数据</span></span><br><span class="line">        <span class="keyword">for</span> (Row row : sheet) &#123;</span><br><span class="line">            <span class="comment">//遍历行,获得每个单元格对象</span></span><br><span class="line">            <span class="keyword">for</span> (Cell cell : row) &#123;</span><br><span class="line">                System.out.println(cell.getStringCellValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        excel.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>Result</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgpoi.png" alt="image-20200201202106535" style="zoom:80%"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgpoi2.png" alt="image-20200201202230911" style="zoom:80%"><p><code>Demo2获取Excel表中数据的另外一种方式</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//加载指定文件,创建一个Excel文件中的数据</span></span><br><span class="line">    XSSFWorkbook excel = <span class="keyword">new</span> XSSFWorkbook(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"D:\\poi.xlsx"</span>)));</span><br><span class="line">    <span class="comment">//读取Excel文件中第一个sheet标签页</span></span><br><span class="line">    XSSFSheet sheet = excel.getSheetAt(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//获得当前工作表中最后一个行号,需要注意,行号从0开始</span></span><br><span class="line">    <span class="keyword">int</span> lastRowNum = sheet.getLastRowNum();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= lastRowNum; i++) &#123;</span><br><span class="line">        <span class="comment">//根据行号获取每一行</span></span><br><span class="line">        XSSFRow row = sheet.getRow(i);</span><br><span class="line">        <span class="comment">//获得当前行最后一个单元格索引</span></span><br><span class="line">        <span class="keyword">short</span> lastCellNum = row.getLastCellNum();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; lastCellNum; j++) &#123;</span><br><span class="line">            <span class="comment">//根据单元格索引获得单元格对象</span></span><br><span class="line">            XSSFCell cell = row.getCell(j);</span><br><span class="line">            System.out.println(cell.getStringCellValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="向Excel文件写入数据"><a href="#向Excel文件写入数据" class="headerlink" title="向Excel文件写入数据"></a>向Excel文件写入数据</h3><p><code>Demo</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用poi向Excel文件中写入数据,并且通过输出流将创建的Excel文件保存到本地磁盘</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//在内存中创建爱你一个Excel文件</span></span><br><span class="line">    XSSFWorkbook excel = <span class="keyword">new</span> XSSFWorkbook();</span><br><span class="line">    <span class="comment">//创作一个工作表对象</span></span><br><span class="line">    XSSFSheet sheet = excel.createSheet(<span class="string">"demo"</span>);</span><br><span class="line">    <span class="comment">//在工作表中创建行对象</span></span><br><span class="line">    XSSFRow titleRow = sheet.createRow(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//在行中创建单元格对象</span></span><br><span class="line">    titleRow.createCell(<span class="number">0</span>).setCellValue(<span class="string">"姓名"</span>);</span><br><span class="line">    titleRow.createCell(<span class="number">1</span>).setCellValue(<span class="string">"地址"</span>);</span><br><span class="line">    titleRow.createCell(<span class="number">2</span>).setCellValue(<span class="string">"年龄"</span>);</span><br><span class="line"></span><br><span class="line">    XSSFRow dataRow = sheet.createRow(<span class="number">1</span>);</span><br><span class="line">    dataRow.createCell(<span class="number">0</span>).setCellValue(<span class="string">"张三"</span>);</span><br><span class="line">    dataRow.createCell(<span class="number">1</span>).setCellValue(<span class="string">"安徽"</span>);</span><br><span class="line">    dataRow.createCell(<span class="number">2</span>).setCellValue(<span class="string">"18"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个输出流,通过输出流将内存中的Excel文件写到磁盘</span></span><br><span class="line">    FileOutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"D:\\demo.xlsx"</span>));</span><br><span class="line">    excel.write(out);</span><br><span class="line">    out.flush();</span><br><span class="line">    excel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>Result</code></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgpoi5.png" alt="image-20200201211217204" style="zoom:80%"><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Java_API </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis</title>
      <link href="/posts/2066075671.html"/>
      <url>/posts/2066075671.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h2><h3 id="Java连接Jedis"><a href="#Java连接Jedis" class="headerlink" title="Java连接Jedis"></a>Java连接Jedis</h3><ul><li><p>Jedis工具类</p><p><a href="/post_files/file/JedisUtils.java">☍JedisUtils.java</a></p></li><li><p>导入Jar包</p></li><li><p>连接池连接</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> testJedisPool（）&#123;</span><br><span class="line">    <span class="comment">//1获得连接池配置对象，设置配置项</span></span><br><span class="line">    JedisPoolConfig config =<span class="keyword">new</span> JedisPoolConfig（）；</span><br><span class="line">    <span class="comment">//1.1最大连接数</span></span><br><span class="line">    config.setMaxTotal（<span class="number">30</span>）；</span><br><span class="line">    <span class="comment">//1.2最大空闲连接数</span></span><br><span class="line">    config.setMaxIdle（<span class="number">10</span>）；</span><br><span class="line">    <span class="comment">//2获得连接池</span></span><br><span class="line">    JedisPool jedispool=<span class="keyword">new</span> JedisPool（config，<span class="string">"192.168.137.128"</span>，<span class="number">6379</span>）；</span><br><span class="line">    <span class="comment">//3获得核心对象</span></span><br><span class="line">    Jedis jedis=<span class="keyword">null</span>；</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    jedis=jedispool.getResource（）；</span><br><span class="line">    <span class="comment">//4设置数据</span></span><br><span class="line">    jedis.set（<span class="string">"name"</span>，<span class="string">"itcast"</span>）；</span><br><span class="line">    <span class="comment">//5获得数据</span></span><br><span class="line">    String name=jedis.get（<span class="string">"name"</span>）；System.out.println（name）；</span><br><span class="line">    &#125;<span class="keyword">catch</span>（Exception e）&#123;</span><br><span class="line">      e.printStackTrace（）；</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>（jedis l=<span class="keyword">null</span>）&#123;</span><br><span class="line">           jedis.close（）；</span><br><span class="line">               <span class="comment">//虚拟机关闭时，释放poo1资源</span></span><br><span class="line">               <span class="keyword">if</span>（jedisPool l=<span class="keyword">null</span>）&#123;</span><br><span class="line">               jedisPool.close（）；</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div></li></ul><hr><h2 id="Redis的数据结构"><a href="#Redis的数据结构" class="headerlink" title="Redis的数据结构"></a>Redis的数据结构</h2><h3 id="存储set"><a href="#存储set" class="headerlink" title="存储set"></a>存储<code>set</code></h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><blockquote><p>在Redis中，我们可以将==Set类型看作为没有排序的字符集合==，和List类型一样，我们也可以在该类型的数据值上执行添加、删除或判断某一元素是否存在等操作。需要说明的是，这些操作的时间复杂度为0（1），即常量时间内完成次操作。Set可包含的最大元素数量是4294967295。和List类型不同的是，==Set集合中不允许出现重复的元素==，这一点和C++标准库中的set容器是完全相同的。换句话说，如果多次添加相同元素，Set中将仅保留该元素的一份拷贝。和List类型相比，Set类型在功能上还存在着一个非常重要的特性，==即在服务器端完成多个Sets之间的聚合计算操作，如unions、intersections和differences==。由于这些操作均在服务端完成，因此效率极高，而且也节省了大量的网络10开销。</p></blockquote><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><ul><li><p>添加/删除元素</p><p>向set中添加数据，如果该key的值已有则不会重复添加</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sadd</span> key values [value1、value2..]</span><br></pre></td></tr></table></figure></div><p>删除set中指定的成员</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">srem</span> key members [member1、 member2..]:</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>获取集合中的元素</p><p>获取set中所有的成员</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">smembers</span> key</span><br></pre></td></tr></table></figure></div><p>判断参数中指定的成员是否在该set中，1表示存在，0表示不存在或者该key本身就不存在。（无论集合中有多少元素都可以极速的返回结果）</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sismember</span> key member</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>集合的差集运算A-B</p><p>返回key1与key2中相差的成员，而且与key的顺序有关,即返回差集。</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200207141447.png" alt="image-20200207141432461" style="zoom:80%"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sdiff</span> key1 key2</span><br></pre></td></tr></table></figure></div></li></ul><ul><li>集合的交集运算A∩B</li><li>集合的并集运算A∪B</li></ul><h4 id="扩展命令"><a href="#扩展命令" class="headerlink" title="扩展命令"></a>扩展命令</h4><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><blockquote><p>1、可以使用Redis的Set数据类型跟踪一些==唯一性数据==，比如访问某一博客的唯一IP地址信息。对于此场景，我们仅需在每次访问该博客时将访问者的IP存入Redis中，Set数据类型会自动保证IP地址的唯一性。<br>2、充分利用Set类型的服务端聚合操作方便、高效的特性，可以用于维护数据对象之间的关联关系。比如所有购买某一电子设备的客户ID被存储在一个指定的Set中，而购买另外一种电子产品的客户I0被存储在另外一个Set中，如果此时我们想获取有哪些客户同时购买了这两种商品时，Set的intersections命令就可以充分发挥它的方便和效率的优势了。</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FileUpload</title>
      <link href="/posts/2146942034.html"/>
      <url>/posts/2146942034.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><blockquote><p>文件上传的两种方式,基于张兴国老师springmvc框架知识整理</p><p>将表单上传方式由文字方式改为二进制方式</p></blockquote><blockquote><p>form上传表单的要求:</p><ol><li><p>method:提交方式必须是post</p></li><li><p>enctype=”multipart/form-data”</p></li><li><p>导入上传第三方组件:common-fileuploads(common-io依赖导入)</p></li><li><p>配置文件解析器:解析上传表单中的文件域,生成一个MultipartFile对象</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgfileupload.png" alt="image-20200129161401351"></li></ol><p>id必须是multipartResolver</p></blockquote><h2 id="本地服务器上传"><a href="#本地服务器上传" class="headerlink" title="本地服务器上传"></a>本地服务器上传</h2><blockquote><ol><li><p>指定存储的位置</p></li><li><p>拼接上传的路径</p><p><font color="red" face="Tw cen MT">bug</font></p><p>拼接图片的绝对路径时按照国哥的写法我上传的图片在webapp目录下,而不是在期望的pic目录下</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgupload.png" alt="image-20200129221931219"><p><font color="green" face="Tw cen MT">Sollution</font></p><p>将</p><p>fileName = realPath + “\&quot; + fileName;即可上传到pic目录下</p></li><li><p>实现上传</p></li></ol></blockquote><p>controller</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"uploads"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">uploadController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设定允许上传的文件类型</span></span><br><span class="line">    <span class="keyword">private</span> String[] allowType = &#123;<span class="string">"image/jpeg"</span>, <span class="string">"image/jpg"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"test1"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="comment">/*本地服务器上传*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">(MultipartFile img, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!Arrays.asList(allowType).contains(img.getContentType())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"上传文件类型不匹配"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1.指定存储的位置</span></span><br><span class="line">        String realPath = request.getRealPath(<span class="string">"/pic/"</span>);</span><br><span class="line">        File file = <span class="keyword">new</span> File(realPath);</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(file);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.拼接上传的路径</span></span><br><span class="line">        String filename = img.getOriginalFilename();</span><br><span class="line">        filename = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>) + <span class="string">"_"</span> + filename;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.实现上传</span></span><br><span class="line">        img.transferTo(<span class="keyword">new</span> File(realPath + <span class="string">"\\"</span> + filename));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="跨服务器上传"><a href="#跨服务器上传" class="headerlink" title="跨服务器上传"></a>跨服务器上传</h2><blockquote><p>案例:</p><p>html 提交表单，图片和文字一起提交，图片存入服务器，图片地址和表单信息存入数据库</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文件上传 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>productShow</title>
      <link href="/posts/1064844250.html"/>
      <url>/posts/1064844250.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="商品列表的CRUD案例"><a href="#商品列表的CRUD案例" class="headerlink" title="商品列表的CRUD案例"></a>商品列表的CRUD案例</h1><blockquote><p>要求:</p><ol><li><p>在查询列表中，当点击修改链接后，进入修改页面如上面的图示。</p></li><li><p>修改页面中要在文本框中显示原有的商品信息。</p></li><li><p>当点击修改时，能够实现商品图片的文件上传。（如果原来有商品图片要先删除原来的图片，同时将新的图片保存好，如果原来没有商品图片就直接上传商品图片。）</p></li><li><p>要能够实现商品信息的更新。</p></li><li><p>更新后需要重新显示商品列表信息。</p></li></ol></blockquote><p>环境搭建</p><blockquote><p>不基于dubbo的分布式分模块开发</p></blockquote><p><a href="/post_files/file/productShow_pom.xml">☍pom.xml</a></p><p>ssm_item_web</p><p><a href="/post_files/file/productShow_web_pom.xml">☍pom.xml</a></p><p><a href="/post_files/file/productShow_spring-mvc.xml">☍spring-mvc.xml</a></p><p><a href="/post_files/file/productShow_web_web.xml">☍web.xml</a></p><p>ssm_item_provider</p><p><a href="/post_files/file/productShow_provider_pom.xml">☍pom.xml</a></p><p><a href="/post_files/file/productShow_provider_application-service.xml">☍application-service.xml</a></p><p><a href="/post_files/file/itcast_service_provider_log4j.properties">☍log4j.properties.xml</a></p><p>ssm_item_mapper</p><p><a href="/post_files/file/productShow_mapper_pom.xml">☍pom.xml</a></p><p><a href="/post_files/file/productShow_mapper_application-mapper.xml">☍application-mapper.xml</a></p><p><a href="/post_files/file/productShow_mapper_druid.properties">☍druid.properties</a></p><p>ssm_item_domain</p><p><a href="/post_files/file/productShow_domain_Items.java">☍Items.java</a></p><hr><p>功能实现</p><blockquote><p>要求:</p><ol><li>在查询列表中，当点击修改链接后，进入修改页面如上面的图示。</li></ol><ol start="2"><li><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgproductShow.jpg" alt="image-20200127161042316" style="zoom:80%"><p>查询所有商品信息</p><p><font color="red" face="Tw cen MT">bug:</font></p><blockquote><ol><li><p>org.springframework.beans.factory.UnsatisfiedDependencyException:</p><p>Error creating bean with name ‘itemController’: Unsatisfied dependency expressed through field ‘itemService’; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type ‘com.itheima.service.ItemService’ available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p><p><font color="green" face="Tw cen MT">Sollution:</font></p><p>application-service.xml中包扫描配置错误,未扫描到com.itheima.service.impl中ItemServiceImpl中的<code>@Service</code></p></li></ol></blockquote></li><li><p>修改页面中要在文本框中显示原有的商品信息。</p></li><li><p>当点击修改时，能够实现商品图片的文件上传。（如果原来有商品图片要先删除原来的图片，同时将新的图片保存好，如果原来没有商品图片就直接上传商品图片。）</p><p><font color="red" face="Tw cen MT">bug:</font></p><blockquote><ol><li><p>java.lang.NoSuchMethodError: com.itheima.service.ItemService.updateItem(Lcom/itheima/domian/Items;)V</p><p><font color="green" face="Tw cen MT">Sollution:</font></p><p>需要重新clean==&gt;install</p></li><li><p>org.springframework.web.HttpMediaTypeNotSupportedException: Content type ‘multipart/form-data;boundary=—-WebKitFormBoundary5UBkSqxL9KFECBKs’ not supported</p><p><font color="green" face="Tw cen MT">Sollution:</font></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgdog.gif" alt="image-20200127161042316" style="zoom:33%"><p>文件上传彻底忘记啦…</p></li><li><p>org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.itheima.mapper.ItemMapper.updateItem</p><p><a href="https://www.cnblogs.com/tv151579/p/11565509.html" target="_blank" rel="noopener">☍Invalid bound statement终极解决办法</a></p></li><li><p>The request sent by the client was syntactically incorrect.</p><p>客户端发送的请求在语法上不正确。</p><p><font face="Tw cen MT" color="green">Sollution:</font></p><p><a href="https://www.cnblogs.com/xiandedanteng/p/4168609.html" target="_blank" rel="noopener">☍html/jsp页面的控件名称和controller里函数的参数不符</a></p><p>删除Items item,使用request.getParameter(“”)获取表单数据</p></li><li><p>The server refused this request because the request entity is in a format not supported by the requested resource for the requested method.</p><p>服务器拒绝了这个请求，因为请求实体的格式不被请求的资源所支持。</p><p><font face="Tw cen MT" color="green">Sollution:</font></p></li></ol></blockquote><p>要能够实现商品信息的更新。</p></li><li><p>更新后需要重新显示商品列表信息。</p></li></ol></blockquote><p>web</p><ul><li>editItems.jsp</li></ul><p>controller</p><ul><li><p>ItemController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/items"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemController</span> </span>&#123;</span><br><span class="line"> <span class="comment">//设定允许上传的文件类型</span></span><br><span class="line">    <span class="keyword">private</span> String[] allowType = &#123;<span class="string">"image/jpeg"</span>, <span class="string">"image/jpg"</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ItemService itemService;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/updateItems"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateItem</span><span class="params">(Items item, MultipartFile pictureFile, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!Arrays.asList(allowType).contains(pic.getContentType())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"上传文件类型不匹配"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1.指定存储的位置</span></span><br><span class="line">        String realPath = request.getRealPath(<span class="string">"/pic/"</span>);</span><br><span class="line">        File file = <span class="keyword">new</span> File(realPath);</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.拼接上传的路径</span></span><br><span class="line">        String fileName = pictureFile.getOriginalFilename();</span><br><span class="line">        fileName = UUID.randomUUID().toString().replaceAll(<span class="string">"-"</span>, <span class="string">""</span>) + <span class="string">"_"</span> + fileName;</span><br><span class="line">        fileName = realPath + <span class="string">"\\"</span> + fileName;</span><br><span class="line">        System.out.println(fileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.上传</span></span><br><span class="line">        pictureFile.transferTo(<span class="keyword">new</span> File(fileName));</span><br><span class="line">        itemService.updateItem(item);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/items/queryItems.do"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 商品CRUD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis_关联查询</title>
      <link href="/posts/1387498655.html"/>
      <url>/posts/1387498655.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><blockquote><p>在做传智健康项目的时候,检查组的编辑需要回显其所包括的检查项的信息,这就需要多表查询,而我忘了,本笔记基于张兴国讲师在讲解mybatis框架知识的多表查询课程整理</p></blockquote><blockquote><p>ORM思想:对象关系映射</p></blockquote><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul><li><p>表</p><p>user(用户表)</p><p>orders(订单表)</p><p>item(商品表)</p><p>orderdetil(中间表)</p><p>三表之间的对应关系</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgbiao.png" alt="image-20200127161042316" style="zoom:80%"></li><li><p>三表对应的实体类</p><p><a href="/post_files/file/mybatis_User.java">☍User.java</a></p><p><a href="/post_files/file/mybatis_Orders.java">☍Orders.java</a></p><p><a href="/post_files/file/mybatis_Items.java">☍Items.java</a></p></li><li><p>mybatis相关配置</p><p><a href="/post_files/file/mybatis_sqlConfig.xml">☍sqlConfig.xml</a></p><p><a href="/post_files/file/mybatis_sql.properties">☍sql.properties</a></p></li><li><p>目录结构</p><blockquote><p>Mapper代理开发模式所要遵循的规范：</p><ol><li>接口所在的包结构与对应映射配置文件所处的目录结构一致</li><li>接口名称与对应映射配置文件的名称一</li><li>映射配置文件中的namespace的值是对应接口的全限定类名</li><li>接口中方法的名称与对应映射配置文件中statement对象的ID一致</li><li>接口中方法的返回值类型与对应映射配置文件中resultType类型一致</li><li>接口中方法的参数类型与对应映射配置文件中parameterType类型一致</li></ol></blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmulu.png" alt="image-20200127164352803" style="zoom:80%"><p>​</p></li></ul><h2 id="查询所有用户信息"><a href="#查询所有用户信息" class="headerlink" title="查询所有用户信息"></a>查询所有用户信息</h2><p>Demo.java</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> UserMapper mapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            is = Resources.getResourceAsStream(<span class="string">"sqlConfig.xml"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        SqlSessionFactory factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        mapper = session.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        session.commit();</span><br><span class="line">        session.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = mapper.findAllUsers();</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsers"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">         select * from user</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>UserMapper.java</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAllUsers</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>运行结果</p><blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmb1.png" alt="image-20200127173835395" style="zoom:80%"></blockquote><p><font color="red" face="TW cen MT">特殊情况</font></p><p>1.</p><blockquote><p>当封装对象的属性与查询列名不一致时,不能使用resultType实现自动映射关系,需要我们手动指定其一一映射关系</p><p>使用resultMap</p><p>此处将username改为name,sex改为gender</p><p>此user实体类中name,gender属性与数据库中列名username,sex不一致,再使用resultType话,属性</p><p>注入失败</p><p>User{id=10, name=’null’, birthday=2014-07-10, gender=’null’, address=’北京市’, ordersList=null}</p></blockquote><p><a href="/post_files/file/mybatis_User2.java">☍User.java</a></p><p>修改UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"user_mapper"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"gender"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsers"</span> <span class="attr">resultMap</span>=<span class="string">"user_mapper"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>注入成功:</p><p>User{id=10, name=’张三’, birthday=2014-07-10, gender=’女’, address=’北京市’, ordersList=null}</p></blockquote><blockquote><p>标签:</p><ul><li><p>id:对主键封装</p></li><li><p>result:普通列的封装</p></li></ul><p>属性</p><ul><li>column:查询的列名</li><li>property:封装对象中的属性</li></ul></blockquote><p>2.</p><blockquote><p>多表查询</p></blockquote><h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><blockquote><p>法1.<del>根据查询的结果封装对应的实体类</del></p><p>法2.配置</p><ol><li>对象之间先建立关系</li><li>映射配置文件中配置其映射关系</li></ol></blockquote><ul><li><h3 id="一对一多表查询"><a href="#一对一多表查询" class="headerlink" title="一对一多表查询"></a>一对一多表查询</h3><blockquote><p>缺点:sql语句较为复杂</p></blockquote><blockquote><p>需求:</p><p>查询所有订单信息,及其所属用户信息(对一关系)</p><p>期望结果:</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmb2.png" alt="image-20200127195323928"></blockquote><p>OrdersMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.OrdersMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--一对一多表查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"order_user_mapper"</span> <span class="attr">type</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">property</span>=<span class="string">"user_id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"number"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"createTime"</span> <span class="attr">property</span>=<span class="string">"createTime"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"note"</span> <span class="attr">property</span>=<span class="string">"note"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">javaType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllOrders"</span> <span class="attr">resultMap</span>=<span class="string">"order_user_mapper"</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            o.*,</span><br><span class="line">            u.username,u.address</span><br><span class="line">        FROM</span><br><span class="line">            orders o</span><br><span class="line">        LEFT JOIN</span><br><span class="line">            USER u</span><br><span class="line">        ON</span><br><span class="line">            o.user_id= u.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>运行结果</p><blockquote><p>[</p><p>Orders{id=3, user_id=1, number=’1000010’, createTime=2015-02-04, note=’null’, user=User{id=0, username=’王五’, birthday=null, sex=’null’, address=’null’, ordersList=null}, itemsList=null},</p><p>Orders{id=4, user_id=1, number=’1000011’, createTime=2015-02-03, note=’null’, user=User{id=0, username=’王五’, birthday=null, sex=’null’, address=’null’, ordersList=null}, itemsList=null},</p><p>Orders{id=5, user_id=10, number=’1000012’, createTime=2015-02-12, note=’null’, user=User{id=0, username=’张三’, birthday=null, sex=’null’, address=’北京市’, ordersList=null}, itemsList=null}</p><p>]</p></blockquote><p>​</p></li></ul><ul><li><h3 id="一对多多表查询"><a href="#一对多多表查询" class="headerlink" title="一对多多表查询"></a>一对多多表查询</h3><blockquote><p>需求:</p><p>查询所有用户信息,及其所下的订单信息</p><p>期望结果:</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmb3.png" alt="image-20200127201319582" style="zoom:80%"></blockquote></li></ul><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"user_orders_mapper"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--property:封装对象中集合属性</span></span><br><span class="line"><span class="comment">            ofType:集合属性的泛型</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"ordersList"</span> <span class="attr">ofType</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"number"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsersAndOrders"</span> <span class="attr">resultMap</span>=<span class="string">"user_orders_mapper"</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            u.*,</span><br><span class="line">            o.number</span><br><span class="line">        FROM</span><br><span class="line">            USER u</span><br><span class="line">        LEFT JOIN</span><br><span class="line">            orders o</span><br><span class="line">        ON</span><br><span class="line">            o.user_id = u.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>运行结果</p><blockquote><p>[</p><p>User{id=1, username=’王五’, birthday=null, sex=’男’, address=’null’, ordersList=[Orders{id=0, user_id=0, number=’1000010’, createTime=null, note=’null’, user=null, itemsList=null}, Orders{id=0, user_id=0, number=’1000011’, createTime=null, note=’null’, user=null, itemsList=null}]},</p><p>User{id=10, username=’张三’, birthday=2014-07-10, sex=’女’, address=’北京市’, ordersList=[Orders{id=0, user_id=0, number=’1000012’, createTime=null, note=’null’, user=null, itemsList=null}]},</p><p>User{id=16, username=’张小明’, birthday=null, sex=’女’, address=’河南郑州’, ordersList=[]}, User{id=22, username=’陈小明’, birthday=null, sex=’男’, address=’河南郑州’, ordersList=[]},</p><p>User{id=24, username=’张三丰’, birthday=null, sex=’男’, address=’河南郑州’, ordersList=[]}, User{id=25, username=’陈小明’, birthday=null, sex=’女’, address=’河南郑州’, ordersList=[]},</p><p>User{id=26, username=’王五’, birthday=null, sex=’null’, address=’null’, ordersList=[]}</p><p>]</p></blockquote><ul><li><h3 id="多对多多表查询"><a href="#多对多多表查询" class="headerlink" title="多对多多表查询"></a>多对多多表查询</h3><blockquote><p>需求:</p><p>查询所有用户信息,及其所购买的商品信息</p><p>期望结果</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmb4.png" alt="image-20200127201319582" style="zoom:80%"></blockquote><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"user_items_mapper"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"ordersList"</span> <span class="attr">ofType</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"number"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"itemsList"</span> <span class="attr">ofType</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">property</span>=<span class="string">"price"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUsersAndItems"</span> <span class="attr">resultMap</span>=<span class="string">"user_items_mapper"</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            u.*,</span><br><span class="line">            o.number,</span><br><span class="line">            i.`name`,i.`price`</span><br><span class="line">        FROM</span><br><span class="line">            USER u</span><br><span class="line">        LEFT JOIN</span><br><span class="line">            orders o</span><br><span class="line">        ON</span><br><span class="line">            u.`id` = o.`user_id`</span><br><span class="line">        LEFT JOIN</span><br><span class="line">            orderdetail od</span><br><span class="line">        ON</span><br><span class="line">            od.`orders_id` = o.`id`</span><br><span class="line">        LEFT JOIN</span><br><span class="line">            items i</span><br><span class="line">        ON</span><br><span class="line">            od.`items_id`=i.`id`</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>运行结果:</p><blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgmb5.png" alt="image-20200127220628022" style="zoom:80%"><p>[</p><p>User{id=1, username=’王五’, birthday=null, sex=’男’, address=’null’, ordersList=[Orders{id=0, user_id=0, number=’1000010’, createTime=null, note=’null’, user=null, itemsList=[Items{id=null, name=’台式机’, price=3000.0, detail=’null’, pic=’null’, createTime=null}, Items{id=null, name=’笔记本’, price=6000.0, detail=’null’, pic=’null’, createTime=null}]}, Orders{id=0, user_id=0, number=’1000011’, createTime=null, note=’null’, user=null, itemsList=[Items{id=null, name=’背包’, price=200.0, detail=’null’, pic=’null’, createTime=null}]}]},</p><p>User{id=10, username=’张三’, birthday=2014-07-10, sex=’女’, address=’北京市’, ordersList=[Orders{id=0, user_id=0, number=’1000012’, createTime=null, note=’null’, user=null, itemsList=[Items{id=null, name=’笔记本’, price=6000.0, detail=’null’, pic=’null’, createTime=null}]}]},</p><p>User{id=16, username=’张小明’, birthday=null, sex=’女’, address=’河南郑州’, ordersList=[]}, User{id=22, username=’陈小明’, birthday=null, sex=’男’, address=’河南郑州’, ordersList=[]},</p><p>User{id=24, username=’张三丰’, birthday=null, sex=’男’, address=’河南郑州’, ordersList=[]}, User{id=25, username=’陈小明’, birthday=null, sex=’女’, address=’河南郑州’, ordersList=[]},</p><p>User{id=26, username=’王五’, birthday=null, sex=’null’, address=’null’, ordersList=[]}</p><p>]</p></blockquote></li></ul><h2 id="关联查询"><a href="#关联查询" class="headerlink" title="关联查询"></a>关联查询</h2><ul><li><h3 id="一对一关联查询"><a href="#一对一关联查询" class="headerlink" title="一对一关联查询"></a>一对一关联查询</h3><blockquote><p>需求:</p><p>查询所有订单信息,及其所属用户信息(对一关系)</p></blockquote><p><code>xml方式</code></p><p>OrdersMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.OrdersMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--一对一关联查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"order_user_mapper"</span> <span class="attr">type</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">property</span>=<span class="string">"user_id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"number"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"createTime"</span> <span class="attr">property</span>=<span class="string">"createTime"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"note"</span> <span class="attr">property</span>=<span class="string">"note"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">javaType</span>=<span class="string">"user"</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">select</span>=<span class="string">"com.itheima.mapper.UserMapper.findUserByUser_id"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllOrders"</span> <span class="attr">resultMap</span>=<span class="string">"order_user_mapper"</span>&gt;</span></span><br><span class="line">        select * from orders</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>UserMapper.java</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;user_id&#125;"</span>)</span><br><span class="line">    <span class="function">User <span class="title">findUserByUser_id</span><span class="params">(Integer user_id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p><code>注解方式</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure></div><ul><li><h3 id="一对多关联查询"><a href="#一对多关联查询" class="headerlink" title="一对多关联查询"></a>一对多关联查询</h3><blockquote><p>需求:</p><p>查询所有用户信息,及其所下的订单信息</p></blockquote><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"user_orders_mapper"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"ordersList"</span> <span class="attr">ofType</span>=<span class="string">"orders"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">select</span>=<span class="string">"com.itheima.mapper.OrdersMapper.findOrdersById"</span> <span class="attr">fetchType</span>=<span class="string">"lazy"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUser"</span> <span class="attr">resultMap</span>=<span class="string">"user_orders_mapper"</span>&gt;</span></span><br><span class="line">      select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>fetchType=”lazy” 延迟加载</p></blockquote><p>OrdersMapper.java</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrdersMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from orders where user_id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">List&lt;Orders&gt; <span class="title">findOrdersById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure></div><p><code>注解方式</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure></div></li></ul><ul><li><h3 id="多对多关联查询"><a href="#多对多关联查询" class="headerlink" title="多对多关联查询"></a>多对多关联查询</h3><blockquote><p>需求:</p><p>查询所有用户信息,及其所购买的商品信息</p></blockquote><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"user_order_mapper"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"address"</span> <span class="attr">property</span>=<span class="string">"address"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"ordersList"</span> <span class="attr">ofType</span>=<span class="string">"orders"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">select</span>=<span class="string">"com.itheima.mapper.OrdersMapper.findOrderByUser_id"</span> <span class="attr">fetchType</span>=<span class="string">"lazy"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUserAndItems"</span> <span class="attr">resultMap</span>=<span class="string">"user_order_mapper"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>OrdersMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.OrdersMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"order_item_mapper"</span> <span class="attr">type</span>=<span class="string">"orders"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"itemsList"</span> <span class="attr">ofType</span>=<span class="string">"items"</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">select</span>=<span class="string">"com.itheima.mapper.ItemsMapper.findItemsByOrders_id"</span> <span class="attr">fetchType</span>=<span class="string">"lazy"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findOrderByUser_id"</span> <span class="attr">resultMap</span>=<span class="string">"order_item_mapper"</span>&gt;</span></span><br><span class="line">        select * from orders</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>ItemsMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.ItemsMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findItemsByOrders_id"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">        select * from items where id in (select items_id from orderdetail where orders_id = #&#123;id&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>注解方式</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure></div></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多表/关联查询 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mapper代理开发模式</title>
      <link href="/posts/1304579278.html"/>
      <url>/posts/1304579278.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="mapper代理开发模式"><a href="#mapper代理开发模式" class="headerlink" title="mapper代理开发模式"></a>mapper代理开发模式</h1><blockquote><p>采用 Mybatis 的代理开发方式实现 DAO 层的开发.</p><p>Mapper 接口开发方法只需要程序员编写Mapper 接口（相当于Dao 接口），由Mybatis 框架根据接口定义创建接口的动态代理对象.</p></blockquote><blockquote><p>笔记整理基于张兴国老师在ssm框架中对于mybatis的讲解</p></blockquote><p>Mapper代理开发模式所要遵循的规范：</p><blockquote><ol><li>接口所在的包结构与对应映射配置文件所处的目录结构一致</li><li>接口名称与对应映射配置文件的名称一致</li><li>映射配置文件中的namespace的值是对应接口的全限定类名</li><li>接口中方法的名称与对应映射配置文件中statement对象的ID一致</li><li>接口中方法的返回值类型与对应映射配置文件中resultType类型一致</li><li>接口中方法的参数类型与对应映射配置文件中parameterType类型一致</li></ol></blockquote><h2 id="动态sql语句"><a href="#动态sql语句" class="headerlink" title="动态sql语句"></a>动态sql语句</h2><blockquote><p>使用ssj_project(健康管理后台)练习动态sql语句</p></blockquote><h2 id="环境搭建遇到的一些bug"><a href="#环境搭建遇到的一些bug" class="headerlink" title="环境搭建遇到的一些bug"></a>环境搭建遇到的一些bug</h2><blockquote><ol><li><p>No qualifying bean of type ‘org.springframework.jdbc.core.JdbcTemplate’ available</p></li><li><p>java.lang.NoSuchMethodError:….Ljava/util/List;</p><p>InvocationTargetException</p><p><font color="green">解决措施</font></p><p>在方法中抛（ throws Exception），或者自己处理异常</p></li></ol><pre><code>&lt;img src=&quot;https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgjg.png&quot; alt=&quot;img&quot; style=&quot;zoom: 25%;&quot; /&gt; 把所有的文件都删除了,重新搭建了一遍又可以了,世事难料啊......</code></pre></blockquote><h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><blockquote><p>用于判断</p><ol><li><p>当parameterType是简单数据类型时，test判断使用value</p></li><li><p>当parameterType是POJO对象类型时，test判断使用对象中的属性</p></li><li><p>当parameterType是List类型时，test判断使用list</p></li><li><p>当parameterType是数据类型时，parameterType使用list来作为输入参数类型，test判断使用array</p><p>注意：多条件之间的逻辑关系使用and/or不能使用&amp;&amp;/||</p></li></ol></blockquote><blockquote><p>使用mapper代理开发,条件查询用户信息</p></blockquote><p>user-list.html</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;userList&#125;"</span> <span class="attr">var</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"ids"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"$&#123;user.id &#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.id &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.username &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.email &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.phoneNum &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.statusStr &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/findUserById/$&#123;user.id&#125;"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">class</span>=<span class="string">"btn bg-olive btn-xs"</span>&gt;</span>详情<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/findUserRoles/$&#123;user.id&#125;"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">class</span>=<span class="string">"btn bg-olive btn-xs"</span>&gt;</span>更改角色<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>使用el+jstl表达式获取request域中数据</p></blockquote><p>UserController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService; </span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findUsersByCondition"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findUsersByCondition</span><span class="params">(User user, Model model)</span> </span>&#123;         </span><br><span class="line">        List&lt;User&gt; userList = userService.findUsersByCondition(user);        </span><br><span class="line">        model.addAttribute(<span class="string">"userList"</span>, userList);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"user-list"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p><font color="red" face="Tw cen MT" size="3px">Tips</font></p><blockquote><p>model会把查询到的存到request域中,发给uer-list.jsp页面</p><p>在写Controller层的时候,因为是条件查询,所有从前台传过来的是一个pojo对象,我因为忘了接受这个参数,瞎整了几久…</p></blockquote><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUsersByCondition"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"username != null and username.length &gt; 0"</span>&gt;</span></span><br><span class="line">                username like '%' #&#123;username&#125; '%'</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><font color="red" face="Tw cen MT" size="3px">Tips</font></p><blockquote><p>条件查询sql语句在升级为模糊查询的时候,%要与字段名间隔一个空格,否则语句报错,也不知道还有没有其他解决措施</p><p>另外如果是多个条件判断,只需要多加几个if判断即可</p></blockquote><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><blockquote><p>用于循环遍历的标签,一般用于in条件</p><p><foreach collection="array" open close=")" separator="," item="id">#{id}</foreach></p><p>collection:需要遍历的集合或者数组</p><p>open:组装条件的开始部分</p><p>close:组装条件的结束部分</p><p>separator:条件间的分隔符</p><p>item:用于接收遍历集合或者数组的每一个元素的名称</p><p><a href="https://www.cnblogs.com/xuanwei-qingfeng/p/8435181.html" target="_blank" rel="noopener">☍MyBatis:SQL语句中的foreach标签的详细介绍</a></p></blockquote><p>需求:使用foreach标签,完成多个用户的删除</p><p>user-list.html</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">deleteUserByIds</span> <span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//获取复选框选中的id</span></span><br><span class="line">let cks = document.getElementsByName(<span class="string">"ids"</span>); </span><br><span class="line">let array = <span class="keyword">new</span> Array();</span><br><span class="line"><span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; cks.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(cks[i].checked)&#123;</span><br><span class="line">    array.push(cks[i].value);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> location.href=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/deleteUserByIds?ids="</span>+array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>jsp页面获取多个复选框的id,注意复选框checkbox的name是固定的,而value值是动态获取的</p><p>jq中快速向数组中添加元素:<code>array.push(cks[i].value)</code></p></blockquote><p>controller</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/deleteUserByIds"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUserByIds</span><span class="params">(String[] ids)</span> </span>&#123;        </span><br><span class="line">        userService.deleteUserByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/user/findAll"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>UserServiceImpl</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;   </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUserByIds</span><span class="params">(String[] ids)</span> </span>&#123;</span><br><span class="line">        userMapper.deleteUserByIds(ids);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUserByIds"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">        delete from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"id in ("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><h3 id="choose"><a href="#choose" class="headerlink" title="choose"></a>choose</h3><h3 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h3><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> Mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mapper代理开发 ssm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue.js_案例</title>
      <link href="/posts/1603937355.html"/>
      <url>/posts/1603937355.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>在做传智健康前后台数据交互的时候,对于基于Vue2.0的ElementUI很不熟练,特别是前台向后台传送Json数据格式的对象时,总是没完没了的报404错误,还有映射文件错误,一大堆我都没有听说过的错误,也尝试着在网上挨个搜,错误原因大概知道,但是解决的方案是没有一个灵验,万般无赖之下,只能重新复习一遍基于Vue.js的ajax请求与后台数据交互的案例,希望这个做完,可以对基于vue.js的前后台数据交互有更深层次的理解</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgjy.gif" alt="img" style="zoom:33%"></blockquote><blockquote><p>笔记基于张兴国老师在vue课程中讲授的健康管理系统的CRUD</p></blockquote><h2 id="基于Vue-js的健康管理后台"><a href="#基于Vue-js的健康管理后台" class="headerlink" title="基于Vue.js的健康管理后台"></a>基于Vue.js的健康管理后台</h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><blockquote><p>没有使用分模块开发</p></blockquote><p>pom.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>vue.js<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加相关坐标--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加mybatis相关坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加mysql坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加druid坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加spring坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加mybatis与spring整合坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加解析切点表达式坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加springmvc相关坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--log4j日志相关坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--添加json相关坐标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加相关插件--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--tomcat7--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">port</span>&gt;</span>8080<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">path</span>&gt;</span>/vueDemo<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--jdk1.8--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>druid.properties</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:/106.12.83.204/spring</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br></pre></td></tr></table></figure></div><p>log4j.properties</p><p>spring.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.itcast"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.外部资源配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:druid.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.pwd&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.mybatis交由spring--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"cn.itcast.domain"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"cn.itcast.mapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--5.事务管理器对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--6.开启事务注解的支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>springmvc.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/mvc </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.itcast.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.mvc注解驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>web.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--1.spring--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--2.springmvc--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--3.乱码过滤器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><p><font color="red" face="Tw cen MT" size="5px">bugs:</font></p><blockquote><ol><li>在地址栏输入: <a href="http://localhost:8080/user.html" target="_blank" rel="noopener">http://localhost:8080/user.html</a> ,界面样式丢失,这和我之前做的bookStore项目遇到的问题是一样的</li></ol><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgvue.js1.png" alt="img" style="zoom:80%"><p><font color="green" face="Tw cen MT">解决措施:</font></p><p>在user.html界面中,样式引入路径错误</p><p>记住运东大佬的两句话!!!</p><p>绝对路径加的地址在你虚拟路径后面,eg:<code>&lt;script src=&quot;/vueDemo/plugins/bootstrap/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</code></p><p>相对路径加的路径在你当前路径后面,eg:<code>&lt;script src=&quot;./plugins/bootstrap/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</code></p><p>嗯,还是有点难以理解…</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggs.jpg" alt="img" style="zoom:33%"></blockquote><p>需求:</p><blockquote><ol><li>用户点击查询所有用户,界面显示所有用户,并且分页展示</li></ol><p>​ <font color="red" face="Tw cen MT">问题描述:</font>:使用mybatis分页助手发现,不能实现分页条功能,因为是html页面,所以不知如何遍历</p><p>​ <font color="green" face="Tw cen MT">解决措施:</font></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgdog.gif" alt="img" style="zoom:33%"><p><a href="https://www.cnblogs.com/phoebeyue/p/10916661.html" target="_blank" rel="noopener">☍<u>vue 分页组件</u></a></p><ol start="2"><li><p>根据id查询,查询成功后展示模态窗口,修改用户信息并保存</p></li><li><p>删除用户</p><blockquote><p>在实现删除用户的功能过程中,需要对vue的数据双向绑定有一个清晰的认识,而对于:value v-model,我还缺乏更深入的认识,所以需要在Vue.js里面做一些案例以加深知识理解</p></blockquote></li></ol><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImggc.gif" alt="img" style="zoom:33%"><p>​ <a href="https://cn.vuejs.org/v2/guide/forms.html#%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-model" target="_blank" rel="noopener">☍官方表单输入绑定</a></p><p>​ 单个删除</p><p>​ 批量删除</p></blockquote><p>user.html</p><p>查询所有用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        userList: [],</span><br><span class="line">        user: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findAll() &#123;</span><br><span class="line">            axios.get(<span class="string">"/user/findAll.do"</span>).then((res) =&gt; &#123;               </span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,        </span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>分页查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        userList: [],</span><br><span class="line">        user: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findAll() &#123;</span><br><span class="line">            axios.get(<span class="string">"/user/findAll.do"</span>).then((res) =&gt; &#123;</span><br><span class="line">                alert(JSON.stringify(res));</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data.list;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>根据id查询,查询成功后展示模态窗口</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        userList: [],</span><br><span class="line">        user: &#123;&#125;,</span><br><span class="line">        ids:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findAll() &#123;</span><br><span class="line">            axios.get(<span class="string">"/user/findAll.do"</span>).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        findUserById(id) &#123;            </span><br><span class="line">            axios.get(<span class="string">"/user/findUserById.do"</span>, &#123;</span><br><span class="line">                params: &#123;</span><br><span class="line">                    id: id</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.user = res.data;</span><br><span class="line">                <span class="comment">// noinspection JSCheckFunctionSignatures</span></span><br><span class="line">                $(<span class="string">"#myModal"</span>).modal(<span class="string">"show"</span>);</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>修改用户信息并保存</p><blockquote><p>v-model 双向数据绑定的理解</p><p><a href="https://www.jianshu.com/p/08bf29fef61d" target="_blank" rel="noopener">☍v-model双向绑定原理</a></p></blockquote><p><font color="red" face="Tw cen MT" size="4px">bug:</font>:</p><blockquote><ol><li><p>[User{id=’599891490fc646269c89adbfeed75f26’, age=56, username=’�ܲ�’, password=’1234’, email=’89087786@qq.com’, sex=’��’}</p><p><font color="red" face="Tw cen MT">问题描述:</font>:</p><p>使用vue的axios的post形式数据提交方式,,尽管在web.xml配置文件中配置了过滤器,可是好像没有起到作用</p><p><font color="green" face="Tw cen MT">解决措施:</font></p></li></ol><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgdog.gif" alt="img" style="zoom:33%"><p>​ 偶然发现在做传智健康配置druid.properties文件时候在数据库后面添加了指定字符编码<code>characterEncoding=UTF-8</code></p><p>​</p><ol start="2"><li><p>return “redirect:/user/findAll.do”</p><p><font color="red" face="Tw cen MT">问题描述:</font>:</p><p>修改用户信息,在重定向到/user/findAll.do之后,页面没有加载更改之后的所有用户信息,页面没有报错</p><p><font color="green" face="Tw cen MT">解决措施:</font></p><p>重定向成功了,但是我的方法响应的数据,因为前段没有发送请求,所以页面没有接收到后端数据经过验证,/user/update.do发送的Ajax请求经过一次重定向返回的是重定向方法的JSON数据格式返回值,前段接受即可</p></li></ol></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        userList: [],</span><br><span class="line">        user: &#123;&#125;,</span><br><span class="line">        ids: []</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findAll() &#123;</span><br><span class="line">            axios.get(<span class="string">"/user/findAll.do"</span>).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        findUserById(id) &#123;           </span><br><span class="line">            axios.get(<span class="string">"/user/findUserById.do"</span>, &#123;</span><br><span class="line">                params: &#123;</span><br><span class="line">                    id: id</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.user = res.data;</span><br><span class="line">                <span class="comment">// noinspection JSCheckFunctionSignatures</span></span><br><span class="line">                $(<span class="string">"#myModal"</span>).modal(<span class="string">"show"</span>);</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        update() &#123;</span><br><span class="line">            axios.post(<span class="string">"/user/update.do"</span>, <span class="keyword">this</span>.user).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>删除用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        userList: [],</span><br><span class="line">        user: &#123;&#125;,</span><br><span class="line">        ids: []</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findAll() &#123;</span><br><span class="line">            axios.get(<span class="string">"/user/findAll.do"</span>).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,        </span><br><span class="line">        deleteUserByIds() &#123;</span><br><span class="line">            alert(<span class="keyword">this</span>.ids);</span><br><span class="line">            axios.get(<span class="string">"/user/deleteUserByIds.do?ids="</span> + <span class="keyword">this</span>.ids).then((res) =&gt; &#123;</span><br><span class="line">                <span class="keyword">this</span>.userList = res.data;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="keyword">this</span>.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><h4 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h4><p>查询所有用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageInfo&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userService.findAll();    </span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>分页查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageInfo&lt;User&gt; <span class="title">findAll</span><span class="params">(@RequestParam(value = <span class="string">"pageNum"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"1"</span>)</span> Integer pageNum,</span></span><br><span class="line"><span class="function">                                  @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"pageSize"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"2"</span>)</span> Integer pageSize</span></span><br><span class="line"><span class="function">    ) </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userService.findAll(pageNum, pageSize);</span><br><span class="line">        PageInfo&lt;User&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;&gt;(userList);</span><br><span class="line">        <span class="keyword">return</span> pageInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>根据id查询,查询成功后展示模态窗口</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        userService.update(user);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"修改失败"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"redirect:/user/findAll.do"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>删除用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userService.findAll();        </span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/deleteUserByIds"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUserByIds</span><span class="params">(String[] ids)</span> </span>&#123;</span><br><span class="line">        System.out.println(ids);</span><br><span class="line">        userService.deleteUserByIds(ids);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/user/findAll.do"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="service"><a href="#service" class="headerlink" title="service"></a>service</h4><p>查询所有用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;       </span><br><span class="line">        <span class="keyword">return</span> userMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>分页查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">(Integer pageNum,Integer pageSize)</span> </span>&#123;</span><br><span class="line">        PageHelper.startPage(pageNum,pageSize);</span><br><span class="line">        <span class="keyword">return</span> userMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>根据id查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findUserById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        userMapper.update(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h4><h4 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h4><p>查询所有用户/分页查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from users"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>根据id查询用户</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update users set username=#&#123;username&#125;,password=#&#123;password&#125;,sex=#&#123;sex&#125;,age=#&#123;age&#125;,email=#&#123;email&#125; where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><font color="red" face="Tw cen MT" size="4px">bug:</font>:</p><blockquote><ol><li><p><font color="red" face="Tw cen MT">问题描述:</font>:</p><p>删除多个用户需要多个id,如何在注解上写动态sql语句?</p><p><font color="green" face="Tw cen MT">解决措施:</font></p><p><a href="https://blog.csdn.net/weixin_41637378/article/details/79397254" target="_blank" rel="noopener">☍如何在注解式sql中写入动态的SQL语句</a></p><p>xml配置我应该是忘得差不多了,该去复习一下了…</p></li></ol><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgqqjl.gif" alt="img" style="zoom:33%"><p><a href="https://blog.csdn.net/FLOWER1573/article/details/79391905?utm_source=app" target="_blank" rel="noopener">☍实际开发中使用XML还是注解</a></p></blockquote><h4 id="mapper-xml"><a href="#mapper-xml" class="headerlink" title="mapper.xml"></a>mapper.xml</h4><p>删除用户</p><p>UserMapper.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUserByIds"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">        delete from users</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"id in ("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>最后附上在线测试链接</p></blockquote><p><font color="red" face="Tw cen MT" size="4px">bug:</font>:</p><blockquote><p><font color="red" face="Tw cen MT" size="2px">问题描述:</font></p><p>vue.js在idea上通过clean ==&gt;package打包生成war包,上传到云服务器上面的tomca/bin/webapp下,通过地址栏106.12.83.204:8080/vue.js无法访问</p></blockquote><p><font color="orange" face="Tw cen MT" size="2px">vue分页插件__</font></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chuanzhijiankang</title>
      <link href="/posts/336011516.html"/>
      <url>/posts/336011516.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><blockquote><p>传智健康项目B站版本</p><p>鉴于黑马培训班扣扣搜搜的样儿,一个几年的项目还收的跟宝儿一样,2万学费,项目视频都看不到,还要百度云下载,我百度云下载速度100来k,再导入,还鸡毛秘钥,你每年挣那么多,每年搞几个项目很难吗?一个传智健康还想着用个三五年?MMP</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgex.jpg" alt="img" style="zoom:25%"></blockquote><h1 id="chuanzhijiankang"><a href="#chuanzhijiankang" class="headerlink" title="chuanzhijiankang"></a>chuanzhijiankang</h1><p>##</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传智健康 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bookStore2</title>
      <link href="/posts/1461580057.html"/>
      <url>/posts/1461580057.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><blockquote><p>在bookStore项目中,采用了分布式dubbo服务部署,不知什么原因mybatis的分页插件不起作用,此次采用单纯分模块开发,不涉及dubbo服务</p><img src="/posts/JavaNotes/img/04F45944.png" alt="img" style="zoom:25%"></blockquote><h4 id="bookStore-service"><a href="#bookStore-service" class="headerlink" title="bookStore_service"></a>bookStore_service</h4><blockquote><p>接口与接口实现类</p></blockquote><p>service</p><ul><li><p>UserService</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">Integer <span class="title">findUserByNameAndId</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>BookService</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">findAll</span><span class="params">(Integer pageNum,Integer pageSize)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p>serviceImpl</p><ul><li><p>UserServiceImpl</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">findUserByNameAndId</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findUserByNamendId(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>BookServiceImpl</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">(Integer pageNum, Integer pageSize)</span> </span>&#123;</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">        <span class="keyword">return</span> bookMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><hr><h4 id="bookStore-web"><a href="#bookStore-web" class="headerlink" title="bookStore_web"></a>bookStore_web</h4><blockquote><p>controller与前台交互</p></blockquote><p><a href="/post_files/file/bookStore_spring-mvc.xml">☍spring-mvc</a></p><p><a href="/post_files/file/itcast_service_provider_log4j.properties">☍log4j.properties</a></p><p>controller</p><ul><li><p>BookController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">(@RequestParam(value = <span class="string">"pageNum"</span>,required = <span class="keyword">false</span>,defaultValue = <span class="string">"1"</span>)</span> Integer pageNum,</span></span><br><span class="line"><span class="function">                          @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"pageSize"</span>,required = <span class="keyword">false</span>,defaultValue = <span class="string">"4"</span>)</span> Integer pageSize,</span></span><br><span class="line"><span class="function">            Model model) </span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookList = bookService.findAll(pageNum,pageSize);</span><br><span class="line">        PageInfo&lt;Book&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;Book&gt;(bookList);</span><br><span class="line">        model.addAttribute(<span class="string">"pageInfo"</span>, pageInfo);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"book_list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>UserController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findUserByNameAndId"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findUserByNameAndId</span><span class="params">(User user, Model model, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        Integer count = userService.findUserByNameAndId(user);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">            model.addAttribute(<span class="string">"info"</span>, <span class="string">"账户不存在,请注册!"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        request.getSession().setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/book/findAll"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p>interceptor</p><ul><li><p>privilegeInterceptor</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      <span class="comment">/*释放静态资源*/</span></span><br><span class="line">      String requestURI = request.getRequestURI();</span><br><span class="line">      <span class="keyword">if</span> (requestURI.indexOf(<span class="string">"/css/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/img/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/js/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/bookImg/"</span>) != -<span class="number">1</span></span><br><span class="line">          || requestURI.indexOf(<span class="string">"/fonts/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/images/"</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/*拦截器,拦截是否是登录用户*/</span></span><br><span class="line">      User user = (User) request.getSession().getAttribute(<span class="string">"user"</span>);</span><br><span class="line">      <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">          response.sendRedirect(request.getContextPath() + <span class="string">"/pages/login.jsp"</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div><p><font color="red" face="Tw cen MT">bug</font></p><blockquote><p>使用springmvc的interceptor拦截器对访问资源进行拦截时,出现静态资源也被拦截,导致登录界面显示不全</p><p>springmvc.xml配置如下:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--拦截器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/user/findUserByNameAndId"</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.itcast.interceptor.privilegeInterceptor"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>privilegeInterceptor.java配置如下:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"> User user = (User)request.getSession().getAttribute(<span class="string">"user"</span>);    </span><br><span class="line"> <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">     response.sendRedirect(request.getContextPath()+<span class="string">"/pages/login.jsp"</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"> &#125;      </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>显示:</p><p>在用户首次登录,被拦截器拦截到,返回登录界面样式丢失</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgbookStore4.png"><p><font color="green" face="Tw cen MT">Sollution</font>:</p><p>今天微信上联系杨哥,杨哥给了我一张截图,说是可以解决这个问题,是国哥上课的时候提到的,不过当时我应该没有在意,现在视频找不到,源码也没有发现</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*释放静态资源*/</span></span><br><span class="line">String requestURI = request.getRequestURI();</span><br><span class="line"><span class="keyword">if</span> (requestURI.indexOf(<span class="string">"/css/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/img/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/js/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/bookImg/"</span>) != -<span class="number">1</span></span><br><span class="line"> || requestURI.indexOf(<span class="string">"/fonts/"</span>) != -<span class="number">1</span> || requestURI.indexOf(<span class="string">"/images/"</span>) != -<span class="number">1</span>) &#123;    </span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>我试了一下,没有起到作用.不知道是不是代码哪里敲错了,不过杨哥干嘛发图片,直接发代码不是更好吗?</p><p>2020/2/3 今天忽然想起不管登录是否成功,静态资源不都应该加载吗…</p><p>拦截器代码应该放在</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User user = (User) request.getSession().getAttribute(<span class="string">"user"</span>);</span><br></pre></td></tr></table></figure></div><p>之前</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImglogin.png" alt="image-20200204001201124" style="zoom:33%"></li></ul><hr><h4 id="bookStore-domain"><a href="#bookStore-domain" class="headerlink" title="bookStore_domain"></a>bookStore_domain</h4><p><a href="/post_files/file/bookStore_Book.java">☍Book</a></p><p><a href="/post_files/file/bookStore_User.java">☍User</a></p><p><a href="/post_files/file/bookStore_BookCategory.java">☍BookCategory</a></p><hr><h4 id="bookStore-mapper"><a href="#bookStore-mapper" class="headerlink" title="bookStore_mapper"></a>bookStore_mapper</h4><blockquote><p>持久层接口</p></blockquote><p><a href="/post_files/file/bookStore_application-mapper.xml">☍application-mapper.xml</a></p><p><a href="/post_files/file/bookStore_druid.properties">☍druid.properties</a></p><p><a href="/post_files/file/itcast_service_provider_log4j.properties">☍log4j.properties</a></p><p>mapper</p><ul><li><p>BookMapper</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from book"</span>)</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>UserMapper</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select count(*) from user where username=#&#123;username&#125; and password=#&#123;password&#125;"</span>)</span><br><span class="line">    <span class="function">Integer <span class="title">findUserByNamendId</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgjg.png" alt="img" style="zoom:25%"><p><font color="red" size="12px">喜大普奔</font></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgbp.gif" alt="img" style="zoom:40%"><p>在debug中发现了不论我用dubbo分布式服务还是不要pageHelper都不管用的问题所在!!</p><p><font color="green" size="5px">分页条件后紧跟查询语句,第二次分页条件失效</font></p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgbookStore3.png" alt="img"><p>浏览器输入:<code>106.12.83.204</code>测试</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网上书城 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bookStore</title>
      <link href="/posts/2049854560.html"/>
      <url>/posts/2049854560.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="黑马考试书籍旗舰店"><a href="#黑马考试书籍旗舰店" class="headerlink" title="黑马考试书籍旗舰店"></a>黑马考试书籍旗舰店</h1><blockquote><p>旗舰店的初步需求分析的结果如下</p><ol><li><p>完成登录</p></li><li><p>必须登录才能查询书籍</p></li><li><p>查询所有书籍，完成分页操作（提示：代码中存在分页工具类哦）</p></li></ol></blockquote><h2 id="关系模型设计"><a href="#关系模型设计" class="headerlink" title="关系模型设计"></a>关系模型设计</h2><ol><li><p>用户表</p><p><img src="/posts/JavaNotes/img/blogImguser.png" alt></p></li><li><p>书籍分类表</p><p><img src="/posts/JavaNotes/img/blogImgbookCategory.png" alt></p></li><li><p>书籍表</p><p><img src="/posts/JavaNotes/img/blogImgbook_store_book.png" alt></p></li></ol><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ul><li><p>完成登录操作</p><blockquote><ol><li>编写Controller接受表单数</li><li>User实体正常封装数据</li><li>编写Service逻辑</li><li>编写Dao逻辑</li><li>映射关系编写</li><li>登录失败跳转回登录页面，登录成功后跳转到书籍列表页面</li></ol></blockquote><p>要求:必须登录才能查看书籍</p><blockquote><ol><li><p>创建HandlerInterceptor接口的实现类</p></li><li><p>编写实现类中的preHandle方法，如果完成登录正常访问，没有完成登录，跳转到登录页面</p></li><li><p>修改spring-mvc.xml ，配置拦截器</p></li></ol></blockquote></li><li><p>完成书籍的分页查询功能</p><blockquote><ol><li><p>封装PageBean实体</p></li><li><p>编写Controller</p></li><li><p>接受页面提交的分页数据</p></li><li><p>编写Service完成PageBean实体封装</p></li><li><p>编写Dao</p></li><li><p>编写映射文件，完成sql编写</p></li><li><p>页面正常显示当前页数据</p></li><li><p>页面正常显示分页条</p></li><li><p>点击页面可以进行分页效果</p></li><li><p>点击上下页可以完成分页效果</p></li></ol></blockquote></li></ul><hr><h3 id="Itcast-bookStore"><a href="#Itcast-bookStore" class="headerlink" title="Itcast_bookStore"></a>Itcast_bookStore</h3><ul><li><p>pom.xml</p><blockquote><p>此项目严格按照张兴国讲师讲授的dubbo_ssm_project分布式服务环境搭建</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itcast<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo_ssm_project<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>dubbo_ssm_domain<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>dubbo_ssm_interfaces<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>dubbo_ssm_provider<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>dubbo_ssm_consumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><h4 id="bookStore-service-provider"><a href="#bookStore-service-provider" class="headerlink" title="bookStore_service_provider"></a>bookStore_service_provider</h4><h6 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h6><ul><li><p>jdbc.properties</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PROPERTIES"><figure class="iseeu highlight /properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://106.12.83.204:3306/book_store</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>log4j.properties</p></li><li><p>spring-dao.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载外部资源配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数据库相关操作(整合mybatis)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置别名--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="typeAliasesPackage" value="com.itheima.domain"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置PageHelper分页插件--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注意其他配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--选择数据库方言--&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"helperDialect"</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                                reasonable：默认值是false</span></span><br><span class="line"><span class="comment">                                true:自动处理首页和尾页，如果是第一页，再点上一页还是第一页不需要在前端去做是否为首页的判断</span></span><br><span class="line"><span class="comment">                                    如果是尾页，再点下一页还是最后一页，也不需要在前端做是否为尾页的判断</span></span><br><span class="line"><span class="comment">                            --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"reasonable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置获取mapper代理对象一个扫描器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入sqlSessionFactory--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--扫描接口所在基础包--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>spring-service.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定应用名称 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">"bookStore_service_provider"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定暴露服务的端口，如果不指定默认为20880--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"dubbo"</span> <span class="attr">port</span>=<span class="string">"20880"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定服务注册中心地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://106.12.83.204:2181"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--批量扫描，发布服务--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"com.itheima.service"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>spring-tx.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 事务管理器  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        开启事务控制的注解支持</span></span><br><span class="line"><span class="comment">        注意：此处必须加入proxy-target-class="true"，</span></span><br><span class="line"><span class="comment">              需要进行事务控制，会由Spring框架产生代理对象，</span></span><br><span class="line"><span class="comment">              Dubbo需要将Service发布为服务，要求必须使用cglib创建代理对象。</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag">                          <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><p>当在浏览器地址输入: <a href="http://106.12.83.204:8080/dubbo-admin-2.6.0" target="_blank" rel="noopener">http://106.12.83.204:8080/dubbo-admin-2.6.0</a> 出现分布的服务即配置成功</p><hr><p>现使用张兴国老师的<code>dubbo_ssm_project</code>模板进行本次项目环境搭建</p><h4 id="bookStore-service-provider环境搭建"><a href="#bookStore-service-provider环境搭建" class="headerlink" title="bookStore_service_provider环境搭建"></a>bookStore_service_provider环境搭建</h4><p><code>pom.xml</code></p><blockquote><p>mysql,spring,jackson,dubbo,tomcat相关坐标导入</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itcast<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo_ssm_interfaces<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--数据库相关的配置--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--spring相关--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--分布式框架dubbo--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--json相关转换--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.12.1.GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--发布服务--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">port</span>&gt;</span>8082<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">path</span>&gt;</span>/dubbo_ssm_provider<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>spring.xml</code></p><blockquote><p>日志,数据库,spring核心配置文件</p></blockquote><blockquote><p>druid.properties</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://106.12.83.204:3306/book_store</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.pwd=root</span><br></pre></td></tr></table></figure></div><blockquote><p>log4j.properties</p></blockquote><blockquote><p>spring.xml</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.加载外部资源配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:druid.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.pwd&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.配置数据库操作规范或者框架：Mybatis框架--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.1获取SqlSessionFactoryBean对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--别名配置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.domain"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--配置PageHelper分页插件--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注意其他配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--选择数据库方言--&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"helperDialect"</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                                reasonable：默认值是false</span></span><br><span class="line"><span class="comment">                                true:自动处理首页和尾页，如果是第一页，再点上一页还是第一页不需要在前端去做是否为首页的判断</span></span><br><span class="line"><span class="comment">                                    如果是尾页，再点下一页还是最后一页，也不需要在前端做是否为尾页的判断</span></span><br><span class="line"><span class="comment">                            --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"reasonable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.2 获取Mapper接口代理对象：通过扫描器扫描方式实现代理对象的获取--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入SqlSessionFactory,可以不配--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.mapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--5.声明事务管理器对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--6.声明事务通知--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">read-only</span>=<span class="string">"false"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> <span class="attr">propagation</span>=<span class="string">"SUPPORTS"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--7.配置AOP</span></span><br><span class="line"><span class="comment">        声明事务的动态代理方式为cglib分两步:</span></span><br><span class="line"><span class="comment">        一是proxy-target-class="true",作用是保证代理的对象发布服务,但是它的接口类型并非是我们消费方需要的</span></span><br><span class="line"><span class="comment">        二是在接口对应的实现类上声明@service(interfaceClass=XxxService.class)即:你生成的代理对象他的代理对象类型必须是XxxService类型</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pid"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pid"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--8.dubbo相关配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">"dubbo_ssm_provider"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://106.12.83.204:2181"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"dubbo"</span> <span class="attr">port</span>=<span class="string">"20883"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"com.itheima.service.impl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>web.xml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载spring容器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h4 id="bookStore-service-provider代码实现"><a href="#bookStore-service-provider代码实现" class="headerlink" title="bookStore_service_provider代码实现"></a>bookStore_service_provider代码实现</h4><blockquote><p>编写接口实现类与mapper接口</p></blockquote><p><code>XxxMapper</code></p><blockquote><p>持久层接口,完成sql语句的CRUD方式有两种:</p><ol><li>注解</li><li>Xxx.xml配置文件</li></ol><p>本项目使用1.注解方式完成CRUD</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.print.Book;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from book"</span>)</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>XxxServiceImpl</code></p><blockquote><p>service接口实现类</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Book;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mapper.BookMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.BookService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>(interfaceClass = BookService<span class="class">.<span class="keyword">class</span>, <span class="title">timeout</span> </span>= <span class="number">5000</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findAll</span><span class="params">(Integer pageNum,Integer pageSize)</span> </span>&#123;</span><br><span class="line">        PageHelper.startPage(pageNum,pageSize);</span><br><span class="line">        List&lt;Book&gt; bookList = bookMapper.findAll();</span><br><span class="line">        System.out.println(bookList);</span><br><span class="line">        <span class="keyword">return</span> bookMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="bookStore-backend"><a href="#bookStore-backend" class="headerlink" title="bookStore_backend"></a>bookStore_backend</h4><h6 id="bookStore-backend环境配置"><a href="#bookStore-backend环境配置" class="headerlink" title="bookStore_backend环境配置"></a>bookStore_backend环境配置</h6><p><code>pom.xml</code></p><blockquote><p>添加springmvc,json,pageHelper,dubbo相关坐标,添加bookStore_interfaces依赖</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--添加bookStore_interfaces依赖--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bookStore_interface<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--controller与视图层进行数据交互--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--springmvc相关坐标--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!--json相关坐标--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--dubbo相关坐标--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.12.1.GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--mybatis分页助手--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">port</span>&gt;</span>8085<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">path</span>&gt;</span>/dubbo_ssm_consumer<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>web.xml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--springmvc前端控制器配置--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--加载springmvc核心配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>log4j.peoperties</code></p><p><code>spring-mvc.xml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd      </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://code.alibabatech.com/schema/dubbo </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.mvc注解驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.释放静态资源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--5.dubbo相关配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">"bookStore_backend"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://106.12.83.204:2181"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"com.itheima.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--消费方取消自检--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:consumer</span> <span class="attr">check</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h6 id="bookStore-backend代码实现"><a href="#bookStore-backend代码实现" class="headerlink" title="bookStore_backend代码实现"></a>bookStore_backend代码实现</h6><blockquote><p>与前台进行页面数据交互,配置拦截器</p></blockquote><p><code>XxxController</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Book;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.BookService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">(@RequestParam(required = <span class="keyword">false</span>, value = <span class="string">"pageNum"</span>, defaultValue = <span class="string">"1"</span>)</span> Integer pageNum,</span></span><br><span class="line"><span class="function">                          @<span class="title">RequestParam</span><span class="params">(required = <span class="keyword">false</span>, value = <span class="string">"pageSize"</span>, defaultValue = <span class="string">"1"</span>)</span> Integer pageSize,</span></span><br><span class="line"><span class="function">                          Model model) </span>&#123;</span><br><span class="line">        List&lt;Book&gt; bookList = bookService.findAll(pageNum,pageSize);</span><br><span class="line">        System.out.println(bookList);</span><br><span class="line">        model.addAttribute(<span class="string">"bookList"</span>,bookList);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"book_list"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h4 id="bookStore-common"><a href="#bookStore-common" class="headerlink" title="bookStore_common"></a>bookStore_common</h4><blockquote><p>存放User/Book/BookCategory类</p></blockquote><h4 id="bookStore-interface"><a href="#bookStore-interface" class="headerlink" title="bookStore_interface"></a>bookStore_interface</h4><blockquote><p>存放bookService接口</p></blockquote><h6 id="bookStore-interface代码实现"><a href="#bookStore-interface代码实现" class="headerlink" title="bookStore_interface代码实现"></a>bookStore_interface代码实现</h6><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Book&gt; <span class="title">findAll</span><span class="params">(Integer pageNum,Integer pageSize)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><h1 id="项目中出现的bug"><a href="#项目中出现的bug" class="headerlink" title="项目中出现的bug"></a>项目中出现的bug</h1><p><font face="Tw cen MT" color="red" size="6px">bug</font></p><ul><li><p>Failed to load resource: the server responded with a status of 404 (Not Found)</p><blockquote><p><font color="red" face="Tw cen MT">问题描述</font></p><p>项目启动后,直接在地址栏中输入页面完整路径 <a href="http://localhost:8085/bookStore_bckend/book_list.jsp可以正常显示,通过" target="_blank" rel="noopener">http://localhost:8085/bookStore_bckend/book_list.jsp可以正常显示,通过</a> <a href="http://localhost:8085/bookStore_bckend/book/findAll" target="_blank" rel="noopener">http://localhost:8085/bookStore_bckend/book/findAll</a> 就报错</p></blockquote><p>如图:</p><p><img src="/posts/JavaNotes/img/blogImgbookStore1.png" alt></p><p><img src="/posts/JavaNotes/img/blogImgbookStore2.png" alt></p><blockquote><p><font color="green" face="Tw cen MT">解决措施</font></p><p><a href="https://www.cnblogs.com/sjzxs/p/10275431.html" target="_blank" rel="noopener">csdn</a></p><p>js的引用路径有错：</p><p>1.检查应用路径是否正确</p><p>引用路径，最好都使用绝对路径</p><script type="text/javascript" src="<%=basePath%>/js/jquery-1.12.4.js"></script><p>2.在SSM框架下面查看配置文件</p><p>&lt;mvc:resources location=”/js/“ mapping=”/js/**”&gt;</p><p>不会在jsp文件中引入绝对路径</p><p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgbookStore2.gif" alt></p></blockquote></li></ul><ul><li><p>book_list.jsp界面解析不了jstl表达式</p><blockquote><p><font color="red" face="Tw cen MT">问题描述</font></p><p>测试发现后台已经发送给前台json类型的数据,而后台无法解析,出现${book.name}…原样展示</p><p><font color="green" face="Tw cen MT">解决措施</font></p><p>在book_list.jsp头部添加</p><p>&lt;%@ taglib uri=”<a href="http://java.sun.com/jsp/jstl/core&quot;" target="_blank" rel="noopener">http://java.sun.com/jsp/jstl/core&quot;</a> prefix=”c” %&gt;</p><p>&lt;%@ page language=”java” contentType=”text/html; charset=UTF-8” pageEncoding=”UTF-8” isELIgnored=”false” %&gt;</p></blockquote></li></ul><h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><blockquote><p>基于以上基本功能的查询完成后,实现book_list的分页展示(不知为何以上的分页没有实现)</p><p>以下笔记基于张兴国老师在讲解基于mybatis的分页查询功能实现</p></blockquote><p><font face="Tw cen MT" color="red" size="6px">bug</font></p><ul><li><p>mybatis的分页查询助手不起作用</p><blockquote><p><font color="red" face="Tw cen MT">问题描述</font></p><p>每次都查询出所有信息,没有按照配置的那样进行分页查询</p><p><font color="green" face="Tw cen MT">解决措施</font></p><p>可能的措施:</p><ol><li>在控制台打印sql语句,确认PageHelper分页助手拦截了没有,确定出错范围,环境配置orjava文件</li></ol><p><a href="https://blog.csdn.net/qq_40110781/article/details/82894388" target="_blank" rel="noopener">idea控制台显示sql语句日志信息配置</a>(✘)</p><p><a href="https://blog.csdn.net/wdq892157341/article/details/50836190?utm_source=app" target="_blank" rel="noopener">如何在控制台打印出mybatis sql语句日志</a>(✘)</p><p><a href="https://www.cnblogs.com/ShaYeBlog/p/9836673.html" target="_blank" rel="noopener">MyBatis配置：在控制台打印SQL语句</a>(✘)</p><p>经检测,以上配置均无效,不知道是不是我操作问题??</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgjuewang.png" width="100px" height="70px" align="center"><ol start="2"><li>回顾张兴国老师讲的在没有搭建dubbo服务框架中的mybatis的分页查询用法</li></ol></blockquote></li></ul><h5 id="bookStore-service-provider-1"><a href="#bookStore-service-provider-1" class="headerlink" title="bookStore_service_provider"></a>bookStore_service_provider</h5><ul><li><p><code>pom.xml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>在bookStore_service_provider中的spring核心配置文件里面,找到数据库操作框架配置</p><p><code>spring.xml</code></p><blockquote><p>配置数据库操作规范或者框架：Mybatis框架</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--别名配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.domain"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--分页插件配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">props</span>&gt;</span>                           </span><br><span class="line">                        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"helperDialect"</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span>                            </span><br><span class="line">                        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"reasonable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><h2 id="登录验证功能"><a href="#登录验证功能" class="headerlink" title="登录验证功能"></a>登录验证功能</h2><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目 网上书店 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue_js</title>
      <link href="/posts/1619914199.html"/>
      <url>/posts/1619914199.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue_js"></a>Vue_js</h1><blockquote><p>在做一个页面是vue的需要实现用户删除功能时需要对vue的数据双向绑定有一个清晰的认识,所以在这份笔记里面将通过实例熟悉vue的一些基础知识</p></blockquote><blockquote><p>以下关于数据绑定的知识来源于张兴国讲师讲解vue.js入门时的视频内容</p></blockquote><h2 id="Vue-js的HelloWorld"><a href="#Vue-js的HelloWorld" class="headerlink" title="Vue.js的HelloWorld"></a>Vue.js的HelloWorld</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;script src="js/vuejs-2.5.16.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;title&gt;Vue.js_Demo&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#app"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            message: <span class="string">"Hello World"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;&#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><font color="green" size="3px" face="Tw cen MT">tips</font></p><blockquote><p>vue对象为JSON格式(vue只生产数据,不会去处理页面的东西)</p><ol><li><p>将页面内容纳入到vue管理范围之内</p><p>el:”#<del>idName</del>“ (接管数据)</p></li><li><p>封装数据</p><p>data:{}</p></li><li><p>封装方法</p><p>methods:{}</p></li></ol></blockquote><blockquote><p>取出vue对象中data中封装的Json数据</p><p>只有在vue的管理范围内才是插值表达式,否则只是单纯的字符</p></blockquote><h2 id="v-mode的双向绑定"><a href="#v-mode的双向绑定" class="headerlink" title="v-mode的双向绑定"></a>v-mode的双向绑定</h2><blockquote><p>取:从vue对象中的data封装的JSON数据格式数据</p><p>赋:赋值给vue对象中的data封装的JSON数据</p><p><a href="https://www.jianshu.com/p/46d5d9b1ad20" target="_blank" rel="noopener">☍Vue基础之数据绑定</a></p></blockquote><p>需求</p><blockquote><p>在user.html页面中使用vue的v-mode完成用户信息修改与删除</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Element_UI</title>
      <link href="/posts/1718488190.html"/>
      <url>/posts/1718488190.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="Element-UI"><a href="#Element-UI" class="headerlink" title="Element_UI"></a>Element_UI</h1><h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="Container-布局容器"><a href="#Container-布局容器" class="headerlink" title="Container 布局容器"></a>Container 布局容器</h3><blockquote></blockquote><h3 id="Form-表单"><a href="#Form-表单" class="headerlink" title="Form 表单"></a>Form 表单</h3><blockquote><p>由输入框、选择器、单选框、多选框等控件组成，用以收集、校验、提交数据</p></blockquote><ul><li><p>典型表单</p></li><li><p>行内表单</p></li><li><p>表单验证</p><p>自定义校验规则</p><p>数字类型验证</p></li><li><p>动态增减表单项</p></li><li><p>表单内组件尺寸控制</p></li></ul><p><code>Navigation</code></p><h3 id="Dropdown-下拉菜单"><a href="#Dropdown-下拉菜单" class="headerlink" title="Dropdown 下拉菜单"></a>Dropdown 下拉菜单</h3><blockquote><p>将动作或菜单折叠到下拉菜单中</p></blockquote><p>​</p><p><code>Data</code></p><h3 id="Table-表格"><a href="#Table-表格" class="headerlink" title="Table 表格"></a>Table 表格</h3><blockquote><p>用于展示多条结构类似的数据，可对数据进行排序、筛选、对比或其他自定义操作。</p></blockquote><!-- rebuild by neat -->]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>itcast-health</title>
      <link href="/posts/1547802368.html"/>
      <url>/posts/1547802368.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:45 GMT+0800 (GMT+08:00) --><h1 id="Itcast-health"><a href="#Itcast-health" class="headerlink" title="Itcast_health"></a>Itcast_health</h1><h2 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h2><p><code>checkItem.html</code></p><ul><li><p>分页查询所有检查项</p><blockquote><p>分页的基本思路是前端通过vue的ajax请求,封装分页条件对象(currentPage/pageSize/queryString),采取post请求发送给后端,后端拿到数据借助mybatis框架的分页助手PageHelper/Page将查询到的检查项进行处理再响应给前端</p></blockquote></li><li><p>新建一个检查项</p></li><li><p>编辑选中的检查项</p></li><li><p>删除选中的检查项</p></li></ul><p><code>checkGroup.html</code></p><ul><li><p>分页查询所有检查组</p></li><li><p>新建一个检查组</p><blockquote><ol><li><p>需要回显所有检查项(检查项弹层里面可以新增搜索框)</p></li><li><p>使用</p></li></ol><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgid.png" alt="image-20200128173018029"><p>​ 或者</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgid2.png" alt="image-20200128173332667"><p>​ 获取插入检查组之后自增的主键id</p><p>​ <font color="red" face="Tw cen MT">bug</font>:</p><p>​ 使用如上配置,没有获取到插入后的检查组的id,我的sql语句如下</p><p>​ insert into t_checkgroup values (null ,#{code},#{name},#{helpCode},#{sex},#{remark},#{attention})</p><p>​ <font color="green" face="Tw cen MT">Sollution</font>:</p><p>​ ①改变sql语句</p><p>​ insert into t_checkgroup (code,name,helpCode,sex,remark,attention) values (#{code},#{name},#{helpCode},#{sex},#{remark},#{attention})</p><p>​ 无效</p><p>​ ②换标签</p><p>​ 无效</p><p>​</p><p>​ ③将逻辑代码写在接口实现类里面即CheckGroupServiceImpl中</p><p>​ 突然我发现,在给t_checkgroup_checkitem表列赋值的时候sql语句怎么是这样的啊?</p><p>​ insert into t_checkgroup_checkitem (checkgroup_id,checkitem_id) values (checkGroupId,checkItemId)</p><p>​ 仍然不是这个问题</p><p>​</p><p>​ ④复制粘贴标准答案代码</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgdog.gif" alt="image-20200128173332667" style="zoom:33%"><p>​ 运行正常</p><p>​ 原因应该是在接口实现内才可以获取插入后的自增主键id</p><ol start="3"><li>设置检查项和检查组的关联关系</li></ol></blockquote></li></ul><ul><li><p>编辑选中的检查组</p><blockquote><p>检查组和检查组所属的检查项信息回显</p><ol><li>根据检查组Id查询该检查组信息,需要查询该检查组对应的检查项信息,采取一对多关联查询</li></ol><p>保存更改后的检查组信息</p><ol><li>删除原来检查组与 检查项之间的关联关系</li><li>建立新的检查组与 检查项之间的关联关系</li><li>保存修改后的检查项信息</li></ol></blockquote></li><li><p>删除选中的检查组</p><blockquote><ol><li>删除原来检查组与 检查项之间的关联关系</li><li>删除检查组</li></ol></blockquote></li></ul><p><code>setmeal.html</code></p><ul><li><p>分页条件查询所有套餐项</p><blockquote><p><font color="red" face="Tw cen MT">bug:</font></p><blockquote><p>前台向后台发送ajax请求</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgsetmeal.png" alt="image-20200131033155594"><p>正常接受而</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgsetmeal2.png" alt="image-20200131033639515"><p>后端接受到的参数都为null</p></blockquote><pre><code>&lt;font color=&quot;green&quot; face=&quot;Tw cen MT&quot;&gt;Sollution:&lt;/font&gt;</code></pre><blockquote><p>……</p><p>前台向后端发送post请求.发送QueryPageBean对象</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgsetmeal3.png" alt="image-20200131150521744"></blockquote></blockquote></li><li><p>新增套餐</p><p>1.清除新建套餐表单数据</p><p>2.回显所有检查组</p><p>3.<code>上传图片</code></p><p>在springmvc.xml中配置文件上传组件</p><blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &gt;<span class="comment">&lt;!--文件上传组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"104857600"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxInMemorySize"</span> <span class="attr">value</span>=<span class="string">"4096"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>使用ElementUI提供的上传组件el-upload</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload</span><br><span class="line">    <span class="class"><span class="keyword">class</span></span>=<span class="string">"avatar-uploader"</span></span><br><span class="line">action=<span class="string">"/setmeal/upload.do"</span><span class="comment">//图片上传地址</span></span><br><span class="line">    :auto-upload=<span class="string">"autoUpload"</span></span><br><span class="line">name=<span class="string">"imgFile"</span></span><br><span class="line">    :show-file-list=<span class="string">"false"</span></span><br><span class="line">:on-success=<span class="string">"handleAvatarSuccess"</span></span><br><span class="line">    :before-upload=<span class="string">"beforeAvatarUpload"</span>&gt;</span><br><span class="line">    &lt;img v-<span class="keyword">if</span>=<span class="string">"imageUrl"</span> :src=<span class="string">"imageUrl"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"avatar"</span>&gt;</span><br><span class="line">    &lt;i v-else class="el-icon-plus avatar-uploader-icon"&gt;&lt;/i&gt;</span><br><span class="line">&lt;/el-upload&gt;</span><br></pre></td></tr></table></figure></blockquote><p>4.新增套餐</p><p>5.完善文件上传(利用redis来保存图片名称)</p><blockquote><p>前面我们已经完成了文件上传，将图片存储在了七牛云服务器中。但是这个过程存在一 个问题，就是如果用户只上传了图片而没有最终保存套餐信息到我们的数据库，这时我 们上传的图片就变为了垃圾图片。对于这些垃圾图片我们需要定时清理来释放磁盘空间</p></blockquote><p>利用<code>redis</code>来保存图片名称</p><blockquote><p>1、当用户上传图片后，将图片名称保存到redis的一个Set集合中，例如集合名称为 setmealPicResources<br>2、当用户添加套餐后，将图片名称保存到redis的另一个Set集合中，例如集合名称为<br>setmealPicDbResources</p><p>3、计算setmealPicResources集合与setmealPicDbResources集合的差值，结果就是垃 圾图片的名称集合，清理这些图片即可</p><blockquote><p>基于Quartz定时任务，通过计算<code>redis两个集合的差值</code>找出所有的垃圾图片，就可以将垃圾图片清理掉。</p></blockquote></blockquote><blockquote><p><font color="red" face="Tw cen MT">bugs:</font></p><p><font color="red" face="Tw cen MT">bug1:</font></p><blockquote><p>在setmeal.html页面设置图片的上传地址<code>action=&quot;/setmeal/upload.do&quot;</code>时,写好controller层,页面报404错</p></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p>要加完整路径<code>action=&quot;/health_backend/setmeal/upload.do&quot;</code></p></blockquote><p><font color="red" face="Tw cen MT">bug2:</font></p><blockquote><p>setmeal.html页面中无img属性,为何<code>this.formData.img = response.data;</code>可以赋上值</p></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p>…</p></blockquote><p><font color="red" face="Tw cen MT">bug3:</font></p><blockquote><p>[5.完善文件上传]</p><p>org.xml.sax.SAXParseException; lineNumber: 15; columnNumber: 68; schema_reference.4: 无法读取方案文档 ‘<a href="http://www.springframework.org/schema/beans/spring‐beans.xsd&#39;" target="_blank" rel="noopener">http://www.springframework.org/schema/beans/spring‐beans.xsd&#39;</a>, 原因为 1) 无法找到文档; 2) 无法读取文档; 3) 文档的根元素不是 <a href="xsd:schema">xsd:schema</a>。</p></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p><a href="https://blog.csdn.net/u012402177/article/details/82384346?utm_source=app" target="_blank" rel="noopener">CSDN_spring整合redis</a></p><p>分别在heath_service_provider和health_backend的resources目录下放置<code>redis.properties</code>和<code>spring-redis</code>配置文件</p></blockquote><p><font color="red">bug4</font></p><blockquote><p>Could not resolve placeholder ‘redis.pool.maxTotal’ in string value “${redis.pool.maxTotal}</p><p>Could not resolve placeholder……</p></blockquote><p><font color="orange">Cause4</font></p><blockquote><p>在一个Spring文件还是在多个Spring文件被统一load的情况下，直接写</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:property-placeholder location="" /&gt;  </span><br><span class="line">&lt;context:property-placeholder location="" /&gt;</span><br></pre></td></tr></table></figure><p>是不允许的。</p></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p><a href="https://blog.csdn.net/qzc2017/article/details/79465864" target="_blank" rel="noopener">CSDN_ 晨曦IT大神</a></p><p>加上<code>ignore-unresolvable=&quot;true&quot;</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:property-placeholder location="" ignore-unresolvable="true"/&gt;  </span><br><span class="line">&lt;context:property-placeholder location="" ignore-unresolvable="true"/&gt;</span><br></pre></td></tr></table></figure></blockquote><p><font color="red">bug5</font></p><blockquote><p>org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method ‘clearImg’ on target class [class com.itheima.jobs.ClearImgJob] failed; nested exception is java.lang.NullPointerException</p><p>Caused by: java.lang.NullPointerException</p></blockquote><p><font color="orange">Cause5</font></p><p>spring在加载的时候没有获取到JedisPool对象</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JedisPool jedisPool;</span><br></pre></td></tr></table></figure></div><p><font color="green" face="Tw cen MT">Sollution:</font></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自动扫描标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span> /&gt;</span></span><br></pre></td></tr></table></figure></div></blockquote></li></ul><ul><li><p>编辑套餐</p><p>1.套餐数据回显</p><blockquote><p>使用一对多关联查询出当前套餐信息,回显数据需要回显图片的url地址(七牛云域名+图片的文件名)</p><p><font color="red" face="Tw cen MT">bug1:</font></p><blockquote><p>setmeal对checkgroup为多对多关系么?</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgsetmeal5.png" alt="image-20200131192832824"></blockquote><p><font color="green" face="Tw cen MT">Sollution1:</font></p><blockquote><p>我认为setmeal对checkgroup是一对多,setmeal对checkitem是多对多</p></blockquote><p><font color="red" face="Tw cen MT">bug2:</font></p><blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206020135.png" alt="image-20200206020109890"><p>SQLErrorCodeSQLExceptionTranslator:402 - Translating SQLException with SQL state ‘42000’, error code ‘1064’, message [You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘code = ‘0001’</p><p><font color="orange" face="Tw cen MT">Cause:</font></p><p>多个if判断之间忘记加<code>,</code>号</p><p><font color="green" face="Tw cen MT">Sollution:</font></p><p>略.</p></blockquote></blockquote></li><li><p>删除套餐</p><blockquote><p>…</p></blockquote></li></ul><p>setmeal.html(mobile)</p><ul><li><p>在<code>setmeal.html</code>显示所有的套餐信息(无需分页条件查询)</p><blockquote><p><font color="red">Bug:</font></p><blockquote><p>在进行手机端的首页设置时候, web.xml 里面有如下设置:</p><p><code>&lt;welcome-file-list&gt;&lt;welcome-file&gt;/pages/index.html&lt;/welcome-file&gt;&lt;/welcome-file-list&gt;</code></p><p>于是我在<code>health_backend</code>的<code>web.xml</code>中也如法炮制了<code>&lt;welcome-file-list&gt;&lt;welcome-file&gt;/pages/main.html&lt;/welcome-file&gt;&lt;/welcome-file-list&gt;</code>,可是在启动tomcat跳转设置的首页的时候,页面丢失了</p></blockquote><p>如图:</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205225313.png" alt="image-20200205225249602" style="zoom:33%"><p><font color="orange">Cause:</font></p><blockquote><p>tomcat启动路径和页面src加载路径问题</p></blockquote><p><font color="green">Sollution:</font></p><blockquote><p>改tomcat端口号和访问路径</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span>&gt;</span>/health_backend<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>改<code>main.html</code>中<code>src=&quot;checkitem.html&quot;</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"right"</span> <span class="attr">class</span>=<span class="string">"el-main"</span> <span class="attr">src</span>=<span class="string">"/health_backend/pages/checkitem.html"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"580px"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>样式和组件引用换为绝对路径</p><blockquote><p>只需在<code>main.html</code>设置</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/health_backend/plugins/elementui/index.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/health_backend/plugins/font-awesome/css/font-awesome.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/health_backend/css/style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/health_backend/js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/health_backend/plugins/elementui/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/health_backend/js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div></blockquote></blockquote></li></ul><p>setmeal_detail.html</p><ul><li><p>显示当前套餐的详细信息及其所拥有的检查项信息</p><blockquote><p>获取从页面<code>setmeal.html</code>跳转到<code>setmeal_detail</code>的URL参数值</p><p>自定义一个getUrlParam方法作为js文件引入用于获取当前套餐id</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlParam</span>(<span class="params">paraName</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">document</span>.location.toString();   </span><br><span class="line"><span class="keyword">var</span> arrObj = url.split(<span class="string">"?"</span>);</span><br><span class="line"><span class="keyword">if</span> (arrObj.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> arrPara = arrObj[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</span><br><span class="line">  <span class="keyword">var</span> arr;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrPara.length; i++) &#123;</span><br><span class="line">      arr = arrPara[i].split(<span class="string">"="</span>);</span><br><span class="line">      <span class="keyword">if</span> (arr != <span class="literal">null</span> &amp;&amp; arr[<span class="number">0</span>] == paraName) &#123;</span><br><span class="line">          <span class="keyword">return</span> arr[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p><font color="red">bug:</font></p><blockquote><p>Mapped Statements collection does not contain value for com.itheima.dao.findCheckitemsById</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206130859.png" alt="image-20200206130836565"></blockquote><p><font color="orange">Cause:</font></p><p>多对多关联查询中配置错误</p><p><font color="green">Sollution:</font></p><p>百度:</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206133542.png" alt="image-20200206133524039"><blockquote><p><code>select=&quot;com.itheima.dao.findCheckItemsById2&quot;</code>少写了<code>CheckItemDao</code></p><p><code>select</code>=”方法所在的接口的全限定名+方法名”</p><p><code>select=&quot;com.itheima.dao.CheckItemDao findCheckItemsById2&quot;</code></p></blockquote></blockquote></li><li><p>短信发送(js/jquery两种方式)</p><p>1.手机号校验</p><blockquote><p>手机号校验方法封装进<code>healthmobile.js</code>文件中</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkTelephone</span>(<span class="params">telephone</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> reg=<span class="regexp">/^[1][3,4,5,7,8,9][0-9]&#123;9&#125;$/</span>;</span><br><span class="line">        <span class="keyword">if</span> (!reg.test(telephone)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></blockquote><p>2.30秒倒计时效果</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200206223301.png" alt="image-20200206223226088" style="zoom:80%"><blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> clock = <span class="string">''</span>;<span class="comment">//定时器对象，用于页面30秒倒计时效果</span></span><br><span class="line"><span class="keyword">let</span> nums = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">let</span> validateCodeButton;</span><br><span class="line"><span class="comment">//基于定时器实现30秒倒计时效果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doLoop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    validateCodeButton.disabled = <span class="literal">true</span>;<span class="comment">//将按钮置为不可点击</span></span><br><span class="line">    nums--;</span><br><span class="line">    <span class="keyword">if</span> (nums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        validateCodeButton.value = nums + <span class="string">'秒后重新获取'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        clearInterval(clock); <span class="comment">//清除js定时器</span></span><br><span class="line">        validateCodeButton.disabled = <span class="literal">false</span>;</span><br><span class="line">        validateCodeButton.value = <span class="string">'重新获取验证码'</span>;</span><br><span class="line">        nums = <span class="number">30</span>; <span class="comment">//重置时间</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></blockquote></li></ul><p>3.发送ajax请求,将验证码/短信发送的手机号传给后台</p><blockquote><p>使用Redis的<code>setex</code>命令</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">setex</span> key seconds value</span><br></pre></td></tr></table></figure></div><p>eg:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">setex</span> phoneNumber <span class="number">300</span> <span class="number">4567</span> //设置phoneNumber的值为<span class="number">4567</span>的时间是<span class="number">5</span>分钟</span><br></pre></td></tr></table></figure></div></blockquote><blockquote><p>注意<code>SMSUtils</code>中几个配置,如验证码场景和通用场景与模版CODE需要相匹配,accessKeyId与accessKeySecret与SignName要填写正确</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200208000239.png" alt="image-20200208000222221"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200208000123.png" alt="image-20200208000049873" style="zoom:80%"></blockquote><ul><li><p>针对不同预约场景返回不同的预约结果</p><blockquote><p>1、检查用户所选择的预约日期是否已经提前进行了预约设置，如果没有设置则无法进行 预约</p><p>2、检查用户所选择的预约日期是否已经约满，如果已经约满则无法预约<br>3、检查用户是否重复预约（同一个用户在同一天预约了同一个套餐），如果是重复预约 则无法完成再次预约</p><blockquote><p><font color="red">bug</font></p><blockquote><p>在证实该预约用户是会员且在预约日期当天没有进行重复预约操作,在<code>t_order</code>(订单表)中插入该订单信息,紧接着在修改<code>t_order</code>(预约表)时,我不同于答案的写法,我是根据当前预约用户预约日期查到预约记录,在当前预约信息上的预约人数上加1,出现了sql错误:</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL: update t_ordersetting set number = number++  where orderDate = '2020-02-13 00:00:00'</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>而期望类型是:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">update</span> t_ordersetting set number = number++  where orderDate = <span class="string">'2020-02-13'</span></span><br></pre></td></tr></table></figure></div><p><font color="blue">Cause</font></p><blockquote><p>sql语句真正错误的地方不在此</p><p>sql语法中没有自增类型的<code>number = number++</code></p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span></span><br><span class="line">t_ordersetting</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line"><span class="built_in">number</span> = <span class="built_in">number</span>++</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">orderDate = <span class="comment">#&#123;orderDate&#125;</span></span><br></pre></td></tr></table></figure></div><p><font color="green">Sollution</font></p><blockquote><p><code>number = number++</code>==&gt;<code>number = number+1</code></p><p>还想说的就是根据日期查询的时候无需将字符串格式的<code>yyyy-MM-dd</code>转为Date类型的<code>yyyy-MM-dd</code>,而插入的时候需要使用SImpleDateFormate或者工具类转化一下</p></blockquote><p><code>附上此次bug解决的心路历程</code></p><p><a href="/post_files/img/sql语法里面没有自增一说.png">☍sql语法里面没有自增一说</a></p><p><font color="green">Cause</font></p><blockquote><p>在证实该预约用户是会员且在预约日期当天没有进行重复预约操作,在<code>t_order</code>(订单表)中插入该订单信息,紧接着在修改<code>t_order</code>(预约表)时,我不同于答案的写法,我是根据当前预约用户预约日期查到预约记录,在当前预约信息上的预约人数上加1,出现了sql错误:</p></blockquote></blockquote><p>4、检查当前用户是否为会员，如果是会员则直接完成预约，如果不是会员则自动完成注 册并进行预约<br>5、预约成功，更新当日的已预约人数</p></blockquote></li></ul><p>ordersetting.html</p><ul><li><p>Apache POI</p></li><li><p>批量导入预约设置信息</p><p>完善页面</p><blockquote><p>1.提供模板文件</p><p>2.实现模板文件下载</p><p>3.文件上传</p><blockquote><p>使用ElementUI提供的上传组件el-upload与POIUtils工具类</p></blockquote><p>预约信息批量导入数据库</p><p><font color="red" face="Tw cen MT">question:</font></p><blockquote><p>我在通过POIUtils获取到excel表格中的数据并封装成Ordersetting对象的过程中,<code>new Date</code>将orderDate由字符串<code>2019/02/01</code>转化为<code>FriFeb 01 00:00:00 CST2019</code>,如此转化,在插入数据库之后,又显示为<code>2019-02-01</code>?</p></blockquote><blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgordersetting1.png" alt="image-20200202020000685"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgordersetting2.png" alt="image-20200202020159141"></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p>……</p></blockquote></blockquote></li></ul><ul><li><p>日历展示预约设置信息</p><blockquote><p>通过日历的方式展示出来每天设置的预约人 数。我们只需要查询当前月份的预约设置信息并展示,到日历中即可，同时在日历中还需要展示已经预约的人数</p><p>大致思路:前台发送Ajax请求,传给后台查询的年月信息,后台通过拼接字符串的格式调用服务层在数据库中查询当月所有的预约信息封装成一个个map对象,装进List集合中响应给前端</p></blockquote><p>1.前台发送Ajax请求将需要在页面展示的年月信息发送给后台</p><p>2.后台接受年月通过拼接字符串的格式将查询格式拼接为yyyy-MM-dd格式</p><blockquote><p><font color="red" face="Tw cen MT">bug:</font></p><blockquote><p>java.lang.IllegalArgumentException</p><p>如果位置描述为空如果指定对象参数不是一个数组如果指定对象不是一个数组异常</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgordersetting6.png" alt="image-20200203185540929"></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p>insert的时候需要转化为数据库规定的类型,而查询的时候使用String类型</p></blockquote></blockquote></li></ul><ul><li><p>日历设置修改可预约人数</p><blockquote><p>使用Element-UI的message-box组件,向后台传入当前可预约对象,日期需要做字符串处理成yyyy-MM-dd格式,可预约人数(做校验)</p><p>需要做一下判断:该日期是否有过预约记录,有则修改可预约人数;无则添加预约记录</p></blockquote><blockquote><p><font color="red" face="Tw cen MT">bug:</font></p><blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205122223.png" alt="image-20200205122205995"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205122600.png"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205122704.png" alt="image-20200205122649951"></blockquote><p><font color="orange" face="Tw cen MT">Cause:</font></p><blockquote><p>……</p></blockquote><p><font color="green" face="Tw cen MT">Sollution:</font></p><blockquote><p>改为<code>post</code>提交</p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205134722.png" alt="image-20200205134702425"> <img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205134859.png" alt="image-20200205134842245"></blockquote></blockquote></li></ul><hr><h3 id="health-parent"><a href="#health-parent" class="headerlink" title="health_parent"></a>health_parent</h3><blockquote><p>父工程</p><p>打包方式为pom，统一锁定依赖的版本，同时聚合其他子模块 便于统一执行maven命令</p></blockquote><p><a href="/post_files/file/itcast_health_pom.xml">☍Itcast_parent_pom.xml</a></p><blockquote><p>在pom.xml文件中规范依赖版本号与依赖管理标签</p><p>spring相关坐标/mybatis相关坐标/mysql相关坐标/Json相关坐标/……</p></blockquote><hr><h3 id="health-common"><a href="#health-common" class="headerlink" title="health_common"></a>health_common</h3><p>工具类</p><ul><li><a href="/post_files/file/itcast_common_POIUtils.java">☍POIUtils</a></li></ul><blockquote><p>存放工具类实体类</p><p>通用模块，打包方式为jar，存放项目中使用到的一些工具类、实体类、返回结果和常量类</p></blockquote><hr><h3 id="health-interface"><a href="#health-interface" class="headerlink" title="health_interface"></a>health_interface</h3><blockquote><p>打包方式为jar，存放服务接口</p></blockquote><h4 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h4><ul><li><p>CheckItemService</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CheckItemService</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;CheckItem&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addNewCheckItem</span><span class="params">(CheckItem checkItem)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteCheckItemById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">CheckItem <span class="title">findCheckItemById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateCheckItem</span><span class="params">(CheckItem checkItem)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">PageResult <span class="title">findCheckItemByPage</span><span class="params">(QueryPageBean queryPageBean)</span></span>;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>CheckGroupService</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CheckGroupService</span> </span>&#123;</span><br><span class="line">    <span class="function">PageResult <span class="title">findCheckGroupByPage</span><span class="params">(QueryPageBean queryPageBean)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addCheckGroup</span><span class="params">(CheckGroup checkGroup,Integer[] checkitemIds)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">CheckGroup <span class="title">findCheckGroupById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveCheckGroup</span><span class="params">(CheckGroup checkGroup,Integer[] checkitemIds)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteCheckGroupById</span><span class="params">(Integer checkGroupId)</span></span>;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>OrdersettingService</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrdersettingService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addOrdersetting</span><span class="params">(List&lt;OrderSetting&gt; data)</span></span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Map&lt;String,Object&gt;&gt; findOrdersettingByOrderDate(String start, String end);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateNumber</span><span class="params">(OrderSetting orderSetting)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><hr><h3 id="health-backend"><a href="#health-backend" class="headerlink" title="health_backend"></a>health_backend</h3><blockquote><p>传智健康管理后台，打包方式为war，作为Dubbo服务消费方，存放 Controller、HTML页面、js、css、spring配置文件等，需要部署到tomcat运行</p></blockquote><h5 id="基础环境搭建"><a href="#基础环境搭建" class="headerlink" title="基础环境搭建"></a>基础环境搭建</h5><ul><li><a href="/post_files/file/itcast_backend_pom.xml">☍pom.xml</a></li><li><a href="/post_files/file/itcast_service_provider_log4j.properties">☍log4j.properties</a></li><li><a href="/post_files/file/itcast_backend_springmvc.xml">☍springmvc.xml</a></li><li><a href="/post_files/file/itcast_service_provider_redis.properties">☍redis.properties</a></li><li><a href="/post_files/file/itcast_service_provider_spring-redis.xml">☍spring-redis</a></li></ul><p><code>controller</code></p><ul><li><p>CheckItemController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/checkItem"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckItemController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> CheckItemService checkItemService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findCheckItemByPage"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageResult <span class="title">findCheckItemByPage</span><span class="params">(@RequestBody QueryPageBean queryPageBean)</span></span>&#123;      </span><br><span class="line">        PageResult pageResult = checkItemService.pageQuery(queryPageBean);   </span><br><span class="line">        <span class="keyword">return</span> pageResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CheckItem&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">        <span class="keyword">return</span> checkItemService.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/addNewCheckItem"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">addNewCheckItem</span><span class="params">(@RequestBody CheckItem checkItem)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkItemService.addNewCheckItem(checkItem);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;            </span><br><span class="line">            <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.ADD_CHECKITEM_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.ADD_CHECKITEM_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/deleteCheckItemById"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">deleteCheckItemById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkItemService.deleteCheckItemById(id);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;           </span><br><span class="line">            <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.DELETE_CHECKITEM_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.DELETE_CHECKITEM_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findCheckItemById"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CheckItem <span class="title">findCheckItemById</span><span class="params">(Integer id)</span> </span>&#123;        </span><br><span class="line">        <span class="keyword">return</span> checkItemService.findCheckItemById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/updateCheckItem"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">updateCheckItem</span><span class="params">(@RequestBody CheckItem checkItem)</span> </span>&#123;        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkItemService.updateCheckItem(checkItem);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;            </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>,MessageConstant.EDIT_CHECKITEM_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>,MessageConstant.EDIT_CHECKITEM_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>CheckGroupController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/checkGroup"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckGroupController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> CheckGroupService checkGroupService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//分页查询检查组</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findCheckGroupByPage"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageResult <span class="title">findCheckGroupByPage</span><span class="params">(@RequestBody QueryPageBean queryPageBean)</span> </span>&#123;</span><br><span class="line">        PageResult pageResult = checkGroupService.findCheckGroupByPage(queryPageBean);</span><br><span class="line">        <span class="keyword">return</span> pageResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加新检查组</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/addNewCheckGroup"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">addNewCheckGroup</span><span class="params">(@RequestBody CheckGroup checkGroup, Integer[] checkitemIds)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkGroupService.addCheckGroup(checkGroup, checkitemIds);            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.ADD_CHECKGROUP_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.ADD_CHECKGROUP_SUCCESS);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除选中的检查项</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/deleteCheckGroupById"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">deleteCheckGroupById</span><span class="params">(Integer checkGroupId)</span></span>&#123;        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkGroupService.deleteCheckGroupById(checkGroupId);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.DELETE_CHECKGROUP_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.DELETE_CHECKGROUP_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据id查询检查组信息</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findCheckGroupById"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CheckGroup <span class="title">findCheckItemById</span><span class="params">(Integer id)</span> </span>&#123;        </span><br><span class="line">        CheckGroup checkGroup = checkGroupService.findCheckGroupById(id);        </span><br><span class="line">        <span class="keyword">return</span> checkGroup;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存编辑过的检查组信息</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/saveCheckGroup"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">saveCheckGroup</span><span class="params">(@RequestBody CheckGroup checkGroup, Integer[] checkitemIds)</span> </span>&#123;        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            checkGroupService.saveCheckGroup(checkGroup, checkitemIds);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.EDIT_CHECKGROUP_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.EDIT_CHECKGROUP_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>OrdersettingController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/ordersetting"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdersettingController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> OrdersettingService ordersettingService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*文件上传,实现预约设置数据批量导入*/</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/upload"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">upload</span><span class="params">(@RequestParam(<span class="string">"excelFile"</span>)</span> MultipartFile excelFile) </span>&#123;</span><br><span class="line">        <span class="comment">//使用POI解析表格数据</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;String[]&gt; list = POIUtils.readExcel(excelFile);</span><br><span class="line">            List&lt;OrderSetting&gt; data = <span class="keyword">new</span> ArrayList&lt;OrderSetting&gt;();</span><br><span class="line">            <span class="keyword">if</span> (list != <span class="keyword">null</span> &amp;&amp; list.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (String[] strings : list) &#123;                    </span><br><span class="line">                    OrderSetting orderSetting = <span class="keyword">new</span> OrderSetting(<span class="keyword">new</span> Date(orderDate), Integer.parseInt(reservations));                   </span><br><span class="line">                    data.add(orderSetting);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//通过dubbo远程调用服务实现数据批量导入到数据库</span></span><br><span class="line">                ordersettingService.addOrdersetting(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.GET_ORDERSETTING_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.GET_ORDERSETTING_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*根据预约日期查询预约信息*/</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findOrdersettingByOrderDate"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">findOrdersettingByOrderDate</span><span class="params">(String orderDate)</span> </span>&#123;       </span><br><span class="line">        String start = orderDate + <span class="string">"-1"</span>;</span><br><span class="line">        String end = orderDate + <span class="string">"-31"</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Map&lt;String, Object&gt;&gt; orderSettingList = ordersettingService.findOrdersettingByOrderDate(start, end);         </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.QUERY_ORDER_SUCCESS, orderSettingList);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.QUERY_ORDER_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*根据页面框设置可预约人数更新数据库中数据*/</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/updateNumber"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">updateNumber</span><span class="params">(@RequestBody OrderSetting orderSetting)</span> </span>&#123;       </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ordersettingService.updateNumber(orderSetting);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.UPDATE_Ordersetting_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.UPDATE_Ordersetting_SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p><code>web</code></p><ul><li><p>checkItem.js</p><blockquote><p>将vue对象抽离出来,再引入checkitem.html页面之中</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">new</span> Vue(&#123;</span><br><span class="line">    el: '#app',</span><br><span class="line">    data: &#123;</span><br><span class="line">        pagination: &#123;//分页相关模型数据</span><br><span class="line">            currentPage: 1,//当前页码</span><br><span class="line">            pageSize: 5,//每页显示的记录数</span><br><span class="line">            total: 0,//总记录数</span><br><span class="line">            queryString: null//查询条件</span><br><span class="line">        &#125;,</span><br><span class="line">        dataList: [],//当前页要展示的分页列表数据</span><br><span class="line">        formData: &#123;&#125;,//表单数据</span><br><span class="line">        dialogFormVisible: false,//增加表单是否可见</span><br><span class="line">        dialogFormVisible4Edit: false,//编辑表单是否可见</span><br><span class="line">        rules: &#123;//校验规则</span><br><span class="line">            code: [&#123;required: true, message: '项目编码为必填项', trigger: 'blur'&#125;],</span><br><span class="line">            name: [&#123;required: true, message: '项目名称为必填项', trigger: 'blur'&#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    //钩子函数，VUE对象初始化完成后自动执行</span><br><span class="line">    created() &#123;</span><br><span class="line">        this.findCheckItemByPage();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findCheckItemByPage() &#123;           </span><br><span class="line">            <span class="attribute">let</span> QueryPageBean = &#123;</span><br><span class="line">                currentPage: this.pagination.currentPage,</span><br><span class="line">                pageSize: this.pagination.pageSize,</span><br><span class="line">                queryString: this.pagination.queryString</span><br><span class="line"></span><br><span class="line">            &#125;;</span><br><span class="line">            axios.post("/health_backend/checkItem/findCheckItemByPage.do", QueryPageBean).then((res) =&gt; &#123;               </span><br><span class="line">                this.pagination.total = res.data.total;</span><br><span class="line">                this.dataList = res.data.rows;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        //页码发生变化时触发的事件</span><br><span class="line">        handleCurrentChange(currentPage) &#123;</span><br><span class="line">            this.pagination.currentPage = currentPage;</span><br><span class="line">            this.findCheckItemByPage();</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        resetFormData() &#123;</span><br><span class="line">            this.formData = &#123;&#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        findAll() &#123;           </span><br><span class="line">            axios.get("/health_backend/checkItem/findAll.do").then((res) =&gt; &#123;                </span><br><span class="line">                this.dataList = res.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        handleCreate() &#123;</span><br><span class="line">            this.dialogFormVisible = true;</span><br><span class="line">            this.resetFormData();</span><br><span class="line">        &#125;,</span><br><span class="line">        handleAdd() &#123;            </span><br><span class="line">            this.$refs['dataAddForm'].validate((valid) =&gt; &#123;                </span><br><span class="line">                this.dialogFormVisible = false;                </span><br><span class="line">                <span class="attribute">if</span> (valid) &#123;</span><br><span class="line">                    axios.post("/health_backend/checkItem/addNewCheckItem.do", this.formData).then((res) =&gt; &#123;                        </span><br><span class="line">                        <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                            this.$message(&#123;</span><br><span class="line">                                message: res.data.message,</span><br><span class="line">                                type: "success"</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="section">else</span> &#123;</span><br><span class="line">                            this.$message.error(res.data.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error("表单校验失败");</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        handleDelete(row) &#123;            </span><br><span class="line">            axios.get("/health_backend/checkItem/deleteCheckItemById.do?id=" + row.id).then((res) =&gt; &#123;</span><br><span class="line">                alert(JSON.stringify(res.data.flag));</span><br><span class="line">                <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                        message: res.data.message,</span><br><span class="line">                        type: "success"</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error(res.data.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        handleUpdate(row) &#123;</span><br><span class="line">            this.dialogFormVisible4Edit = true;</span><br><span class="line">            axios.get("/health_backend/checkItem/findCheckItemById.do?id=" + row.id).then((res) =&gt; &#123;                </span><br><span class="line">                this.formData = res.data;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        handleEdit() &#123;</span><br><span class="line">            this.dialogFormVisible4Edit = false;</span><br><span class="line">            axios.post("/health_backend/checkItem/updateCheckItem.do", this.formData).then((res) =&gt; &#123;               </span><br><span class="line">                <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                        message: res.data.message,</span><br><span class="line">                        type: "success"</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error(res.data.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>checkGroup.js</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let</span> vue = new Vue(&#123;</span><br><span class="line">    el: '#app',</span><br><span class="line">    data: &#123;</span><br><span class="line">        activeName: 'first',//添加/编辑窗口Tab标签名称</span><br><span class="line">        pagination: &#123;//分页相关属性</span><br><span class="line">            currentPage: 1,</span><br><span class="line">            pageSize: 5,</span><br><span class="line">            total: 0,</span><br><span class="line">            queryString: null,</span><br><span class="line">        &#125;,</span><br><span class="line">        dataList: [],//列表数据</span><br><span class="line">        formData: &#123;&#125;,//表单数据</span><br><span class="line">        tableData: [],//新增和编辑表单中对应的检查项列表数据</span><br><span class="line">        checkitemIds: [],//新增和编辑表单中检查项对应的复选框，基于双向绑定可以进行回显和数据提交</span><br><span class="line">        dialogFormVisible: false,//控制添加窗口显示/隐藏</span><br><span class="line">        dialogFormVisible4Edit: false, //控制编辑窗口显示/隐藏</span><br><span class="line">        rules: &#123;//校验规则</span><br><span class="line">            code: [&#123;required: true, message: '项目编码为必填项', trigger: 'blur'&#125;],</span><br><span class="line">            name: [&#123;required: true, message: '项目名称为必填项', trigger: 'blur'&#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        this.findCheckGroupByPage();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        findCheckGroupByPage() &#123;            </span><br><span class="line">            <span class="attribute">let</span> QueryPageBean = &#123;</span><br><span class="line">                currentPage: this.pagination.currentPage,</span><br><span class="line">                pageSize: this.pagination.pageSize,</span><br><span class="line">                queryString: this.pagination.queryString</span><br><span class="line">            &#125;;</span><br><span class="line">            axios.post("/health_backend/checkGroup/findCheckGroupByPage.do", QueryPageBean).then((res) =&gt; &#123;                </span><br><span class="line">                this.dataList = res.data.rows;</span><br><span class="line">                this.pagination.total = res.data.total;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        //页面改变触发事件</span><br><span class="line">        handleCurrentChange(currentPage) &#123;</span><br><span class="line">            this.pagination.currentPage = currentPage;</span><br><span class="line">            this.findCheckGroupByPage();</span><br><span class="line">        &#125;,</span><br><span class="line">        //弹出新建检查项弹层</span><br><span class="line">        handleCreate() &#123;</span><br><span class="line">            this.dialogFormVisible = true;//弹出新建检查组窗体</span><br><span class="line">            this.formData = &#123;&#125;;//重置检查组表单数据</span><br><span class="line">            this.checkitemIds = [];//重置复选框</span><br><span class="line">            //发送ajax请求,查询所有检查项信息</span><br><span class="line">            axios.get("/health_backend/checkItem/findAllItems.do").then((res) =&gt; &#123;</span><br><span class="line">                    //alert(JSON.stringify(res.data))</span><br><span class="line">                    <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                        this.tableData = res.data.data;</span><br><span class="line">                        this.$message(&#123;</span><br><span class="line">                            message: res.data.message,</span><br><span class="line">                            type: "success"</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125; <span class="section">else</span> &#123;</span><br><span class="line">                        this.$message.error(res.data.message);</span><br><span class="line">                    &#125;</span><br><span class="line">                    this.findCheckGroupByPage();</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        //新增检查组</span><br><span class="line">        handleAdd() &#123;            </span><br><span class="line">            this.$refs['dataAddForm'].validate((valid) =&gt; &#123;</span><br><span class="line">                this.dialogFormVisible = false;                </span><br><span class="line">                <span class="attribute">if</span> (valid) &#123;</span><br><span class="line">                    axios.post("/health_backend/checkGroup/addNewCheckGroup.do?checkitemIds=" + this.checkitemIds, this.formData).then((res) =&gt; &#123;</span><br><span class="line">                        alert(JSON.stringify(res.data.flag));</span><br><span class="line">                        <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                            this.$message(&#123;</span><br><span class="line">                                message: res.data.message,</span><br><span class="line">                                type: "success"</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="section">else</span> &#123;</span><br><span class="line">                            this.$message.error(res.data.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error("表单校验失败");</span><br><span class="line">                &#125;</span><br><span class="line">                this.findCheckGroupByPage();</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        //编辑检查组,回显数据</span><br><span class="line">        handleUpdate(row) &#123;</span><br><span class="line">            alert(row.id);</span><br><span class="line">            this.dialogFormVisible4Edit = true;</span><br><span class="line">            this.checkitemIds = [];</span><br><span class="line">            axios.get("/health_backend/checkGroup/findCheckGroupById.do?id=" + row.id).then((res) =&gt; &#123;               </span><br><span class="line">                this.formData = res.data;</span><br><span class="line">                this.tableData = res.data.checkItems;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        //保存编辑过的检查组信息</span><br><span class="line">        handleEdit() &#123;           </span><br><span class="line">            axios.post("/health_backend/checkGroup/saveCheckGroup.do?checkitemIds=" + this.checkitemIds, this.formData).then((res) =&gt; &#123;</span><br><span class="line">                this.dialogFormVisible4Edit = false;                </span><br><span class="line">                <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                        message: res.data.message,</span><br><span class="line">                        type: "success"</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error(res.data.message);</span><br><span class="line">                &#125;</span><br><span class="line">                this.findCheckGroupByPage();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        //删除选定的检查组</span><br><span class="line">        handleDelete(row) &#123;           </span><br><span class="line">            axios.get("/health_backend/checkGroup/deleteCheckGroupById.do?checkGroupId=" + row.id).then((res) =&gt; &#123;                </span><br><span class="line">                <span class="attribute">if</span> (res.data.flag) &#123;</span><br><span class="line">                    this.$message(&#123;</span><br><span class="line">                        message: res.data.message,</span><br><span class="line">                        type: "success"</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="section">else</span> &#123;</span><br><span class="line">                    this.$message.error(res.data.message);</span><br><span class="line">                &#125;</span><br><span class="line">                this.findCheckGroupByPage();</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>Ordersetting.js</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">let</span> vue = new Vue(&#123;</span><br><span class="line">    el: '#app',</span><br><span class="line">    data: &#123;</span><br><span class="line">        today: new Date(),//当前日期</span><br><span class="line">        currentDay: 1,</span><br><span class="line">        currentMonth: 1,</span><br><span class="line">        LocalMonth: 1,</span><br><span class="line">        currentYear: 1970,</span><br><span class="line">        currentWeek: 1,</span><br><span class="line">        days: [],</span><br><span class="line">        leftobj: []//用于装载页面显示的月份已经进行预约设置的数据</span><br><span class="line">    &#125;,</span><br><span class="line">    created: function () &#123;//在vue初始化时调用</span><br><span class="line">        this.initData(null);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        //预约设置</span><br><span class="line">        handleOrderSet(day) &#123;</span><br><span class="line">            this.$prompt('请输入可预约人数', '预约设置', &#123;</span><br><span class="line">                confirmButtonText: '确定',</span><br><span class="line">                cancelButtonText: '取消',</span><br><span class="line">                inputPattern: /^.*$/,</span><br><span class="line">                inputErrorMessage: '只能是正整数'</span><br><span class="line">            &#125;).then((&#123;value&#125;) =&gt; &#123;              </span><br><span class="line">                <span class="attribute">let</span> ordersetting = &#123;</span><br><span class="line">                    number: value,</span><br><span class="line">                    orderDate: this.formatDate(day.getFullYear(), day.getMonth() + 1, day.getDate())</span><br><span class="line">                &#125;;</span><br><span class="line">                axios.post("/health_backend/ordersetting/updateNumber.do?", ordersetting);</span><br><span class="line">                this.$message(&#123;</span><br><span class="line">                    type: 'success',</span><br><span class="line">                    message: '当前预约人数是: ' + value</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;).catch(() =&gt; &#123;</span><br><span class="line">                this.$message(&#123;</span><br><span class="line">                    type: 'info',</span><br><span class="line">                    message: '取消输入'</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        //上传之前进行文件格式校验</span><br><span class="line">        beforeUpload(file) &#123;</span><br><span class="line">            <span class="attribute">const</span> isXLS = file.type === <span class="string">'application/vnd.ms-excel'</span>;</span><br><span class="line">            <span class="attribute">if</span> (isXLS) &#123;</span><br><span class="line">                <span class="attribute">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">const</span> isXLSX = file.type === <span class="string">'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'</span>;</span><br><span class="line">            <span class="attribute">if</span> (isXLSX) &#123;</span><br><span class="line">                <span class="attribute">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            this.$message.error('上传文件只能是xls或者xlsx格式!');</span><br><span class="line">            <span class="attribute">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        //下载模板文件</span><br><span class="line">        downloadTemplate() &#123;</span><br><span class="line">            window.location.href = "../template/ordersetting_template.xlsx";</span><br><span class="line">        &#125;,</span><br><span class="line">        //上传成功提示</span><br><span class="line">        handleSuccess(response, file) &#123;</span><br><span class="line">            <span class="attribute">if</span> (response.flag) &#123;</span><br><span class="line">                this.$message(&#123;</span><br><span class="line">                    message: response.message,</span><br><span class="line">                    type: 'success'</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="section">else</span> &#123;</span><br><span class="line">                this.$message.error(response.message);</span><br><span class="line">            &#125;</span><br><span class="line">            console.log(response, file, fileList);</span><br><span class="line">        &#125;,</span><br><span class="line">        //初始化当前页要展示的日期</span><br><span class="line">        initData: function (cur) &#123;</span><br><span class="line">            <span class="attribute">let</span> date;</span><br><span class="line">            let index = 0;   //控制显示预定的天数</span><br><span class="line">            <span class="attribute">if</span> (cur) &#123;</span><br><span class="line">                <span class="attribute">date</span> = new Date(cur);</span><br><span class="line">            &#125; <span class="section">else</span> &#123;</span><br><span class="line">                <span class="attribute">let</span> now = new Date();</span><br><span class="line">                <span class="attribute">let</span> d = new Date(this.formatDate(now.getFullYear(), now.getMonth(), <span class="number">1</span>));</span><br><span class="line">                d.setDate(35);</span><br><span class="line">                <span class="attribute">date</span> = new Date(this.formatDate(d.getFullYear(), d.getMonth() + <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            this.currentDay = date.getDate();</span><br><span class="line">            this.currentYear = date.getFullYear();</span><br><span class="line">            this.currentMonth = date.getMonth() + 1;</span><br><span class="line">            this.currentWeek = date.getDay(); // //本月第一天是周几（周日0 周六 6）</span><br><span class="line">            <span class="attribute">let</span> today = new Date();</span><br><span class="line">            this.LocalMonth = today.getMonth() + 1;</span><br><span class="line">            <span class="attribute">if</span> (this.currentWeek == <span class="number">0</span>) &#123;</span><br><span class="line">                this.currentWeek = 7;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">let</span> str = this.formatDate(this.currentYear, this.currentMonth, this.currentDay);</span><br><span class="line">            this.days.length = 0;</span><br><span class="line">            // 今天是周日，放在第一行第7个位置，前面6个</span><br><span class="line">            //初始化本周</span><br><span class="line">            for (let i = this.currentWeek - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">                <span class="attribute">let</span> d = new Date(str);</span><br><span class="line">                d.setDate(d.getDate() - i);</span><br><span class="line">                let dayobject = &#123;&#125;;</span><br><span class="line">                dayobject.day = d;</span><br><span class="line">                <span class="attribute">let</span> now = new Date();</span><br><span class="line">                <span class="attribute">if</span> (d.getDate() === (now.getDate()) &amp;&amp; d.getMonth() === now.getMonth() &amp;&amp; d.getFullYear() === now.getFullYear()) &#123;</span><br><span class="line">                    dayobject.index = index++;//从今天开始显示供预定的数量</span><br><span class="line">                &#125; <span class="attribute">else</span> if (index != <span class="number">0</span> &amp;&amp; index &lt; <span class="number">3</span>)</span><br><span class="line">                    dayobject.index = index++;//从今天开始3天内显示供预定的数量</span><br><span class="line">                this.days.push(dayobject);//将日期放入data 中的days数组 供页面渲染使用</span><br><span class="line">            &#125;</span><br><span class="line">            //其他周</span><br><span class="line">            for (let i = 1; i &lt;= 35 - this.currentWeek; i++) &#123;</span><br><span class="line">                <span class="attribute">let</span> d = new Date(str);</span><br><span class="line">                d.setDate(d.getDate() + i);</span><br><span class="line">                let dayobject = &#123;&#125;;//dayobject   &#123;day:date,index:2&#125;</span><br><span class="line">                dayobject.day = d;</span><br><span class="line">                <span class="attribute">let</span> now = new Date();</span><br><span class="line">                <span class="attribute">if</span> (d.getDate() === (now.getDate()) &amp;&amp; d.getMonth() === now.getMonth() &amp;&amp; d.getFullYear() === now.getFullYear()) &#123;</span><br><span class="line">                    dayobject.index = index++;</span><br><span class="line">                &#125; <span class="attribute">else</span> if (index != <span class="number">0</span> &amp;&amp; index &lt; <span class="number">3</span>)</span><br><span class="line">                    dayobject.index = index++;</span><br><span class="line">                this.days.push(dayobject);</span><br><span class="line">            &#125;            </span><br><span class="line">            axios.get("/health_backend/ordersetting/findOrdersettingByOrderDate.do?orderDate=" + this.currentYear + "-" + this.currentMonth).then((res) =&gt; &#123;           </span><br><span class="line">                this.leftobj = res.data.data;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        //切换到当前月份</span><br><span class="line">        goCurrentMonth: function (year, month) &#123;</span><br><span class="line">            <span class="attribute">let</span> d = new Date();</span><br><span class="line">            this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));</span><br><span class="line">        &#125;,</span><br><span class="line">        //向前一个月</span><br><span class="line">        pickPre: function (year, month) &#123;</span><br><span class="line">            // setDate(0); 上月最后一天</span><br><span class="line">            // setDate(-1); 上月倒数第二天</span><br><span class="line">            // setDate(dx) 参数dx为 上月最后一天的前后dx天</span><br><span class="line">            <span class="attribute">let</span> d = new Date(this.formatDate(year, month, <span class="number">1</span>));</span><br><span class="line">            d.setDate(0);</span><br><span class="line">            this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));</span><br><span class="line">        &#125;,</span><br><span class="line">        //向后一个月</span><br><span class="line">        pickNext: function (year, month) &#123;</span><br><span class="line">            <span class="attribute">let</span> d = new Date(this.formatDate(year, month, <span class="number">1</span>));</span><br><span class="line">            d.setDate(35);////获取指定天之后的日期</span><br><span class="line">            this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));</span><br><span class="line">        &#125;,</span><br><span class="line">        // 返回 类似 2016-01-02 格式的字符串</span><br><span class="line">        formatDate: function (year, month, day) &#123;</span><br><span class="line">            <span class="attribute">let</span> y = year;</span><br><span class="line">            <span class="attribute">let</span> m = month;</span><br><span class="line">            <span class="attribute">if</span> (m &lt; <span class="number">10</span>) m = <span class="string">"0"</span> + m;</span><br><span class="line">            <span class="attribute">let</span> d = day;</span><br><span class="line">            <span class="attribute">if</span> (d &lt; <span class="number">10</span>) d = <span class="string">"0"</span> + d;</span><br><span class="line">            <span class="attribute">return</span> y + <span class="string">"-"</span> + m + <span class="string">"-"</span> + d</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div></li></ul><h3 id="health-mobile"><a href="#health-mobile" class="headerlink" title="health_mobile"></a>health_mobile</h3><blockquote><p>创建移动端工程health_mobile，打包方式为war，用于存放Controller，在Controller中通过Dubbo可 以远程访问服务层相关服务，所以需要依赖health_interface接口工程。</p></blockquote><p>预约流程如下：</p><blockquote><ol><li>访问移动端首页</li><li>点击体检预约进入体检套餐列表页面</li><li>在体检套餐列表页面点击具体套餐进入套餐详情页面</li><li>在套餐详情页面点击立即预约进入预约页面</li><li>在预约页面录入体检人相关信息点击提交预约</li></ol></blockquote><p>搭建移动端工程</p><blockquote><p>本项目是基于SOA架构进行开发，前面我们已经完成了后台系统的部分功能开发，在后台系统中都是通 过Dubbo调用服务层发布的服务进行相关的操作。本章节我们开发移动端工程也是同样的模式，所以我<br>们也需要在移动端工程中通过Dubbo调用服务层发布的服务</p></blockquote><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImg20200205162227.png" alt="image-20200205162205210" style="zoom:67%"><h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><ol><li>导入maven坐标</li><li>导入通用组件</li></ol><p>web</p><ul><li><p>setmeal.html</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var</span> vue = new Vue(&#123;</span><br><span class="line">    el:'#app',</span><br><span class="line">        data:&#123;</span><br><span class="line">        setmealList:[]</span><br><span class="line">    &#125;,</span><br><span class="line">        /*钩子函数*/</span><br><span class="line">        <span class="attribute">mounted</span> ()&#123;</span><br><span class="line">        //alert("ok");</span><br><span class="line">        axios.post("/health_mobile/mobileSetmeal/getSetmeal.do").then((res)=&gt;&#123;</span><br><span class="line">            //alert(JSON.stringify(res))</span><br><span class="line">                this.setmealList = res.data.data;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><p>controller</p><ul><li><p>setmealController</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/mobileSetmeal"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetmealController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> SetmealService setmealService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*查询所有套餐*/</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/getSetmeal"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">getSetmeal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Setmeal&gt; setmealList = setmealService.getSetmeal();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">true</span>, MessageConstant.QUERY_SETMEAL_SUCCESS, setmealList);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Result(<span class="keyword">false</span>, MessageConstant.QUERY_SETMEAL_FAIL);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><hr><h3 id="health-service-provider"><a href="#health-service-provider" class="headerlink" title="health_service_provider"></a>health_service_provider</h3><blockquote><p>创建health_service_provider，子工程，打包方式为war，作为服务单独部署，存放服务 类、Dao接口和Mapper映射文件等</p></blockquote><p><a href="/post_files/file/itcast_service_provider_pom.xml">☍pom.xml</a></p><p><a href="/post_files/file/itcast_service_provider_log4j.properties">☍log4j.properties</a></p><p><a href="/post_files/file/itcast_service_provider_redis.properties">☍redis.properties</a></p><p><a href="/post_files/file/itcast_service_provider_SqlMapConfig.xml">☍sqlMapConfig.xml</a></p><p><a href="/post_files/file/itcast_service_provider_spring-dao.xml">☍spring-dao.xml</a></p><p><a href="/post_files/file/itcast_service_provider_spring-tx.xml">☍spring-tx.xml</a></p><p><a href="/post_files/file/itcast_service_provider_spring-service.xml">☍spring-service.xml</a></p><p><a href="/post_files/file/itcast_service_provider_web.xml">☍web.xml</a></p><p><a href="/post_files/file/itcast_service_provider_spring-redis.xml">☍spring-redis</a></p><p>dao</p><blockquote><p>mapper代理接口</p></blockquote><ul><li><p>CheckItemDao</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CheckItemDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from t_checkitem"</span>)</span><br><span class="line">    <span class="function">List&lt;CheckItem&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"insert into t_checkitem values (#&#123;id&#125;,#&#123;code&#125;,#&#123;name&#125;,#&#123;sex&#125;,#&#123;age&#125;,#&#123;price&#125;,#&#123;type&#125;,#&#123;attention&#125;,#&#123;remark&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addNewCheckItem</span><span class="params">(CheckItem checkItem)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from t_checkitem where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteCheckItemById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from t_checkitem where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">CheckItem <span class="title">findCheckItemById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update t_checkitem set code = #&#123;code&#125;,name = #&#123;name&#125;,sex = #&#123;sex&#125;,age = #&#123;age&#125;,price = #&#123;price&#125;,type = #&#123;type&#125;,attention = #&#123;attention&#125;,remark = #&#123;remark&#125; where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateCheckItem</span><span class="params">(CheckItem checkItem)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Page&lt;CheckItem&gt; <span class="title">findCheckItemByPage</span><span class="params">(String queryString)</span></span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li><li><p>OrdersettingDao</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrdersettingDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">Long <span class="title">findCountByOrderDate</span><span class="params">(Date orderDate)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">editOrdersettingNum</span><span class="params">(OrderSetting orderSetting)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addOrdersetting</span><span class="params">(OrderSetting orderSetting)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;OrderSetting&gt; <span class="title">findOrdersettingByOrderDate</span><span class="params">(Map&lt;String,String&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateOrdersettingOrderDate</span><span class="params">(OrderSetting orderSetting)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p>service</p><ul><li><p>CheckItemServiceImpl</p><blockquote><p>接口实现类</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(interfaceClass = CheckItemService<span class="class">.<span class="keyword">class</span>,<span class="title">timeout</span> </span>= <span class="number">60000</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckItemServiceImpl</span> <span class="keyword">implements</span> <span class="title">CheckItemService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CheckItemDao checkItemDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CheckItem&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> checkItemDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNewCheckItem</span><span class="params">(CheckItem checkItem)</span> </span>&#123;</span><br><span class="line">        checkItemDao.addNewCheckItem(checkItem);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCheckItemById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        checkItemDao.deleteCheckItemById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CheckItem <span class="title">findCheckItemById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> checkItemDao.findCheckItemById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateCheckItem</span><span class="params">(CheckItem checkItem)</span> </span>&#123;</span><br><span class="line">        checkItemDao.updateCheckItem(checkItem);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageResult <span class="title">findCheckItemByPage</span><span class="params">(QueryPageBean queryPageBean)</span> </span>&#123;</span><br><span class="line">        Integer currentPage = queryPageBean.getCurrentPage();</span><br><span class="line">        Integer pageSize = queryPageBean.getPageSize();</span><br><span class="line">        String queryString = queryPageBean.getQueryString();</span><br><span class="line">        PageHelper.startPage(currentPage,pageSize);</span><br><span class="line">        Page&lt;CheckItem&gt; page = checkItemDao.findCheckItemByPage(queryString);        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageResult(page.getTotal(),page.getResult());</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>CheckGroupServiceImpl</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(interfaceClass = CheckGroupService<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Transactional</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">CheckGroupServiceImpl</span> <span class="keyword">implements</span> <span class="title">CheckGroupService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CheckGroupDao checkGroupDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PageResult <span class="title">findCheckGroupByPage</span><span class="params">(QueryPageBean queryPageBean)</span> </span>&#123;</span><br><span class="line">        Integer currentPage = queryPageBean.getCurrentPage();</span><br><span class="line">        Integer pageSize = queryPageBean.getPageSize();</span><br><span class="line">        String queryString = queryPageBean.getQueryString();</span><br><span class="line">        PageHelper.startPage(currentPage, pageSize);</span><br><span class="line">        Page&lt;CheckGroup&gt; page = checkGroupDao.findCheckGroupByPage(queryString);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageResult(page.getTotal(), page.getResult());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCheckGroup</span><span class="params">(CheckGroup checkGroup, Integer[] checkitemIds)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//新增检查组，操作t_checkgroup表</span></span><br><span class="line">        checkGroupDao.addCheckGroup(checkGroup);</span><br><span class="line">        <span class="comment">//设置检查组和检查项的多对多的关联关系，操作t_checkgroup_checkitem表</span></span><br><span class="line">        Integer checkGroupId = checkGroup.getId();</span><br><span class="line">        <span class="keyword">this</span>.setCheckGroupAndCheckItem(checkGroupId, checkitemIds);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据检查项id获取该检查项信息,用于页面数据回显</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CheckGroup <span class="title">findCheckGroupById</span><span class="params">(Integer id)</span> </span>&#123;       </span><br><span class="line">        CheckGroup checkGroup = checkGroupDao.findCheckGroupById(id);        </span><br><span class="line">        <span class="keyword">return</span> checkGroupDao.findCheckGroupById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveCheckGroup</span><span class="params">(CheckGroup checkGroup, Integer[] checkItemIds)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//清理t_checkgroup_checkitem表中checkgroup_id与checkitem_id旧的关联关系       </span></span><br><span class="line">        Integer checkGroupId = checkGroup.getId();</span><br><span class="line">        <span class="keyword">if</span> (checkItemIds != <span class="keyword">null</span> &amp;&amp; checkItemIds.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.deleteCheckGroupAndCheckItem(checkGroupId);</span><br><span class="line">            <span class="keyword">this</span>.setCheckGroupAndCheckItem(checkGroupId,checkItemIds);</span><br><span class="line">        &#125;</span><br><span class="line">        checkGroupDao.saveCheckGroup(checkGroup);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据检查组id删除选中的检查组</span></span><br><span class="line"><span class="comment">     * 1.根据检查组id在t_checkgroup_checkitem表中删除对应的关联关系</span></span><br><span class="line"><span class="comment">     * 2.删除检查组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCheckGroupById</span><span class="params">(Integer checkGroupId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*1.在t_checkgroup_checkitem表中删除对应的关联关系*/</span>        </span><br><span class="line">        <span class="keyword">this</span>.deleteCheckGroupAndCheckItem(checkGroupId);</span><br><span class="line">        checkGroupDao.deleteCheckGroupById(checkGroupId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteCheckGroupAndCheckItem</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        checkGroupDao.deleteCheckGroupAndCheckItem(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCheckGroupAndCheckItem</span><span class="params">(Integer checkGroupId, Integer[] checkitemIds)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (checkitemIds != <span class="keyword">null</span> &amp;&amp; checkitemIds.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Integer checkitemId : checkitemIds) &#123;</span><br><span class="line">                Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">"checkgroupId"</span>, checkGroupId);</span><br><span class="line">                map.put(<span class="string">"checkitemId"</span>, checkitemId);</span><br><span class="line">                checkGroupDao.setCheckGroupAndCheckItem(map);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>OrdersettingServiceImpl</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(interfaceClass = OrdersettingService<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">OrdersettingServiceImpl</span> <span class="keyword">implements</span> <span class="title">OrdersettingService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrdersettingDao ordersettingDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addOrdersetting</span><span class="params">(List&lt;OrderSetting&gt; data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (OrderSetting orderSetting : data) &#123;           </span><br><span class="line">            Long count = ordersettingDao.findCountByOrderDate(orderSetting.getOrderDate());</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                ordersettingDao.editOrdersettingNum(orderSetting);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ordersettingDao.addOrdersetting(orderSetting);                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">/*根据预约日期查询预约信息*/</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; findOrdersettingByOrderDate(String start, String end) &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"start"</span>, start);</span><br><span class="line">        map.put(<span class="string">"end"</span>, end);       </span><br><span class="line">        List&lt;OrderSetting&gt; orderSettingList = ordersettingDao.findOrdersettingByOrderDate(map);       </span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (OrderSetting orderSetting : orderSettingList) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; ordersettingMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            ordersettingMap.put(<span class="string">"date"</span>, orderSetting.getOrderDate().getDate());</span><br><span class="line">            ordersettingMap.put(<span class="string">"number"</span>, orderSetting.getNumber());</span><br><span class="line">            ordersettingMap.put(<span class="string">"reservations"</span>, orderSetting.getReservations());</span><br><span class="line">            list.add(ordersettingMap);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">/*根据页面框设置可预约人数更新数据库中数据*/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateNumber</span><span class="params">(OrderSetting orderSetting)</span> </span>&#123;</span><br><span class="line">        Long count = ordersettingDao.findCountByOrderDate(orderSetting.getOrderDate());</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ordersettingDao.updateOrdersettingOrderDate(orderSetting);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ordersettingDao.addOrdersetting(orderSetting);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><p>Xxxdao.xml</p><ul><li><p>CheckItemDao.xml</p><blockquote><p>mapper代理对象的映射文件</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.CheckItemDao"</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      //分页条件查询检查项</span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findCheckItemByPage"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.pojo.CheckItem"</span>&gt;</span></span><br><span class="line">          select * from t_checkitem</span><br><span class="line">          <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"value != null and value.length &gt; 0"</span>&gt;</span></span><br><span class="line">                  code = #&#123;value&#125; or name = #&#123;value&#125;</span><br><span class="line">              <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>CheckGroupDao.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.CheckGroupDao"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--插入检查组数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addCheckGroup"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.pojo.CheckGroup"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--通过mybatis框架提供的selectKey标签获得自增产生的ID值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">order</span>=<span class="string">"AFTER"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">            select LAST_INSERT_ID()</span><br><span class="line">        <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">        insert into t_checkgroup (code,name,sex,helpCode,remark,attention)</span><br><span class="line">        values</span><br><span class="line">        (#&#123;code&#125;,#&#123;name&#125;,#&#123;sex&#125;,#&#123;helpCode&#125;,#&#123;remark&#125;,#&#123;attention&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--设置检查组和检查项多对多关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"setCheckGroupAndCheckItem"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">        insert into t_checkgroup_checkitem (checkgroup_id,checkitem_id)</span><br><span class="line">        values</span><br><span class="line">        (#&#123;checkgroupId&#125;,#&#123;checkitemId&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--分页查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findCheckGroupByPage"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.pojo.CheckGroup"</span>&gt;</span></span><br><span class="line">        select * from t_checkgroup</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"value != null and value.length &gt; 0"</span>&gt;</span></span><br><span class="line">                code = #&#123;value&#125; or name = #&#123;value&#125; or helpCode = #&#123;value&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"checkGroup_checkItem_mapper"</span> <span class="attr">type</span>=<span class="string">"checkGroup"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"code"</span> <span class="attr">property</span>=<span class="string">"code"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"helpCode"</span> <span class="attr">property</span>=<span class="string">"helpCode"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">property</span>=<span class="string">"sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"remark"</span> <span class="attr">property</span>=<span class="string">"remark"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"attention"</span> <span class="attr">property</span>=<span class="string">"attention"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"checkItems"</span> <span class="attr">ofType</span>=<span class="string">"checkItem"</span> <span class="attr">column</span>=<span class="string">"id"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"com.itheima.dao.CheckItemDao.findCheckItemsById"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--根据检查组id查询当前检查组信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findCheckGroupById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultMap</span>=<span class="string">"checkGroup_checkItem_mapper"</span>&gt;</span></span><br><span class="line">        select * from t_checkgroup where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--清除t_checkgroup_checkitem表中checkgroup_id与checkitem_id旧的关联关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteCheckGroupAndCheckItem"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">        delete from</span><br><span class="line">            t_checkgroup_checkitem</span><br><span class="line">        where</span><br><span class="line">            checkgroup_id = #&#123;value&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--保存编辑过的检查组--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"saveCheckGroup"</span> <span class="attr">parameterType</span>=<span class="string">"checkGroup"</span>&gt;</span></span><br><span class="line">        update</span><br><span class="line">            t_checkgroup</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name != null"</span>&gt;</span></span><br><span class="line">                name = #&#123;name&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sex != null"</span>&gt;</span></span><br><span class="line">                sex = #&#123;sex&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"code != null"</span>&gt;</span></span><br><span class="line">                code = #&#123;code&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"helpCode != null"</span>&gt;</span></span><br><span class="line">                helpCode = #&#123;helpCode&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"attention != null"</span>&gt;</span></span><br><span class="line">                attention = #&#123;attention&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"remark != null"</span>&gt;</span></span><br><span class="line">                remark = #&#123;remark&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where</span><br><span class="line">            id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--删除检查组--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteCheckGroupById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        delete from</span><br><span class="line">            t_checkgroup</span><br><span class="line">        where</span><br><span class="line">            id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><ul><li><p>OrdersettingDao.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.OrdersettingDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--根据预约设置时间查询有无此预约记录--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findCountByOrderDate"</span> <span class="attr">parameterType</span>=<span class="string">"java.util.Date"</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Long"</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            count(*)</span><br><span class="line">        from</span><br><span class="line">            t_ordersetting</span><br><span class="line">        where</span><br><span class="line">            orderDate = #&#123;orderDate&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加预约信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addOrdersetting"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.pojo.OrderSetting"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        insert into</span><br><span class="line">            t_ordersetting</span><br><span class="line">            (orderDate,number)</span><br><span class="line">        values</span><br><span class="line">            (#&#123;orderDate&#125;,#&#123;number&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--修改预约信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"editOrdersettin gNum"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.pojo.OrderSetting"</span>&gt;</span></span><br><span class="line">        update</span><br><span class="line">            t_ordersetting</span><br><span class="line">        set</span><br><span class="line">            number = #&#123;number&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询当前月份所有预约信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findOrdersettingByOrderDate"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span> <span class="attr">resultType</span>=<span class="string">"com.itheima.pojo.OrderSetting"</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            *</span><br><span class="line">        from</span><br><span class="line">            t_ordersetting</span><br><span class="line">        where</span><br><span class="line">            orderDate</span><br><span class="line">        between</span><br><span class="line">            #&#123;start&#125;</span><br><span class="line">        and</span><br><span class="line">            #&#123;end&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--根据页面框设置可预约人数更新数据库中数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateNumber"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.pojo.OrderSetting"</span>&gt;</span></span><br><span class="line">        update</span><br><span class="line">            t_ordersetting</span><br><span class="line">        set</span><br><span class="line">            number = #&#123;number&#125;</span><br><span class="line">        where</span><br><span class="line">            orderDate = #&#123;orderDate&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 传智健康 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache_Dubbo</title>
      <link href="/posts/1654987719.html"/>
      <url>/posts/1654987719.html</url>
      
        <content type="html"><![CDATA[<!-- build time:Mon Feb 10 2020 22:32:44 GMT+0800 (GMT+08:00) --><h1 id="Apache-Dubbo"><a href="#Apache-Dubbo" class="headerlink" title="Apache Dubbo"></a>Apache Dubbo</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul><li><p>Dubbo简介</p><blockquote><p>Apache Dubbo是一款高性能的Java RPC框架。其前身是阿里巴巴公司开源的一个高性能、轻量级的开源Java RPC框架，可以和Spring框架无缝集成。</p><p><strong>什么是RPC？</strong></p><p>RPC全称为remote procedure call，即<strong>远程过程调用</strong>。比如两台服务器A和B，A服务器上部署一个应用，B服务器上部署一个应用，A服务器上的应用想调用B服务器上的应用提供的方法，由于两个应用不在一个内存空间，不能直接调用，所以需要通过网络来表达调用的语义和传达调用的数据。</p><p>需要注意的是RPC并不是一个具体的技术，而是指整个网络远程调用过程。</p><p>RPC是一个泛化的概念，严格来说一切远程过程调用手段都属于RPC范畴。各种开发语言都有自己的RPC框架。Java中的RPC框架比较多，广泛使用的有RMI、Hessian、Dubbo等。</p><p>Dubbo官网地址：<a href="http://dubbo.apache.org" target="_blank" rel="noopener">http://dubbo.apache.org</a></p><p>Dubbo提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。</p></blockquote></li></ul><ul><li><p>Dubbo架构</p><p><img src="https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgDubbo.png" alt="dubbo架构图"></p></li></ul><p>​</p><h2 id="服务注册中心Zookeeper"><a href="#服务注册中心Zookeeper" class="headerlink" title="服务注册中心Zookeeper"></a>服务注册中心Zookeeper</h2><ul><li><p>Zookeeper介绍</p><blockquote><p>Zookeeper 是 Apache Hadoop 的子项目，是一个树型的目录服务，支持变更推送，适合作为 Dubbo 服务的注册中心，工业强度较高，可用于生产环境，并推荐使用 。</p><p>流程说明：</p><ol><li><p>服务提供者(Provider)启动时: 向 <code>/dubbo/com.foo.BarService/providers</code> 目录下写入自己的 URL 地址</p></li><li><p>服务消费者(Consumer)启动时: 订阅 <code>/dubbo/com.foo.BarService/providers</code> 目录下的提供者 URL 地址。并向 <code>/dubbo/com.foo.BarService/consumers</code> 目录下写入自己的 URL 地址</p></li><li><p>监控中心(Monitor)启动时: 订阅 <code>/dubbo/com.foo.BarService</code> 目录下的所有提供者和消费者 URL 地址</p></li></ol></blockquote></li></ul><ul><li><p>安装Zookeeper</p><blockquote><p>安装步骤：</p><p>第一步：安装 jdk（略）<br>第二步：把 zookeeper 的压缩包（zookeeper-3.4.6.tar.gz）上传到 linux 系统<br>第三步：解压缩压缩包<br>​ tar -zxvf zookeeper-3.4.6.tar.gz<br>第四步：进入zookeeper-3.4.6目录，创建data目录<br>​ mkdir data<br>第五步：进入conf目录 ，把zoo_sample.cfg 改名为zoo.cfg<br>​ cd conf<br>​ mv zoo_sample.cfg zoo.cfg<br>第六步：打开zoo.cfg文件, 修改data属性：dataDir=/usr/local/zookeeper-3.4.6/data</p></blockquote></li></ul><ul><li><p>启动、停止Zookeeper</p><blockquote><p>进入Zookeeper的bin目录，启动服务命令<br>./zkServer.sh start</p><p>停止服务命令<br>./zkServer.sh stop</p><p>查看服务状态：<br>./zkServer.sh status</p></blockquote></li></ul><h2 id="Dubbo入门案例"><a href="#Dubbo入门案例" class="headerlink" title="Dubbo入门案例"></a>Dubbo入门案例</h2><blockquote><p>Dubbo作为一个RPC框架，其最核心的功能就是要实现跨网络的远程调用。本小节就是要创建两个应用，一个作为服务的提供方，一个作为服务的消费方。通过Dubbo来实现服务消费方远程调用服务提供方的方法。</p></blockquote><ul><li><p>服务提供方开发</p><p>创建maven工程</p></li></ul><p>配置web.xml文件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>创建服务接口</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.service;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="function">String <span class="title">say</span><span class="params">(String username)</span></span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div><p>创建服务实现类</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span><span class="comment">//将服务发布到注册中心：暴露服务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;<span class="comment">//com.sun.proxy.Proxy$123</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"provider  service impl:"</span> + username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>在src/main/resources下创建spring.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://code.alibabatech.com/schema/dubbo/dubbo.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置dubbo相关--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.定义应用名称:要求唯一--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">"ssm_provider"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.注册中心地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://106.12.83.204:2181"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--3.服务协议和端口号--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"dubbo"</span> <span class="attr">port</span>=<span class="string">"20880"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--4.扫描service--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"cn.itcast.service.impl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><pre><code>启动服务tomcat7:run![](https://raw.githubusercontent.com/Xiaxingdong/mypicgo.github.io/master/blogImgzk1.png)</code></pre><p><img src="/posts/JavaNotes/img/blogImgzk2.png" alt></p><p>​</p><ul><li><p>服务消费方开发</p><p>创建maven工程</p><blockquote><p>pom.xml配置和上面服务提供者相同，只需要将Tomcat插件的端口号改变一下即可</p></blockquote><p>配置web.xml文件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定加载的配置文件 ，通过参数contextConfigLocation加载 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>将服务提供者工程中的<del>UserService</del>接口复制到当前工程</p><p>编写Controller</p><blockquote><p>Controller中注入<del>UserService</del>使用的是Dubbo提供的@Reference注解</p></blockquote><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(String username)</span> </span>&#123;                </span><br><span class="line">      <span class="keyword">return</span> userService.say(username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>在src/main/resources下创建springmvc.xml</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">"http://code.alibabatech.com/schema/dubbo"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://code.alibabatech.com/schema/dubbo</span></span></span><br><span class="line"><span class="tag"><span class="string">http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.itcast.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当前应用名称，用于注册中心计算应用间依赖关系，注意：消费者和提供者应用名不要一样 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">"ssm_consumer"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 连接服务注册中心zookeeper ip为zookeeper所在服务器的ip地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">"zookeeper://106.12.83.204:2181"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 扫描的方式暴露接口  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"cn.itcast.controller"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--取消检查:适合用于开发阶段,正式发布要去掉--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:consumer</span> <span class="attr">check</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>运行测试</p></li></ul><ul><li><code>将ssm_provider和ssm_consumer共同使用的接口抽取出来</code><ol><li>创建<code>ssm_interfaces</code></li><li>创建服务方和消费方都使用的接口</li><li>给服务方和消费方添加坐标依赖</li><li>在主工程下clean–&gt;install</li><li>分别启动服务方和消费方</li></ol></li></ul><p>案例:</p><p>使用dubbo搭建ssm三大框架</p><p>项目:数据后台管理</p><p>…..</p><p><font color="red" face="TW Cen MT" size="4px">bug</font></p><ol><li><p>org.apache.jasper.JasperException: Unable to compile class for JSP:</p><blockquote><ol><li>pom.xml中jsp或servlet坐标未设置作用域provided</li></ol></blockquote></li><li><p>nested exception is com.alibaba.dubbo.rpc.RpcException: Failed to invoke the method findPage in the</p><blockquote><ol><li>在pojo类中实现序列化接口</li><li>在service实现类中加一个超时的声明标签：@Service(timeout = 50000)</li></ol></blockquote></li></ol><h2 id="Dubbo-管理控制台"><a href="#Dubbo-管理控制台" class="headerlink" title="Dubbo 管理控制台"></a>Dubbo 管理控制台</h2><blockquote><p>我们在开发时，需要知道Zookeeper注册中心都注册了哪些服务，有哪些消费者来消费这些服务。我们可以通过部署一个管理中心来实现。其实管理中心就是一个web应用，部署到tomcat即可。</p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li><p>将资料中的dubbo-admin-2.6.0.war文件复制到tomcat的webapps目录下</p></li><li><p>启动tomcat，此war文件会自动解压</p></li><li><p>修改WEB-INF下的dubbo.properties文件，注意dubbo.registry.address对应的值需要对应当前使用的Zookeeper的ip地址和端口号</p><p>​ dubbo.registry.address=zookeeper://106.12.83.204:2181<br>​ dubbo.admin.root.password=root<br>​ dubbo.admin.guest.password=guest</p></li><li><p>重启tomcat</p></li></ol><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol><li>访问<a href="http://106.12.83.204:8080/dubbo-admin-2.6.0/，输入用户名(root)和密码(root)" target="_blank" rel="noopener">http://106.12.83.204:8080/dubbo-admin-2.6.0/，输入用户名(root)和密码(root)</a></li><li>启动服务提供者工程和服务消费者工程，可以在查看到对应的信息</li></ol><h2 id="Dubbo相关配置详解"><a href="#Dubbo相关配置详解" class="headerlink" title="Dubbo相关配置详解"></a>Dubbo相关配置详解</h2><h3 id="包扫描"><a href="#包扫描" class="headerlink" title="包扫描"></a>包扫描</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:annotation</span> <span class="attr">package</span>=<span class="string">"com.itheima.service"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><p>服务提供者和服务消费者都需要配置，表示包扫描，作用是扫描指定包(包括子包)下的类。</p><p>如果不使用包扫描，也可以通过如下配置的方式来发布服务：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.impl.HelloServiceImpl"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">"com.itheima.api.HelloService"</span> <span class="attr">ref</span>=<span class="string">"helloService"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><p>作为服务消费者，可以通过如下配置来引用服务：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 生成远程服务代理，可以和本地bean一样使用helloService --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">"helloService"</span> <span class="attr">interface</span>=<span class="string">"com.itheima.api.HelloService"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><p>上面这种方式发布和引用服务，一个配置项(<a href="dubbo:service">dubbo:service</a>、<a href="dubbo:reference">dubbo:reference</a>)只能发布或者引用一个服务，如果有多个服务，这种方式就比较繁琐了。推荐使用包扫描方式。</p><h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"dubbo"</span> <span class="attr">port</span>=<span class="string">"20880"</span>/&gt;</span></span><br></pre></td></tr></table></figure></div><p>一般在服务提供者一方配置，可以指定使用的协议名称和端口号。</p><p>其中Dubbo支持的协议有：dubbo、rmi、hessian、http、webservice、rest、redis等。</p><p>推荐使用的是dubbo协议。</p><p>dubbo 协议采用单一长连接和 NIO 异步通讯，适合于小数据量大并发的服务调用，以及服务消费者机器数远大于服务提供者机器数的情况。不适合传送大数据量的服务，比如传文件，传视频等，除非请求量很低。</p><p>也可以在同一个工程中配置多个协议，不同服务可以使用不同的协议，例如：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 多协议配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"dubbo"</span> <span class="attr">port</span>=<span class="string">"20880"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">"rmi"</span> <span class="attr">port</span>=<span class="string">"1099"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用dubbo协议暴露服务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">"com.itheima.api.HelloService"</span> <span class="attr">ref</span>=<span class="string">"helloService"</span> <span class="attr">protocol</span>=<span class="string">"dubbo"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用rmi协议暴露服务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">"com.itheima.api.DemoService"</span> <span class="attr">ref</span>=<span class="string">"demoService"</span> <span class="attr">protocol</span>=<span class="string">"rmi"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="启动时检查"><a href="#启动时检查" class="headerlink" title="启动时检查"></a>启动时检查</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:consumer</span> <span class="attr">check</span>=<span class="string">"false"</span>/&gt;</span></span><br></pre></td></tr></table></figure></div><p>上面这个配置需要配置在服务消费者一方，如果不配置默认check值为true。Dubbo 缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止 Spring 初始化完成，以便上线时，能及早发现问题。可以通过将check值改为false来关闭检查。</p><p>建议在开发阶段将check值设置为false，在生产环境下改为true。</p><h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>负载均衡（Load Balance）：其实就是将请求分摊到多个操作单元上进行执行，从而共同完成工作任务。</p><p>在集群负载均衡时，Dubbo 提供了多种均衡策略（包括随机、轮询、最少活跃调用数、一致性Hash），缺省为random随机调用。</p><p>配置负载均衡策略，既可以在服务提供者一方配置，也可以在服务消费者一方配置，如下：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/demo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//在服务消费者一方配置负载均衡策略</span></span><br><span class="line">    <span class="meta">@Reference</span>(check = <span class="keyword">false</span>,loadbalance = <span class="string">"random"</span>)</span><br><span class="line">    <span class="keyword">private</span> HelloService helloService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="comment">//远程调用</span></span><br><span class="line">        String result = helloService.sayHello(name);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在服务提供者一方配置负载均衡</span></span><br><span class="line"><span class="meta">@Service</span>(loadbalance = <span class="string">"random"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServiceImpl</span> <span class="keyword">implements</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>可以通过启动多个服务提供者来观察Dubbo负载均衡效果。</p><p>注意：因为我们是在一台机器上启动多个服务提供者，所以需要修改tomcat的端口号和Dubbo服务的端口号来防止端口冲突。</p><p>在实际生产环境中，多个服务提供者是分别部署在不同的机器上，所以不存在端口冲突问题。</p><!-- rebuild by neat -->]]></content>
      
      
      
        <tags>
            
            <tag> 框架 分布式RPC </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
